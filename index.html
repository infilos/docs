<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Published 2021-02-05">
<title>JavaFX 文档项目</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>JavaFX 文档项目</h1>
<div class="details">
<span id="author" class="author">Published 2021-02-05</span><br>
<span id="revnumber">version unspecified</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_contributors">1.1. Contributors</a></li>
<li><a href="#_contributing">1.2. Contributing</a></li>
<li><a href="#_license">1.3. License</a></li>
</ul>
</li>
<li><a href="#_scene_graph">2. Scene Graph</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#_transformations">2.2. Transformations</a></li>
<li><a href="#_event_handling">2.3. Event Handling</a></li>
<li><a href="#_timing">2.4. Timing</a></li>
</ul>
</li>
<li><a href="#_ui_controls">3. UI Controls</a>
<ul class="sectlevel2">
<li><a href="#_choicebox">3.1. ChoiceBox</a></li>
<li><a href="#_combobox">3.2. ComboBox</a></li>
<li><a href="#_listview">3.3. ListView</a></li>
<li><a href="#_tableview">3.4. TableView</a></li>
<li><a href="#_imageview">3.5. ImageView</a></li>
<li><a href="#_linechart">3.6. LineChart</a></li>
<li><a href="#_pagination">3.7. Pagination</a></li>
</ul>
</li>
<li><a href="#_layout">4. Layout</a>
<ul class="sectlevel2">
<li><a href="#_vbox_and_hbox">4.1. VBox and HBox</a></li>
<li><a href="#_stackpane">4.2. StackPane</a></li>
<li><a href="#_absolute_positioning_with_pane">4.3. Absolute Positioning with Pane</a></li>
<li><a href="#_clipping">4.4. Clipping</a></li>
<li><a href="#_gridpane">4.5. GridPane</a></li>
<li><a href="#_gridpane_spanning">4.6. GridPane Spanning</a></li>
<li><a href="#_gridpane_columnconstraints_and_rowconstraints">4.7. GridPane ColumnConstraints and RowConstraints</a></li>
<li><a href="#_anchorpane">4.8. AnchorPane</a></li>
<li><a href="#_tilepane">4.9. TilePane</a></li>
<li><a href="#_titledpane">4.10. TitledPane</a></li>
</ul>
</li>
<li><a href="#_css">5. CSS</a></li>
<li><a href="#_performance">6. Performance</a></li>
<li><a href="#_application_structure">7. Application Structure</a>
<ul class="sectlevel2">
<li><a href="#_the_mvvm_pattern">7.1. The MVVM Pattern</a></li>
<li><a href="#_model_change_with_mvvm">7.2. Model Change with MVVM</a></li>
<li><a href="#_the_dialog_class">7.3. The Dialog Class</a></li>
</ul>
</li>
<li><a href="#_best_practices">8. Best Practices</a>
<ul class="sectlevel2">
<li><a href="#_styleable_properties">8.1. Styleable Properties</a></li>
<li><a href="#_tasks">8.2. Tasks</a></li>
<li><a href="#_avoid_nulls_in_comboboxes">8.3. Avoid Nulls in ComboBoxes</a></li>
<li><a href="#_writing_javadoc_for_javafx_properties">8.4. Writing Javadoc for JavaFX Properties</a></li>
<li><a href="#_ignoring_warnings_for_null_select_binding_expressions">8.5. Ignoring Warnings for Null Select Binding Expressions</a></li>
<li><a href="#_pojo_binding">8.6. POJO Binding</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JavaFX Documentation Project aims to pull together useful information for JavaFX developers from all over the web. The project is <a href="http://www.github.com/FXDocs/docs">open source</a> and encourages community participation to ensure that the documentation is as highly polished and useful as possible.</p>
</div>
<div class="sect2">
<h3 id="_contributors">1.1. Contributors</h3>
<div class="paragraph">
<p>This project was initiated by <a href="http://jonathangiles.net">Jonathan Giles</a>, but anyone can contribute. Any questions, concerns, or feedback should be in the first instance be directed to <a href="mailto:jonathan@jonathangiles.net">Jonathan via email</a>.</p>
</div>
<div class="paragraph">
<p>This project would not be possible without the contributors who work hard on the content contained within this documentation. The authors of this document are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Abhinay Agarwal</p>
</li>
<li>
<p><a href="https://almasb.github.io/">Almas Baimagambetov</a></p>
</li>
<li>
<p><a href="http://bekwam.blogspot.com/">Carl Walker</a></p>
</li>
<li>
<p><a href="http://kynosarges.org/">Christoph Nahr</a></p>
</li>
<li>
<p><a href="http://jonathangiles.net">Jonathan Giles</a></p>
</li>
<li>
<p><a href="https://harmoniccode.blogspot.com/">Gerrit Grunwald</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributing">1.2. Contributing</h3>
<div class="paragraph">
<p>Contributing to this project is easy - fork the <a href="http://www.github.com/FXDocs/docs">GitHub</a> repo, edit the relevant files, and create a pull request! Once merged, your content will form a part of the documentation and you&#8217;ll have the unending appreciation of the entire community!</p>
</div>
<div class="paragraph">
<p>The JavaFX Documentation Project uses AsciiDoc as the syntax of choice for writing the documentation. The <a href="http://asciidoctor.org/docs/asciidoc-syntax-quick-reference/">AsciiDoc Syntax Quick Reference</a> guide is a great resource for those learning how to write AsciiDoc.</p>
</div>
<div class="paragraph">
<p>Authors are encouraged to add their name to the contributors list in the previous section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_license">1.3. License</h3>
<div class="imageblock">
<div class="content">
<img src="images/license/cc-by-nc-nd.png" alt="cc by nc nd">
</div>
</div>
<div class="paragraph">
<p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scene_graph">2. Scene Graph</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">2.1. Overview</h3>
<div class="paragraph">
<p>A scene graph is a tree data structure that arranges (and groups) graphical objects for easier logical representation.
It also allows the graphics engine to render the objects in the most efficient way by
fully or partially skipping objects which will not be seen in the final image.
The following figure shows an example of the JavaFX scene graph architecture.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/scene_graph.jpg" alt="scene graph">
</div>
<div class="title">Figure 1. JavaFX Scene Graph</div>
</div>
<div class="paragraph">
<p>At the very top of the architecture there is a <code>Stage</code>.
A stage is a JavaFX representation of a native OS window.
At any given time a stage can have a single <code>Scene</code> attached to it.
A scene is a container for the JavaFX scene graph.</p>
</div>
<div class="paragraph">
<p>All elements in the JavaFX scene graph are represented as <code>Node</code> objects.
There are three types of nodes: root, branch and leaf.
The root node is the only node that does not have a parent
and is directly contained by a scene, which can be seen in the figure above.
The difference between a branch and a leaf is that a leaf node does not have children.</p>
</div>
<div class="paragraph">
<p>In the scene graph, many properties of a parent node are shared by children nodes.
For instance, a transformation or an event applied to a parent node will also be applied recursively to its children.
As such, a complex hierarchy of nodes can be viewed as a single node to simplify the programming model.
We will explore transformations and events in later sections.</p>
</div>
<div class="paragraph">
<p>An example of a "Hello World" scene graph can be seen in the figure below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/specific_scene_graph.jpg" alt="specific scene graph">
</div>
<div class="title">Figure 2. Hello World Scene Graph</div>
</div>
<div class="paragraph">
<p>One possible implementation that will produce a scene graph matching the figure above
is as follows.</p>
</div>
<div class="listingblock">
<div class="title">HelloApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class HelloApp extends Application {

    private Parent createContent() {
        return new StackPane(new Text("Hello World"));
    }

    @Override
    public void start(Stage stage) throws Exception {
        stage.setScene(new Scene(createContent(), 300, 300));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result of running the code is seen in the next figure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/hello_world.jpg" alt="hello world">
</div>
<div class="title">Figure 3. Hello World</div>
</div>
<div class="paragraph">
<p>Important notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A node can have the maximum of 1 parent.</p>
</li>
<li>
<p>A node in the "active" (attached to a currently visible scene) scene graph can only be modified from the JavaFX Application Thread.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_transformations">2.2. Transformations</h3>
<div class="paragraph">
<p>We will use the following app as an example to demonstrate the 3 most common transformations.</p>
</div>
<div class="listingblock">
<div class="title">TransformApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class TransformApp extends Application {

    private Parent createContent() {
        Rectangle box = new Rectangle(100, 50, Color.BLUE);

        transform(box);

        return new Pane(box);
    }

    private void transform(Rectangle box) {
        // we will apply transformations here
    }

    @Override
    public void start(Stage stage) throws Exception {
        stage.setScene(new Scene(createContent(), 300, 300, Color.GRAY));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the application will result in the following image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/transform_base.jpg" alt="transform base">
</div>
<div class="title">Figure 4. Blue Box</div>
</div>
<div class="paragraph">
<p>In JavaFX, a simple transformation can happen in one of the 3 axes: X, Y or Z.
The example application is in 2D, so we will only consider X and Y axes.</p>
</div>
<div class="sect3">
<h4 id="_translate">2.2.1. Translate</h4>
<div class="paragraph">
<p>In JavaFX and computer graphics, <code>translate</code> means move.
We can translate our box by 100 pixels in X axis and 200 pixels in Y axis.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void transform(Rectangle box) {
    box.setTranslateX(100);
    box.setTranslateY(200);
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/transform_translate.jpg" alt="transform translate">
</div>
<div class="title">Figure 5. Translate</div>
</div>
</div>
<div class="sect3">
<h4 id="_scale">2.2.2. Scale</h4>
<div class="paragraph">
<p>You can apply scaling to make a node larger or smaller.
Scaling value is a ratio.
By default, a node has a scaling value of 1 (100%) in each axis.
We can enlarge our box by applying scaling of 1.5 in X and Y axes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void transform(Rectangle box) {
    // previous code

    box.setScaleX(1.5);
    box.setScaleY(1.5);
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/transform_scale.jpg" alt="transform scale">
</div>
<div class="title">Figure 6. Scale</div>
</div>
</div>
<div class="sect3">
<h4 id="_rotate">2.2.3. Rotate</h4>
<div class="paragraph">
<p>A node&#8217;s rotation determines the angle at which the node is rendered.
In 2D the only sensible rotation axis is the Z axis.
Let&#8217;s rotate the box by 30 degrees.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void transform(Rectangle box) {
    // previous code

    box.setRotate(30);
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/transform_rotate.jpg" alt="transform rotate">
</div>
<div class="title">Figure 7. Rotate</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_handling">2.3. Event Handling</h3>
<div class="paragraph">
<p>An event notifies that something important has taken place.
Events are typically the "primitive" of an event system (aka event bus).
Generally, an event system has the following 3 responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fire</code> (trigger) an event,</p>
</li>
<li>
<p>notify <code>listeners</code> (interested parties) about the event and</p>
</li>
<li>
<p><code>handle</code> (process) the event.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The event notification mechanism is done by the JavaFX platform automatically.
Hence, we will only consider how to fire events, listen for events and how to handle them.</p>
</div>
<div class="paragraph">
<p>First, let&#8217;s create a custom event.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class UserEvent extends Event {

    public static final EventType&lt;UserEvent&gt; ANY = new EventType&lt;&gt;(Event.ANY, "ANY");

    public static final EventType&lt;UserEvent&gt; LOGIN_SUCCEEDED = new EventType&lt;&gt;(ANY, "LOGIN_SUCCEEDED");

    public static final EventType&lt;UserEvent&gt; LOGIN_FAILED = new EventType&lt;&gt;(ANY, "LOGIN_FAILED");

    public UserEvent(EventType&lt;? extends Event&gt; eventType) {
        super(eventType);
    }

    // any other fields of importance, e.g. data, timestamp
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since event types are fixed, they are usually created within the same source file as the event.
We can see that there are 2 specific types of events: <code>LOGIN_SUCCEEDED</code> and <code>LOGIN_FAILED</code>.
We can listen for such specific types of events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Node node = ...
node.addEventHandler(UserEvent.LOGIN_SUCCEEDED, event -&gt; {
    // handle event
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, we can handle any <code>UserEvent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Node node = ...
node.addEventHandler(UserEvent.ANY, event -&gt; {
    // handle event
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, we are able to contruct and fire our own events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">UserEvent event = new UserEvent(UserEvent.LOGIN_SUCCEEDED);
Node node = ...
node.fireEvent(event);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, <code>LOGIN_SUCCEEDED</code> or <code>LOGIN_FAILED</code> could be fired when a user attempts to log in to an app.
Depending on the login result we can allow the user access the app or lock him out of the app.
Whilst the same functionality can be achieved with a simple <code>if</code> statement,
there is one significant advantage of an event system.
Event systems were designed to enable communication between various modules (sub-systems) in
an application without tightly coupling them.
As such, a sound might be played by an audio system when the user logs in.
Thus, maintaining all audio related code in its own module.
However, we will not delve deeper into architectural styles.</p>
</div>
<div class="sect3">
<h4 id="_input_events">2.3.1. Input Events</h4>
<div class="paragraph">
<p>Key and mouse events are the most common types of events used in JavaFX.
Each <code>Node</code> provides so-called "convenience methods" for handling these events.
For instance, we can run some code when a button is pressed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Button button = ...
button.setOnAction(event -&gt; {
    // button was pressed
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more flexibility we can also use the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Button button = ...
button.setOnMouseEntered(e -&gt; ...);
button.setOnMouseExited(e -&gt; ...);
button.setOnMousePressed(e -&gt; ...);
button.setOnMouseReleased(e -&gt; ...);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The object <code>e</code> above is of type <code>MouseEvent</code> and can be queried to obtain various information about the event,
e.g. <code>x</code> and <code>y</code> positions, number of clicks, etc.
Finally, we can do the same with keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Button button = ...
button.setOnKeyPressed(e -&gt; ...);
button.setOnKeyReleased(e -&gt; ...);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The object <code>e</code> here is of type <code>KeyEvent</code> and it carries information about the key code, which can then be mapped
to a real physical key on the keyboard.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timing">2.4. Timing</h3>
<div class="paragraph">
<p>It is important to understand the timing difference between the creation of JavaFX UI controls and the display of the controls.  When creating the UI controls&#8201;&#8212;&#8201;either through direct API object creation or through FXML&#8201;&#8212;&#8201;you may be missing certain screen geometry values such as the dimensions of a window.  That is available later, at the instant when the screen is shown to the user.  That showing event, called OnShown, is the time at which a window has been allocated and the final layout computations completed.</p>
</div>
<div class="paragraph">
<p>To demonstrate this, consider the following program which displays the screen dimensions while the UI controls are being created and the screen dimensions when the screen is shown.  The following screenshot shows the running of the program.  When the UI controls are being created (new VBox(), new Scene(), primaryStage.setScene()), there are no actual window height and width values available as evidenced by the undefined "NaN" values.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scenegraph/scenegraph_startvshown.png" alt="scenegraph startvshown">
</div>
<div class="title">Figure 8. Screen Geometry Not Available Before OnShown</div>
</div>
<div class="paragraph">
<p>However, the values for width and height are available once the window is shown.  The program registers an event handler for the OnShown event and prepares the same output.</p>
</div>
<div class="paragraph">
<p>The following is the Java class of the demonstration program.</p>
</div>
<div class="listingblock">
<div class="title">StartVsShownJavaFXApp</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class StartVsShownJavaFXApp extends Application {

    private DoubleProperty startX = new SimpleDoubleProperty();
    private DoubleProperty startY = new SimpleDoubleProperty();
    private DoubleProperty shownX = new SimpleDoubleProperty();
    private DoubleProperty shownY = new SimpleDoubleProperty();

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label startLabel = new Label("Start Dimensions");
        TextField startTF = new TextField();
        startTF.textProperty().bind(
                Bindings.format("(%.1f, %.1f)", startX, startY)
        );

        Label shownLabel = new Label("Shown Dimensions");
        TextField shownTF = new TextField();
        shownTF.textProperty().bind(
                Bindings.format("(%.1f, %.1f)", shownX, shownY)
        );

        GridPane gp = new GridPane();
        gp.add( startLabel, 0, 0 );
        gp.add( startTF, 1, 0 );
        gp.add( shownLabel, 0, 1 );
        gp.add( shownTF, 1, 1 );
        gp.setHgap(10);
        gp.setVgap(10);

        HBox hbox = new HBox(gp);
        hbox.setAlignment(CENTER);

        VBox vbox = new VBox(hbox);
        vbox.setAlignment(CENTER);

        Scene scene = new Scene( vbox, 480, 320 );

        primaryStage.setScene( scene );

        // before show()...I just set this to 480x320, right?
        startX.set( primaryStage.getWidth() );
        startY.set( primaryStage.getHeight() );

        primaryStage.setOnShown( (evt) -&gt; {
            shownX.set( primaryStage.getWidth() );
            shownY.set( primaryStage.getHeight() );  // all available now
        });

        primaryStage.setTitle("Start Vs. Shown");
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes, you&#8217;ll know the screen dimensions in advance and can use those values at any point in the JavaFX program.  This includes before the OnShown event.  However, if your initialization sequence contains logic that needs these values, you&#8217;ll need to work with the OnShown event.  A use case might be working with the last saved dimensions or dimensions based on program input.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ui_controls">3. UI Controls</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_choicebox">3.1. ChoiceBox</h3>
<div class="paragraph">
<p>This article demonstrates the <code>ChoiceBox</code>.  The <code>ChoiceBox</code> control is a list of values from which the user makes a selection.  In this particular implementation, there is an empty value which makes the selection optional.</p>
</div>
<div class="paragraph">
<p>The following screenshot shows <code>ChoiceBox</code> app.  A selection "Furniture" is made and the Save <code>Button</code> is pressed.  The Save <code>Button</code> call invokes a println() which prints out the object.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/choicebox.png" alt="choicebox">
</div>
<div class="title">Figure 9. ChoiceBox Printing Out Selection</div>
</div>
<div class="paragraph">
<p>The program puts a <code>Label</code>, a <code>ChoiceBox</code>, and a <code>Button</code> into an HBox.  An action is set on the Save <code>Button</code> which prints out the value.</p>
</div>
<div class="paragraph">
<p>The simplest usage of the <code>ChoiceBox</code> is to fill it with Strings.  This <code>ChoiceBox</code> in this article is built on a JavaFX class called <code>Pair</code>.  <code>Pair</code> is a general container for any key/value pair and can be used in place of a domain or other special-purpose object.  Strings should only be used if they can be used without manipulation or decoded consistently.</p>
</div>
<div class="listingblock">
<div class="title">ChoicesApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ChoicesApp extends Application {

    private final ChoiceBox&lt;Pair&lt;String,String&gt;&gt; assetClass = new ChoiceBox&lt;&gt;();

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label label = new Label("Asset Class:");
        assetClass.setPrefWidth(200);
        Button saveButton = new Button("Save");

        HBox hbox = new HBox(
                label,
                assetClass,
                saveButton);
        hbox.setSpacing( 10.0d );
        hbox.setAlignment(Pos.CENTER );
        hbox.setPadding( new Insets(40) );

        Scene scene = new Scene(hbox);

        initChoice();

        saveButton.setOnAction(
                (evt) -&gt; System.out.println("saving " + assetClass.getValue())
        );

        primaryStage.setTitle("ChoicesApp");
        primaryStage.setScene( scene );
        primaryStage.show();

    }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_stringconverter">3.1.1. StringConverter</h4>
<div class="paragraph">
<p>When using a complex object to back a <code>ChoiceBox</code>, a <code>StringConverter</code> is needed.  This object serializes a String to and from the <code>ChoiceBox</code>.  For this program, only the toString() needs to be coded which replaces the default toString() of the <code>Pair</code> object.  (Both toString and fromString will need an implementation in order to compile.)</p>
</div>
<div class="paragraph">
<p>An empty object EMPTY_PAIR is used to prevent NullPointerExceptions.  The returned value from assetClass().getValue() can be accessed and compared consistently without adding special null handling logic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private final static Pair&lt;String, String&gt; EMPTY_PAIR = new Pair&lt;&gt;("", "");

    private void initChoice() {

        List&lt;Pair&lt;String,String&gt;&gt; assetClasses = new ArrayList&lt;&gt;();
        assetClasses.add( new Pair("Equipment", "20000"));
        assetClasses.add( new Pair("Furniture", "21000"));
        assetClasses.add( new Pair("Investment", "22000"));

        assetClass.setConverter( new StringConverter&lt;Pair&lt;String,String&gt;&gt;() {
            @Override
            public String toString(Pair&lt;String, String&gt; pair) {
                return pair.getKey();
            }

            @Override
            public Pair&lt;String, String&gt; fromString(String string) {
                return null;
            }
        });

        assetClass.getItems().add( EMPTY_PAIR );
        assetClass.getItems().addAll( assetClasses );
        assetClass.setValue( EMPTY_PAIR );

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ChoiceBox is used to select from a list of values.  When the list of values is a complex type, provide a StringFormatter to serialize a list object into something presentable.  If possible, use an empty object (rather than a null) to support optional values.</p>
</div>
<div class="sect4">
<h5 id="_complete_code">Complete Code</h5>
<div class="paragraph">
<p>The code can be tested in a single .java file.</p>
</div>
<div class="listingblock">
<div class="title">ChoicesApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ChoicesApp extends Application {

    private final ChoiceBox&lt;Pair&lt;String,String&gt;&gt; assetClass = new ChoiceBox&lt;&gt;();

    private final static Pair&lt;String, String&gt; EMPTY_PAIR = new Pair&lt;&gt;("", "");

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label label = new Label("Asset Class:");
        assetClass.setPrefWidth(200);
        Button saveButton = new Button("Save");

        HBox hbox = new HBox(
                label,
                assetClass,
                saveButton);
        hbox.setSpacing( 10.0d );
        hbox.setAlignment(Pos.CENTER );
        hbox.setPadding( new Insets(40) );

        Scene scene = new Scene(hbox);

        initChoice();

        saveButton.setOnAction(
                (evt) -&gt; System.out.println("saving " + assetClass.getValue())
        );

        primaryStage.setTitle("ChoicesApp");
        primaryStage.setScene( scene );
        primaryStage.show();

    }

    private void initChoice() {

        List&lt;Pair&lt;String,String&gt;&gt; assetClasses = new ArrayList&lt;&gt;();
        assetClasses.add( new Pair("Equipment", "20000"));
        assetClasses.add( new Pair("Furniture", "21000"));
        assetClasses.add( new Pair("Investment", "22000"));

        assetClass.setConverter( new StringConverter&lt;Pair&lt;String,String&gt;&gt;() {
            @Override
            public String toString(Pair&lt;String, String&gt; pair) {
                return pair.getKey();
            }

            @Override
            public Pair&lt;String, String&gt; fromString(String string) {
                return null;
            }
        });

        assetClass.getItems().add( EMPTY_PAIR );
        assetClass.getItems().addAll( assetClasses );
        assetClass.setValue( EMPTY_PAIR );

    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_combobox">3.2. ComboBox</h3>
<div class="paragraph">
<p>A <code>ComboBox</code> is a hybrid control that presents a list of values plus an edit control.  This article demonstrates a basic form of the <code>ComboBox</code> which is an un-editable list of items built on a complex data structure.</p>
</div>
<div class="paragraph">
<p>This screenshot shows a ComboBoxApp containing a list of expense accounts.  The accounts are stored in a key/value JavaFX class <code>Pair</code>.  The console shows the result of a save operation after the user selects "Auto Expense".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/combobox.png" alt="combobox">
</div>
<div class="title">Figure 10. ComboBox Application</div>
</div>
<div class="paragraph">
<p>This code adds a Label, a ComboBox, and a Button to an HBox.  The ComboBox is instantiated as a field and initialized in a method presented later initCombo().  A handler is put on the Save Button which outputs a value if an item is selected or a special message if no item is selected.</p>
</div>
<div class="listingblock">
<div class="title">CombosApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class CombosApp extends Application {

    private final ComboBox&lt;Pair&lt;String, String&gt;&gt; account = new ComboBox&lt;&gt;();

    private final static Pair&lt;String, String&gt; EMPTY_PAIR = new Pair&lt;&gt;("", "");

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label accountsLabel = new Label("Account:");
        account.setPrefWidth(200);
        Button saveButton = new Button("Save");

        HBox hbox = new HBox(
                accountsLabel,
                account,
                saveButton);
        hbox.setSpacing( 10.0d );
        hbox.setAlignment(Pos.CENTER );
        hbox.setPadding( new Insets(40) );

        Scene scene = new Scene(hbox);

        initCombo();

        saveButton.setOnAction( (evt) -&gt; {
            if( account.getValue().equals(EMPTY_PAIR) ) {
                System.out.println("no save needed; no item selected");
            } else {
                System.out.println("saving " + account.getValue());
            }
        });

        primaryStage.setTitle("CombosApp");
        primaryStage.setScene( scene );
        primaryStage.show();
    }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_cellfactory">3.2.1. CellFactory</h4>
<div class="paragraph">
<p>The initCombo() method adds several expense accounts to a <code>List</code>.   This <code>List</code> is added to the <code>ComboBox</code> items after an empty <code>Pair</code> object is added.  The initial value is set to the EMPTY_PAIR which is a constant.</p>
</div>
<div class="paragraph">
<p>If not specified, the <code>ComboBox</code> will use the toString() method of the object (in this article, a <code>Pair</code>) to render a backing object.  For Strings, such as a "Yes" or "No" selection, no extra code is needed.  However, the toString() of a <code>Pair</code> will output both the human-readable key and the machine-preferred value.  The requirements for this <code>ComboBox</code> are to use only the human-readable keys in the display.</p>
</div>
<div class="paragraph">
<p>To do this, a cellFactory is provided which will configure a <code>ListCell</code> object with the <code>Pair</code> key as the contents.  The <code>Callback</code> type is verbose, but the gist of the factory is set the text of a <code>ListCell</code> in the updateItem() method of an anonymous inner class.  Notice that the super class method must be called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void initCombo() {

        List&lt;Pair&lt;String,String&gt;&gt; accounts = new ArrayList&lt;&gt;();

        accounts.add( new Pair&lt;&gt;("Auto Expense", "60000") );
        accounts.add( new Pair&lt;&gt;("Interest Expense", "61000") );
        accounts.add( new Pair&lt;&gt;("Office Expense", "62000") );
        accounts.add( new Pair&lt;&gt;("Salaries Expense", "63000") );

        account.getItems().add( EMPTY_PAIR );
        account.getItems().addAll( accounts );
        account.setValue( EMPTY_PAIR );

        Callback&lt;ListView&lt;Pair&lt;String,String&gt;&gt;, ListCell&lt;Pair&lt;String,String&gt;&gt;&gt; factory =
            (lv) -&gt;
                    new ListCell&lt;Pair&lt;String,String&gt;&gt;() {
                        @Override
                        protected void updateItem(Pair&lt;String, String&gt; item, boolean empty) {
                            super.updateItem(item, empty);
                            if( empty ) {
                                setText("");
                            } else {
                                setText( item.getKey() );
                            }
                        }
                    };

        account.setCellFactory( factory );
        account.setButtonCell( factory.call( null ) );
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Callback</code> is used in the setButtonCell() method to provide a cell for the editing control.  Note that this program is not editable which is the default.  However, the factory.call(null) is needed otherwise only the contents of the popup menu will be properly formatted and the view of the control at rest will fallback on a toString().</p>
</div>
<div class="paragraph">
<p>This article presented a simple usage of <code>ComboBox</code>.  Since this control was not editable, <code>ChoiceBox</code> can be substituted.  For un-editable graphical renderings (ex a color coded shape for a status value), <code>ComboBox</code> still would be needed to define the specific <code>Node</code> used in the control.</p>
</div>
<div class="sect4">
<h5 id="_complete_code_2">Complete Code</h5>
<div class="paragraph">
<p>The code can be tested in a single .java file.</p>
</div>
<div class="listingblock">
<div class="title">CombosApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class CombosApp extends Application {

    private final ComboBox&lt;Pair&lt;String, String&gt;&gt; account = new ComboBox&lt;&gt;();

    private final static Pair&lt;String, String&gt; EMPTY_PAIR = new Pair&lt;&gt;("", "");

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label accountsLabel = new Label("Account:");
        account.setPrefWidth(200);
        Button saveButton = new Button("Save");

        HBox hbox = new HBox(
                accountsLabel,
                account,
                saveButton);
        hbox.setSpacing( 10.0d );
        hbox.setAlignment(Pos.CENTER );
        hbox.setPadding( new Insets(40) );

        Scene scene = new Scene(hbox);

        initCombo();

        saveButton.setOnAction( (evt) -&gt; {
            if( account.getValue().equals(EMPTY_PAIR ) ) {
                System.out.println("no save needed; no item selected");
            } else {
                System.out.println("saving " + account.getValue());
            }
        });

        primaryStage.setTitle("CombosApp");
        primaryStage.setScene( scene );
        primaryStage.show();
    }

    private void initCombo() {

        List&lt;Pair&lt;String,String&gt;&gt; accounts = new ArrayList&lt;&gt;();

        accounts.add( new Pair&lt;&gt;("Auto Expense", "60000") );
        accounts.add( new Pair&lt;&gt;("Interest Expense", "61000") );
        accounts.add( new Pair&lt;&gt;("Office Expense", "62000") );
        accounts.add( new Pair&lt;&gt;("Salaries Expense", "63000") );

        account.getItems().add( EMPTY_PAIR );
        account.getItems().addAll( accounts );
        account.setValue( EMPTY_PAIR );

        Callback&lt;ListView&lt;Pair&lt;String,String&gt;&gt;, ListCell&lt;Pair&lt;String,String&gt;&gt;&gt; factory =
            (lv) -&gt;
                    new ListCell&lt;Pair&lt;String,String&gt;&gt;() {
                        @Override
                        protected void updateItem(Pair&lt;String, String&gt; item, boolean empty) {
                            super.updateItem(item, empty);
                            if( empty ) {
                                setText("");
                            } else {
                                setText( item.getKey() );
                            }
                        }
                    };

        account.setCellFactory( factory );
        account.setButtonCell( factory.call( null ) );
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_listview">3.3. ListView</h3>
<div class="sect3">
<h4 id="_listview_filtering_in_javafx">3.3.1. ListView Filtering in JavaFX</h4>
<div class="paragraph">
<p>This article demonstrates how to filter a ListView in a JavaFX Application.  Two lists are managed by the Application.  One list contains all of the items in the data model.  The second list contains the items currently being viewed.  A scrap of comparison logic stored as a filter mediates between the two.</p>
</div>
<div class="paragraph">
<p>Binding is used heavily to keep the data structures in sync with what the user has selected.</p>
</div>
<div class="paragraph">
<p>This screenshot shows the Application which contains a top row of ToggleButtons which set the filter and a ListView containing the objects.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/listview_filtering_screenshot.png" alt="listview filtering screenshot">
</div>
<div class="title">Figure 11. Screenshot of ListView Filtering App</div>
</div>
<div class="paragraph">
<p>The complete code&#8201;&#8212;&#8201;a single .java file&#8201;&#8212;&#8201;is listed at the end of the article.</p>
</div>
<div class="sect4">
<h5 id="_data_structures">Data Structures</h5>
<div class="paragraph">
<p>The program begins with a domain model Player and an array of Player objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">static class Player {

	private final String team;
	private final String playerName;
	public Player(String team, String playerName) {
		this.team = team;
		this.playerName = playerName;
	}
	public String getTeam() {
		return team;
	}
	public String getPlayerName() {
		return playerName;
	}
	@Override
	public String toString() { return playerName + " (" + team + ")"; }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Player class contains a pair of fields, team and playerName.  A toString() is provided so that when the object is added to the ListView (presented later), a custom ListCell class is not needed.</p>
</div>
<div class="paragraph">
<p>The test data for this example is a list of American baseball players.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Player[] players = {new Player("BOS", "David Ortiz"),
                    new Player("BOS", "Jackie Bradley Jr."),
                    new Player("BOS", "Xander Bogarts"),
                    new Player("BOS", "Mookie Betts"),
                    new Player("HOU", "Jose Altuve"),
                    new Player("HOU", "Will Harris"),
                    new Player("WSH", "Max Scherzer"),
                    new Player("WSH", "Bryce Harper"),
                    new Player("WSH", "Daniel Murphy"),
                    new Player("WSH", "Wilson Ramos") };</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_model">Model</h5>
<div class="paragraph">
<p>As mentioned at the start of the article, the ListView filtering is centered around the management of two lists.  All the objects are stored in a wrapped ObservableList playersProperty and the objects that are currently viewable are stored in a wrapped FilteredList, viewablePlayersProperty.  viewablePlayersProperty is built off of playersProperty so updates made to players that meet the FilteredList criteria will also be made to viewablePlayers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">ReadOnlyObjectProperty&lt;ObservableList&lt;Player&gt;&gt; playersProperty =
		new SimpleObjectProperty&lt;&gt;(FXCollections.observableArrayList());

ReadOnlyObjectProperty&lt;FilteredList&lt;Player&gt;&gt; viewablePlayersProperty =
		new SimpleObjectProperty&lt;FilteredList&lt;Player&gt;&gt;(
				new FilteredList&lt;&gt;(playersProperty.get()
						));</code></pre>
</div>
</div>
<div class="paragraph">
<p>filterProperty() is a convenience to allow callers to bind to the underlying Predicate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">ObjectProperty&lt;Predicate&lt;? super Player&gt;&gt; filterProperty =
	viewablePlayersProperty.get().predicateProperty();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The UI root is a VBox which contains an HBox of ToggleButtons and a ListView.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox vbox = new VBox();
vbox.setPadding( new Insets(10));
vbox.setSpacing(4);

HBox hbox = new HBox();
hbox.setSpacing( 2 );

ToggleGroup filterTG = new ToggleGroup();</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_filtering_action">Filtering Action</h5>
<div class="paragraph">
<p>A handler is attached the ToggleButtons which will modify filterProperty.  Each ToggleButton is supplied a Predicate in the userData field.  toggleHandler uses this supplied Predicate when setting the filter property.  This code sets the special case "Show All" ToggleButton.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@SuppressWarnings("unchecked")
EventHandler&lt;ActionEvent&gt; toggleHandler = (event) -&gt; {
		ToggleButton tb = (ToggleButton)event.getSource();
	    Predicate&lt;Player&gt; filter = (Predicate&lt;Player&gt;)tb.getUserData();
	    filterProperty.set( filter );
	};

ToggleButton tbShowAll = new ToggleButton("Show All");
tbShowAll.setSelected(true);
tbShowAll.setToggleGroup( filterTG );
tbShowAll.setOnAction(toggleHandler);
tbShowAll.setUserData( (Predicate&lt;Player&gt;) (Player p) -&gt; true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToggleButtons that filter a specific team are created at runtime based on the Players array.  This Stream does the following.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Distill the list of Players down to a distinct list of team Strings</p>
</li>
<li>
<p>Create a ToggleButton for each team String</p>
</li>
<li>
<p>Set a Predicate for each ToggleButton to be used as a filter</p>
</li>
<li>
<p>Collect the ToggleButtons for addition into the HBox container</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">List&lt;ToggleButton&gt; tbs = Arrays.asList( players)
		.stream()
		.map( (p) -&gt; p.getTeam() )
		.distinct()
		.map( (team) -&gt; {
			ToggleButton tb = new ToggleButton( team );
			tb.setToggleGroup( filterTG );
			tb.setOnAction( toggleHandler );
			tb.setUserData( (Predicate&lt;Player&gt;) (Player p) -&gt; team.equals(p.getTeam()) );
			return tb;
		})
		.collect(Collectors.toList());

hbox.getChildren().add( tbShowAll );
hbox.getChildren().addAll( tbs );</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_listview_2">ListView</h5>
<div class="paragraph">
<p>The next step creates the ListView and binds the ListView to the viewablePlayersProperty.  This enables the ListView to receive updates based on the changing filter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">ListView&lt;Player&gt; lv = new ListView&lt;&gt;();
lv.itemsProperty().bind( viewablePlayersProperty );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The remainder of the program creates a Scene and shows the Stage.  onShown loads the data set into the playersProperty and the viewablePlayersProperty lists.  Although both lists are in sync in this partcular version of the program, if the stock filter is every different than "no filter", this code would not need to be modified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">vbox.getChildren().addAll( hbox, lv );

Scene scene = new Scene(vbox);

primaryStage.setScene( scene );
		primaryStage.setOnShown((evt) -&gt; {
			playersProperty.get().addAll( players );
		});

primaryStage.show();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This article used binding to tie a list of viewable Player objects to a ListView.  The viewable Players were updated when a ToggleButton is selected.  The selection applied a filter to a full set of Players which was maintained separately as a FilteredList (thanks @kleopatra_jx).  Binding was used to keep the UI in sync and to allow for a separation of concerns in the design.</p>
</div>
</div>
<div class="sect4">
<h5 id="_further_reading">Further Reading</h5>
<div class="paragraph">
<p>To see how such a design would implement basic add and remove functionality, visit the following page <a href="https://courses.bekwam.net/public_tutorials/bkcourse_filterlistapp.php" class="bare">https://courses.bekwam.net/public_tutorials/bkcourse_filterlistapp.php</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_complete_code_3">Complete Code</h5>
<div class="paragraph">
<p>The code can be tested in a single .java file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class FilterListApp extends Application {

	@Override
	public void start(Stage primaryStage) throws Exception {

		//
		// Test data
		//
		Player[] players = {new Player("BOS", "David Ortiz"),
		                    new Player("BOS", "Jackie Bradley Jr."),
		                    new Player("BOS", "Xander Bogarts"),
		                    new Player("BOS", "Mookie Betts"),
		                    new Player("HOU", "Jose Altuve"),
		                    new Player("HOU", "Will Harris"),
		                    new Player("WSH", "Max Scherzer"),
		                    new Player("WSH", "Bryce Harper"),
		                    new Player("WSH", "Daniel Murphy"),
		                    new Player("WSH", "Wilson Ramos") };

		//
		// Set up the model which is two lists of Players and a filter criteria
		//
		ReadOnlyObjectProperty&lt;ObservableList&lt;Player&gt;&gt; playersProperty =
				new SimpleObjectProperty&lt;&gt;(FXCollections.observableArrayList());

		ReadOnlyObjectProperty&lt;FilteredList&lt;Player&gt;&gt; viewablePlayersProperty =
				new SimpleObjectProperty&lt;FilteredList&lt;Player&gt;&gt;(
						new FilteredList&lt;&gt;(playersProperty.get()
								));

		ObjectProperty&lt;Predicate&lt;? super Player&gt;&gt; filterProperty =
			viewablePlayersProperty.get().predicateProperty();


		//
		// Build the UI
		//
		VBox vbox = new VBox();
		vbox.setPadding( new Insets(10));
		vbox.setSpacing(4);

		HBox hbox = new HBox();
		hbox.setSpacing( 2 );

		ToggleGroup filterTG = new ToggleGroup();

		//
		// The toggleHandler action wills set the filter based on the TB selected
		//
		@SuppressWarnings("unchecked")
		EventHandler&lt;ActionEvent&gt; toggleHandler = (event) -&gt; {
				ToggleButton tb = (ToggleButton)event.getSource();
			    Predicate&lt;Player&gt; filter = (Predicate&lt;Player&gt;)tb.getUserData();
			    filterProperty.set( filter );
			};

		ToggleButton tbShowAll = new ToggleButton("Show All");
		tbShowAll.setSelected(true);
		tbShowAll.setToggleGroup( filterTG );
		tbShowAll.setOnAction(toggleHandler);
		tbShowAll.setUserData( (Predicate&lt;Player&gt;) (Player p) -&gt; true);

		//
		// Create a distinct list of teams from the Player objects, then create
		// ToggleButtons
		//
		List&lt;ToggleButton&gt; tbs = Arrays.asList( players)
				.stream()
				.map( (p) -&gt; p.getTeam() )
				.distinct()
				.map( (team) -&gt; {
					ToggleButton tb = new ToggleButton( team );
					tb.setToggleGroup( filterTG );
					tb.setOnAction( toggleHandler );
					tb.setUserData( (Predicate&lt;Player&gt;) (Player p) -&gt; team.equals(p.getTeam()) );
					return tb;
				})
				.collect(Collectors.toList());

		hbox.getChildren().add( tbShowAll );
		hbox.getChildren().addAll( tbs );

		//
		// Create a ListView bound to the viewablePlayers property
		//
		ListView&lt;Player&gt; lv = new ListView&lt;&gt;();
		lv.itemsProperty().bind( viewablePlayersProperty );

		vbox.getChildren().addAll( hbox, lv );

		Scene scene = new Scene(vbox);

		primaryStage.setScene( scene );
		primaryStage.setOnShown((evt) -&gt; {
			playersProperty.get().addAll( players );
		});

		primaryStage.show();

	}

	public static void main(String args[]) {
		launch(args);
	}

	static class Player {

		private final String team;
		private final String playerName;
		public Player(String team, String playerName) {
			this.team = team;
			this.playerName = playerName;
		}
		public String getTeam() {
			return team;
		}
		public String getPlayerName() {
			return playerName;
		}
		@Override
		public String toString() { return playerName + " (" + team + ")"; }
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tableview">3.4. TableView</h3>
<div class="paragraph">
<p>For JavaFX business applications, the <code>TableView</code> is an essential control.  Use a <code>TableView</code> when you need to present multiple records in a flat row/column structure.  This example shows the basic elements of a <code>TableView</code> and demonstrates the power of the component when JavaFX Binding is applied.</p>
</div>
<div class="paragraph">
<p>The demonstration app is a <code>TableView</code> and a pair of Buttons.  The <code>TableView</code> has four TableColumns: SKU, Item, Price, Tax.  The <code>TableView</code> shows three objects in three rows: Mechanical Keyboard, Product Docs, O-Rings.  The following screenshot shows the app immediately after startup.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/tableviewselectapp_screenshot.png" alt="tableviewselectapp screenshot">
</div>
<div class="title">Figure 12. Intial View of Demo App</div>
</div>
<div class="paragraph">
<p>The disabled logic of the Buttons is based on the selections in the <code>TableView</code>.  Initially, no items are selected so both Buttons are disabled.  If any item is selected&#8201;&#8212;&#8201;the first item in the following screenshot&#8201;&#8212;&#8201;the Inventory <code>Button</code> is enabled.  The Tax <code>Button</code> is also enabled although that requires consulting the Tax value.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/tableviewselectapp_screenshot_selected_tax.png" alt="tableviewselectapp screenshot selected tax">
</div>
<div class="title">Figure 13. With Taxable Item Selected</div>
</div>
<div class="paragraph">
<p>If the Tax value for the selected item is false, then the Tax <code>Button</code> will be disabled.  This screenshot shows the second item selected.  The Inventory <code>Button</code> is enabled but the Tax <code>Button</code> is not.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/tableviewselectapp_screenshot_selected_notax.png" alt="tableviewselectapp screenshot selected notax">
</div>
<div class="title">Figure 14. A Non-Taxable Item Disables the Tax Button</div>
</div>
<div class="sect3">
<h4 id="_model_and_declarations">3.4.1. Model and Declarations</h4>
<div class="paragraph">
<p>A <code>TableView</code> is based on a model which is a POJO called Item.</p>
</div>
<div class="listingblock">
<div class="title">Item.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Item {

    private final String sku;
    private final String descr;
    private final Float price;
    private final Boolean taxable;

    public Item(String sku, String descr, Float price, Boolean taxable) {
        this.sku = sku;
        this.descr = descr;
        this.price = price;
        this.taxable = taxable;
    }

    public String getSku() {
        return sku;
    }

    public String getDescr() {
        return descr;
    }

    public Float getPrice() {
        return price;
    }

    public Boolean getTaxable() {
        return taxable;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>TableView</code> and <code>TableColumn</code> use generics in their declarations.  For <code>TableView</code>, the type parameter is Item.  For the TableColumns, the type parameters are Item and the field type.  The constructor of <code>TableColumn</code> accepts a column name.  In this example, the column names diverge slightly from the actual field names.</p>
</div>
<div class="listingblock">
<div class="title">TableSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        TableView&lt;Item&gt; tblItems = new TableView&lt;&gt;();

        TableColumn&lt;Item, String&gt; colSKU = new TableColumn&lt;&gt;("SKU");
        TableColumn&lt;Item, String&gt; colDescr = new TableColumn&lt;&gt;("Item");
        TableColumn&lt;Item, Float&gt; colPrice = new TableColumn&lt;&gt;("Price");
        TableColumn&lt;Item, Boolean&gt; colTaxable = new TableColumn&lt;&gt;("Tax");

        tblItems.getColumns().addAll(
            colSKU, colDescr, colPrice, colTaxable
        );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding model items to the <code>TableView</code> is done by adding items to the underlying collection.</p>
</div>
<div class="listingblock">
<div class="title">TableSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        tblItems.getItems().addAll(
            new Item("KBD-0455892", "Mechanical Keyboard", 100.0f, true),
            new Item( "145256", "Product Docs", 0.0f, false ),
            new Item( "OR-198975", "O-Ring (100)", 10.0f, true)
        );</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the <code>TableView</code> has been configured and test data has been added.  However, if you were to view the program, you would see three empty rows.  That is because JavaFX is missing the linkage between the POJO and the TableColumns.  That linkage is added to the TableColumns using a cellValueFactory.</p>
</div>
<div class="listingblock">
<div class="title">TableSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        colSKU.setCellValueFactory( new PropertyValueFactory&lt;&gt;("sku") );
        colDescr.setCellValueFactory( new PropertyValueFactory&lt;&gt;("descr") );
        colPrice.setCellValueFactory( new PropertyValueFactory&lt;&gt;("price") );
        colTaxable.setCellValueFactory( new PropertyValueFactory&lt;&gt;("taxable") );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Viewing the program at this point will display the data in the appropriate columns.</p>
</div>
</div>
<div class="sect3">
<h4 id="_selection">3.4.2. Selection</h4>
<div class="paragraph">
<p>To retrieve the selected item or items in a <code>TableView</code>, use the separate selectionModel object.  Calling tblItems.getSelectionModel() returns an object that includes a property "selectedItem".  This can be retrieved and used in a method, say to bring up an edit details screen.  Alternatively, getSelectionModel() can return a JavaFX property "selectedItemProperty" for binding expressions.</p>
</div>
<div class="paragraph">
<p>In the demo app, two Buttons are bound to the selectionModel of the <code>TableView</code>.  Without binding, you might add listeners that examine the selection and make a call like setDisabled() on a Button.  Prior to the <code>TableView</code> selection, you would also need initialization logic to handle the case where there is no selection.  The binding syntax expresses this logic in a declarative statement that can handle both the listener and the initialization in a single line.</p>
</div>
<div class="listingblock">
<div class="title">TableSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        Button btnInventory = new Button("Inventory");
        Button btnCalcTax = new Button("Tax");

        btnInventory.disableProperty().bind(
            tblItems.getSelectionModel().selectedItemProperty().isNull() <b class="conum">(1)</b>
        );</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>See "Ignoring Warnings for Null Select Binding Expressions" under "Best Practices" to show how to turn off warning messages when using this construct</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The btnInventory disable property will be true if there is no item selected (isNull()).  When the screen is first displayed, no selection is made and the <code>Button</code> is disabled.  Once any selection is made, btnInventory is enabled (disable=false).</p>
</div>
<div class="paragraph">
<p>the btnCalcTax logic is slightly more complex.  btnCalcTax too is disabled when there is no selection.  However, btnCalcTax will also consider the contents of the selectedItem.  A composite binding or() is used to join these two conditions.  As before, there is an isNull() expression for no selection.  The Bindings.select() checks the value of Item.taxable.  A true taxable Item will enable btnCalcTax while a false item will disable the <code>Button</code>.</p>
</div>
<div class="listingblock">
<div class="title">TableSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        btnCalcTax.disableProperty().bind(
            tblItems.getSelectionModel().selectedItemProperty().isNull().or(
                    Bindings.select(
                        tblItems.getSelectionModel().selectedItemProperty(),
                        "taxable"
                    ).isEqualTo(false)
            )
        );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bindings.select() is the mechanism to extract a field from an object.  selectedItemProperty() is the changing selectedItem and "taxable" is the single-hop path to the taxable field.</p>
</div>
<div class="paragraph">
<p>This example showed how to set up a <code>TableView</code> based on a POJO.  It also featured a pair of powerful binding expressions that allow you to link related controls without writing extra listeners and initialization code.  The <code>TableView</code> is an indispensable control for the JavaFX business applications developer.  It will be the best and most familiar control for displaying a list of structured items.</p>
</div>
</div>
<div class="sect3">
<h4 id="_complete_code_4">3.4.3. Complete Code</h4>
<div class="paragraph">
<p>The complete code for the application follows.  It is a pair of class files TableSelectApp.java and Item.java.  Item.java was already presented in its entirety in an earlier section.</p>
</div>
<div class="listingblock">
<div class="title">TableSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class TableSelectApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        TableView&lt;Item&gt; tblItems = new TableView&lt;&gt;();
        tblItems.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);

        VBox.setVgrow(tblItems, Priority.ALWAYS );

        TableColumn&lt;Item, String&gt; colSKU = new TableColumn&lt;&gt;("SKU");
        TableColumn&lt;Item, String&gt; colDescr = new TableColumn&lt;&gt;("Item");
        TableColumn&lt;Item, Float&gt; colPrice = new TableColumn&lt;&gt;("Price");
        TableColumn&lt;Item, Boolean&gt; colTaxable = new TableColumn&lt;&gt;("Tax");

        colSKU.setCellValueFactory( new PropertyValueFactory&lt;&gt;("sku") );
        colDescr.setCellValueFactory( new PropertyValueFactory&lt;&gt;("descr") );
        colPrice.setCellValueFactory( new PropertyValueFactory&lt;&gt;("price") );
        colTaxable.setCellValueFactory( new PropertyValueFactory&lt;&gt;("taxable") );

        tblItems.getColumns().addAll(
            colSKU, colDescr, colPrice, colTaxable
        );

        tblItems.getItems().addAll(
            new Item("KBD-0455892", "Mechanical Keyboard", 100.0f, true),
            new Item( "145256", "Product Docs", 0.0f, false ),
            new Item( "OR-198975", "O-Ring (100)", 10.0f, true)
        );

        Button btnInventory = new Button("Inventory");
        Button btnCalcTax = new Button("Tax");

        btnInventory.disableProperty().bind(
            tblItems.getSelectionModel().selectedItemProperty().isNull()
        );

        btnCalcTax.disableProperty().bind(
            tblItems.getSelectionModel().selectedItemProperty().isNull().or(
                    Bindings.select(
                        tblItems.getSelectionModel().selectedItemProperty(),
                        "taxable"
                    ).isEqualTo(false)
            )
        );

        HBox buttonHBox = new HBox( btnInventory, btnCalcTax );
        buttonHBox.setSpacing( 8 );

        VBox vbox = new VBox( tblItems, buttonHBox );
        vbox.setPadding( new Insets(10) );
        vbox.setSpacing( 10 );

        Scene scene = new Scene(vbox);

        primaryStage.setTitle("TableSelectApp");
        primaryStage.setScene( scene );
        primaryStage.setHeight( 376 );
        primaryStage.setWidth( 667 );
        primaryStage.show();
    }

    public static void main(String[] args) {

        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_imageview">3.5. ImageView</h3>
<div class="paragraph">
<p>JavaFX provides the <code>Image</code> and <code>ImageView</code> classes to display BMP, GIF, JPEG, and PNG graphical images.  Image is a class that holds the bytes of the image and optionally scaling information.  The Image object is loaded by a background thread, and the Image class provides methods for interacting with the load operation.  The Image object is used independently of ImageView to create cursors and app icons.</p>
</div>
<div class="paragraph">
<p>ImageView is a JavaFX <code>Node</code> that holds and Image object.  ImageView makes an image available throughout the framework.  An ImageView can be added to a container by itself or alongside other UI controls.  For example an image can be added to a <code>Label</code> by setting the graphic property of the Label.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Images can also be displayed and manipulated using JavaFX CSS.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>This screenshot shows a <code>TilePane</code> containing four equally-sized tiles.  Each tile contains an ImageView of a keyboard.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/imageapp_screenshot.png" alt="imageapp screenshot">
</div>
<div class="title">Figure 15. Different Image and ImageView Settings</div>
</div>
<div class="paragraph">
<p>The top-left image is displayed using the original image size of 320x240.  The top-right image is scaled proportionally.  Since the top-right image is a rectangle and the containing tile is a square, there are gaps on the top and bottom to maintain the correct ratio when stretching the width.</p>
</div>
<div class="paragraph">
<p>The lower-left image fills the container completely. However, in making the rectangular image fit the square container, the image is not scaled proportionally and instead strethed in both directions.</p>
</div>
<div class="paragraph">
<p>The lower-right image fills the container using a zoomed-in version of the image.  A square Viewport is created from a 100x100 Rectangle2D and scaled up proportionally. While the low-quality image is blurry, it is not deformed.</p>
</div>
<div class="sect3">
<h4 id="_image">3.5.1. Image</h4>
<div class="paragraph">
<p>The Image class provides constructors to build an Image object from the image file dimensions or from a transformed object.  These three constructor calls create the Image objects used in the top-right, bottom-left, and bottom-left tiles, respectively.</p>
</div>
<div class="listingblock">
<div class="title">ImageApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ImageApp extends Application {

    private final static String IMAGE_LOC = "images/keyboard.jpg";

    @Override
    public void start(Stage primaryStage) throws Exception {

        Image image2 = new Image(IMAGE_LOC, 360.0d, 360.0d, true, true );
        Image image3 = new Image(IMAGE_LOC, 360.0d, 360.0d, false, true);
        Image image4 = new Image(IMAGE_LOC);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The String URL passed in to all forms of the Image constructor is relative to the classpath.  An absolute URL such as "https://www.bekwam.com/images/bekwam_logo_hdr_rounded.png" can also be used.  Note that the absolute URLs will not throw an error if their resource is not found.</p>
</div>
<div class="paragraph">
<p>image2 and image3 specify dimensions, forming a square larger than the rectangle of the original image.  image2 will preserve the aspect ratio ("true").  The constructor of image3 does not preserve the aspect ratio and will appear stretched.</p>
</div>
</div>
<div class="sect3">
<h4 id="_imageview_2">3.5.2. ImageView</h4>
<div class="paragraph">
<p>ImageView is a Node container that allows the Image object to be used in JavaFX containers and UI controls.  In the top-left image, a short form of ImageView is used which passes in only the image URL.  It will honor the original dimensions and does not require an additional Image object.</p>
</div>
<div class="listingblock">
<div class="title">ImageApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        ImageView iv1 = new ImageView(IMAGE_LOC);

        ImageView iv2 = new ImageView(image2);
        ImageView iv3 = new ImageView(image3);
        ImageView iv4 = new ImageView(image4);

        iv4.setPreserveRatio(true);
        iv4.setFitHeight(360);
        iv4.setFitWidth(360);
        Rectangle2D viewportRect = new Rectangle2D(20, 50, 100, 100);
        iv4.setViewport(viewportRect);</code></pre>
</div>
</div>
<div class="paragraph">
<p>iv3 and iv3 are based on the image2 and image3 objects.  Recall that these objects produced transformed images that fit the square container.</p>
</div>
<div class="paragraph">
<p>iv4 is also based on a transformed Image object, but in the case of iv4, the transformation is done through the ImageView object rather than the Image.  ImageView.setFitHeight is called rather than Image.setFitHeight.</p>
</div>
<div class="paragraph">
<p>Additionally, the Viewport of iv4 is adjusted.  The Viewport controls the visible part of the ImageView.  In this case, the Viewport is defined as a 100x100 section of the Image shifted left 50 pixels and up 100 pixels.</p>
</div>
<div class="paragraph">
<p>This section demonstrated the Image and ImageView classes which are used to display an image in a container or other UI control.  These classes define the scaling behavior of the image and can be used with a Rectangle2D Viewport to give additional image display customization.</p>
</div>
</div>
<div class="sect3">
<h4 id="_source">3.5.3. Source</h4>
<div class="paragraph">
<p>The complete source code and Gradle project can be found at the link below.</p>
</div>
<div class="paragraph">
<p><a href="https://courses.bekwam.net/public_tutorials/source/bkcourse_imageapp_sources.zip">ImageApp Source Zip</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_linechart">3.6. LineChart</h3>
<div class="paragraph">
<p>While you can plot a graph using a <code>Line</code> on a <code>Canvas</code>, JavaFX&#8217;s <code>LineChart</code> makes graphing easier.  In addition to customizing standard charting components like axis legends, LineChart encapsulates the source data of the graph.  As with all JavaFX controls, LineChart enables you to style the graph using CSS.</p>
</div>
<div class="paragraph">
<p>This screenshot shows a plot of seven points.  The X-Axis has units of Time Constants ranging from 0 to 5.  The Y-Axis shows Voltage ranging from 0 to 1 with more frequent gradients than the X-Axis.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/linechartapp_screenshot.png" alt="linechartapp screenshot">
</div>
<div class="title">Figure 16. LineChartApp Screenshot</div>
</div>
<div class="sect3">
<h4 id="_data">3.6.1. Data</h4>
<div class="paragraph">
<p>LineChart includes an API for managing data.  Data points are grouped into series.  This particular example uses a single series.</p>
</div>
<div class="listingblock">
<div class="title">LineChartApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class LineChartApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        XYChart.Series&lt;Double, Double&gt; series = new XYChart.Series&lt;&gt;();
        series.getData().add( new XYChart.Data&lt;&gt;(0.0,0.0));
        series.getData().add( new XYChart.Data&lt;&gt;(0.7,0.5));
        series.getData().add( new XYChart.Data&lt;&gt;(1.0,0.632));
        series.getData().add( new XYChart.Data&lt;&gt;(2.0,0.865));
        series.getData().add( new XYChart.Data&lt;&gt;(3.0,0.95));
        series.getData().add( new XYChart.Data&lt;&gt;( 4.0, 0.982 ));
        series.getData().add( new XYChart.Data&lt;&gt;( 5.0, 0.993 ));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each data point is an <code>XYChart.Data</code> object that is added to an <code>XYChart.Series</code> container.  To show a comparison of different series, create additional XYChart.Series objects.  These will be rendered as different colors by the LineChart.</p>
</div>
</div>
<div class="sect3">
<h4 id="_chart">3.6.2. Chart</h4>
<div class="paragraph">
<p>The LineChart object is created with Axis objects.  The first Axis parameter is for the X axis. Each Axis object includes an optional label: Time Constant, Voltage (Vs).  The next two numeric parameters give the lower and upper bounds.  The final parameter sets the step increment.  Another form of the LineChart constructor, not used in this example, accepts the data.  This example, makes an explicit add() call on the LineChart&#8217;s data field.</p>
</div>
<div class="listingblock">
<div class="title">LineChartApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        LineChart lc = new LineChart(
                new NumberAxis("Time Constant", 0.0, 5.0, 1),
                new NumberAxis("Voltage (Vs)", 0.0, 1.0, 0.1)
                );

        lc.getData().add( series );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LineChart can be customized with a title using setTitle() and an individual style with setStyle().  For consistency, it is best to use a style sheet so that a single style definition can be applied across a set of LineCharts.</p>
</div>
<div class="listingblock">
<div class="title">LineChartApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        lc.setTitle("RC Charging");
        lc.setStyle("-fx-background-color: lightgray");</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are many other properties that can be set to configure the LineChart.  setLegendVisible() removes a series identifier since there is only one series in this graph.  setCreateSymbols() removes a graphic on each data point that was being clipped at the origin and end of the graph.</p>
</div>
<div class="listingblock">
<div class="title">LineChartApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        lc.setCreateSymbols(false);
        lc.setLegendVisible(false);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For modest reporting requirements, JavaFX provides classes like LineChart to plot multiple series of data points into a graph.  The LineChart object is highly customizable, giving control over the legends, lines, and data point icons.  Additionally, CSS styling is available to make a set of these reports consistent.</p>
</div>
</div>
<div class="sect3">
<h4 id="_source_2">3.6.3. Source</h4>
<div class="paragraph">
<p>The complete source code and Gradle project can be found at the link below.</p>
</div>
<div class="paragraph">
<p><a href="https://courses.bekwam.net/public_tutorials/source/bkcourse_chartapp_sources.zip">ChartApp Source Zip</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pagination">3.7. Pagination</h3>
<div class="paragraph">
<p>Pagination is a UI control that lets you step through blocks of results using next, previous, and direct indexing buttons.  The Pagination class can break up long lists when scrolling is not desired.  This section presents a special case of single-item pages to form a slideshow.</p>
</div>
<div class="sect3">
<h4 id="_slideshow_app">3.7.1. SlideShow App</h4>
<div class="paragraph">
<p>This screenshot shows the app which is a slideshow of three images.  The Pagination control renders the custom Node&#8201;&#8212;&#8201;an ImageView&#8201;&#8212;&#8201;and buttons at the bottom of the screen.  For each of the three images, there is a direct access button 1, 2, and 3.  There is also a pair of arrows to move to the next and previous image.  A Label marks the image index and number of images to supplement the visual cues of the buttons themselves.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ui-controls/pagination_screenshot.png" alt="pagination screenshot">
</div>
<div class="title">Figure 17. Pagination on First of Three Pages</div>
</div>
<div class="paragraph">
<p>The program begins by defining a array of three JavaFX Images: imageURLs.  In the start() method, a Pagination object is created that references the size of the array.  A PageFactory is provided which creates a Node based on the pageIndex parameter.  For this example, the pageIndex is an index into the imageURLs array.</p>
</div>
<div class="paragraph">
<p>The program forms a Scene and adds it to the primaryStage.</p>
</div>
<div class="listingblock">
<div class="title">SlideShowApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class SlideShowApp extends Application {

    private Image[] imageURLs = {
            new Image("https://www.bekwam.net/images/bekwam_rc_charging.png"),
            new Image("https://www.bekwam.net/images/bekwam_rc_discharging.png"),
            new Image("https://www.bekwam.net/images/bekwam_rl_scope.png")
    };

    @Override
    public void start(Stage primaryStage) throws Exception {

        Pagination pagination = new Pagination(imageURLs.length, 0);
        pagination.setPageFactory(
            pageIndex -&gt; new ImageView(imageURLs[pageIndex])
        );

        VBox vbox = new VBox( pagination );

        Scene scene = new Scene(vbox);

        primaryStage.setScene( scene );
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Pagination class is a simple control to iterate through a long list of items.  This example used a single item per page to form a slideshow.  In both cases, this is an alternative to scrolling and is useful when you want the UI to be fixed in position.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_layout">4. Layout</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_vbox_and_hbox">4.1. VBox and HBox</h3>
<div class="paragraph">
<p>Layout in JavaFX begins with selecting the right container controls.  The two layout controls I use most often are <code>VBox</code> and <code>HBox</code>.  <code>VBox</code> is a container that arranges its children in a vertical stack.  <code>HBox</code> arranges its children in a horizontal row.  The power of these two controls comes from wrapping them and setting a few key properties: alignment, hgrow, and vgrow.</p>
</div>
<div class="paragraph">
<p>This article will demonstrate these controls through a sample project.   A mockup of the project shows a UI with the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A row of top controls containing a Refresh <code>Button</code> and a Sign Out <code>Hyperlink</code>,</p>
</li>
<li>
<p>A <code>TableView</code> that will grow to take up the extra vertical space, and</p>
</li>
<li>
<p>A Close <code>Button</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The UI also features a <code>Separator</code> which divides the top part of the screen with what may become a standard lower panel (Save <code>Button</code>, Cancel <code>Button</code>, etc) for the application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/vboxandhboxapp_mockup.png" alt="vboxandhboxapp mockup">
</div>
<div class="title">Figure 18. Mockup</div>
</div>
<div class="sect3">
<h4 id="_structure">4.1.1. Structure</h4>
<div class="paragraph">
<p>A <code>VBox</code> is the outermost container "vbox".  This will be the <code>Parent</code> provided to the Scene.  Simply putting UI controls in this <code>VBox</code> will allow the controls&#8201;&#8212;&#8201;most notably the <code>TableView</code>&#8201;&#8212;&#8201;to stretch to fit the available horizontal space.  The top controls, the Refresh <code>Button</code> and the Sign Out <code>Hyperlink</code>, are wrapped in an <code>HBox</code>.  Similarly, I wrap the bottom Close <code>Button</code> in an <code>HBox</code>, allowing for additional Buttons.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox vbox = new VBox();

Button btnRefresh = new Button("Refresh");

HBox topRightControls = new HBox();
topRightControls.getChildren().add( signOutLink );

topControls.getChildren().addAll( btnRefresh, topRightControls );

TableView&lt;Customer&gt; tblCustomers = new TableView&lt;&gt;();
Separator sep = new Separator();

HBox bottomControls = new HBox();

Button btnClose = new Button("Close");

bottomControls.getChildren().add( btnClose );

vbox.getChildren().addAll(
        topControls,
        tblCustomers,
        sep,
        bottomControls
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This picture shows the mockup broken down by container.  The parent <code>VBox</code> is the outermost blue rectangle.  The HBoxes are the inner rectangles (red and green).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/vboxandhboxapp_brokendown.png" alt="vboxandhboxapp brokendown">
</div>
<div class="title">Figure 19. Mockup Broken Down</div>
</div>
</div>
<div class="sect3">
<h4 id="_alignment_and_hgrow">4.1.2. Alignment and Hgrow</h4>
<div class="paragraph">
<p>The Refresh <code>Button</code> is aligned to the left while the Sign Out <code>Hyperlink</code> is aligned to the right.  This is accomplished using two HBoxes.  topControls is an <code>HBox</code> that contains the Refresh <code>Button</code> and also contains an <code>HBox</code> with the Sign Out <code>Hyperlink</code>.  As the screen grows wider, the Sign Out <code>Hyperlink</code> will be pulled to the right while the Refresh <code>Button</code> will retain its left alignment.</p>
</div>
<div class="paragraph">
<p>Alignment is the property that tells a container where to position a control.  topControls sets alignment to the BOTTOM_LEFT.  topRightControls sets alignment to the BOTTOM_RIGHT.  "BOTTOM" makes sure that the baseline of the text "Refresh" matches the baseline of the text "Sign Out".</p>
</div>
<div class="paragraph">
<p>In order to make the Sign Out <code>Hyperlink</code> move to the right when the screen gets wider, <code>Priority.ALWAYS</code> is needed.  This is a cue to the JavaFX to widen topRightControls.  Otherwise, topControls will keep the space and topRightControls will appear to the left.  Sign Out <code>Hyperlink</code> still would be right-aligned but in a narrower container.</p>
</div>
<div class="paragraph">
<p>Notice that <code>setHgrow()</code> is a static method and neither invoked on the topControls <code>HBox</code> nor on itself, topRightControls.  This is a facet of the JavaFX API that can be confusing because most of the API sets properties via setters on objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">topControls.setAlignment( Pos.BOTTOM_LEFT );

HBox.setHgrow(topRightControls, Priority.ALWAYS );
topRightControls.setAlignment( Pos.BOTTOM_RIGHT );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Close <code>Button</code> is wrapped in an <code>HBox</code> and positioned using the BOTTOM_RIGHT priority.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">bottomControls.setAlignment(Pos.BOTTOM_RIGHT );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vgrow">4.1.3. Vgrow</h4>
<div class="paragraph">
<p>Since the outermost container is <code>VBox</code>, the child <code>TableView</code> will expand to take up extra horizontal space when the window is widened.  However, vertically resizing the window will produce a gap at the bottom of the screen.  The <code>VBox</code> does not automatically resize any of its children.  As with the topRightControls <code>HBox</code>, a grow indicator can be set.  In the case of the <code>HBox</code>, this was a horizontal resizing instruction setHgrow().  For the <code>TableView</code> container <code>VBox</code>, this will be setVgrow().</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox.setVgrow( tblCustomers, Priority.ALWAYS );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_margin">4.1.4. Margin</h4>
<div class="paragraph">
<p>There are a few ways to space out UI controls.  This article uses the margin property on several of the containers to add whitespace around the controls.  These are set individually rather than using a spacing on the <code>VBox</code> so that the Separator will span the entire width.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox.setMargin( topControls, new Insets(10.0d) );
VBox.setMargin( tblCustomers, new Insets(0.0d, 10.0d, 10.0d, 10.0d) );
VBox.setMargin( bottomControls, new Insets(10.0d) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Insets</code> used by tblCustomers omits any top spacing to keep the spacing even.  JavaFX does not consolidate whitespace as in web design.  If the top Inset were set to 10.0d for the <code>TableView</code>, the distance between the top controls and the <code>TableView</code> would be twice as wide as the distance between any of the other controls.</p>
</div>
<div class="paragraph">
<p>Notice that these are static methods like the <code>Priority</code>.</p>
</div>
<div class="paragraph">
<p>This picture shows the application when run in its initial 800x600 size.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/vboxandhboxapp_screenshot.png" alt="vboxandhboxapp screenshot">
</div>
<div class="title">Figure 20. Screenshot</div>
</div>
<div class="paragraph">
<p>This image shows the application resized to a smaller height and width.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/vboxandhboxapp_screenshot_sm.png" alt="vboxandhboxapp screenshot sm">
</div>
<div class="title">Figure 21. Screenshot (Small)</div>
</div>
</div>
<div class="sect3">
<h4 id="_select_the_right_containers">4.1.5. Select the Right Containers</h4>
<div class="paragraph">
<p>The philosophy of JavaFX layout is the same as the philosophy of Swing.  Select the right container for the task at hand.  This article presented the two most versatile containers: <code>VBox</code> and HBox.  By setting properties like alignment, hgrow, and vgrow, you can build incredibly complex layouts through nesting.  These are the containers I use the most and often are the only containers that I need.</p>
</div>
</div>
<div class="sect3">
<h4 id="_complete_code_5">4.1.6. Complete Code</h4>
<div class="paragraph">
<p>The code can be tested in a pair of .java files.  There is a POJO for the Customer object used by the <code>TableView</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Customer {

    private String firstName;
    private String lastName;

    public Customer(String firstName,
                    String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the completed JavaFX <code>Application</code> subclass and main.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class VBoxAndHBoxApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        VBox vbox = new VBox();

        HBox topControls = new HBox();
        VBox.setMargin( topControls, new Insets(10.0d) );
        topControls.setAlignment( Pos.BOTTOM_LEFT );

        Button btnRefresh = new Button("Refresh");

        HBox topRightControls = new HBox();
        HBox.setHgrow(topRightControls, Priority.ALWAYS );
        topRightControls.setAlignment( Pos.BOTTOM_RIGHT );
        Hyperlink signOutLink = new Hyperlink("Sign Out");
        topRightControls.getChildren().add( signOutLink );

        topControls.getChildren().addAll( btnRefresh, topRightControls );

        TableView&lt;Customer&gt; tblCustomers = new TableView&lt;&gt;();
        tblCustomers.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);
        VBox.setMargin( tblCustomers, new Insets(0.0d, 10.0d, 10.0d, 10.0d) );
        VBox.setVgrow( tblCustomers, Priority.ALWAYS );

        TableColumn&lt;Customer, String&gt; lastNameCol = new TableColumn&lt;&gt;("Last Name");
        lastNameCol.setCellValueFactory(new PropertyValueFactory&lt;&gt;("lastName"));

        TableColumn&lt;Customer, String&gt; firstNameCol = new TableColumn&lt;&gt;("First Name");
        firstNameCol.setCellValueFactory(new PropertyValueFactory&lt;&gt;("firstName"));

        tblCustomers.getColumns().addAll( lastNameCol, firstNameCol );

        Separator sep = new Separator();

        HBox bottomControls = new HBox();
        bottomControls.setAlignment(Pos.BOTTOM_RIGHT );
        VBox.setMargin( bottomControls, new Insets(10.0d) );

        Button btnClose = new Button("Close");

        bottomControls.getChildren().add( btnClose );

        vbox.getChildren().addAll(
                topControls,
                tblCustomers,
                sep,
                bottomControls
        );

        Scene scene = new Scene(vbox );

        primaryStage.setScene( scene );
        primaryStage.setWidth( 800 );
        primaryStage.setHeight( 600 );
        primaryStage.setTitle("VBox and HBox App");
        primaryStage.setOnShown( (evt) -&gt; loadTable(tblCustomers) );
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    private void loadTable(TableView&lt;Customer&gt; tblCustomers) {
        tblCustomers.getItems().add(new Customer("George", "Washington"));
        tblCustomers.getItems().add(new Customer("Abe", "Lincoln"));
        tblCustomers.getItems().add(new Customer("Thomas", "Jefferson"));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stackpane">4.2. StackPane</h3>
<div class="paragraph">
<p><code>StackPane</code> lays out its children one on top of another. The last added <code>Node</code> is the topmost. By default, <code>StackPane</code> will align the children using <code>Pos.CENTER</code>, as can be seen in the following image, where the 3 children are (in the order of addition): <code>Rectangle</code>, <code>Circle</code> and <code>Button</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/stackpane_center.png" alt="stackpane center">
</div>
<div class="title">Figure 22. StackPane center-aligned</div>
</div>
<div class="paragraph">
<p>This image was produced by the following snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class StackPaneApp extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        StackPane pane = new StackPane(
                new Rectangle(200, 100, Color.BLACK),
                new Circle(40, Color.RED),
                new Button("Hello StackPane")
        );

        stage.setScene(new Scene(pane, 300, 300));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can change the default alignment by adding <code>pane.setAlignment(Pos.CENTER_LEFT);</code> to produce the following effect:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/stackpane_left.png" alt="stackpane left">
</div>
<div class="title">Figure 23. StackPane left-aligned</div>
</div>
</div>
<div class="sect2">
<h3 id="_absolute_positioning_with_pane">4.3. Absolute Positioning with Pane</h3>
<div class="paragraph">
<p>Containers like <code>VBox</code> or <code>BorderPane</code> align and distribute their children.  The superclass <code>Pane</code> is also a container, but does not impose an order on its children.  The children position themselves through properties like x, centerX, and layoutX.  This is called absolute positioning and it is a technique to place a <code>Shape</code> or a <code>Node</code> at a certain location on the screen.</p>
</div>
<div class="paragraph">
<p>This screenshot shows an About View.  The About View contains a <code>Hyperlink</code> in the middle of the screen "About this App".  The About View uses several JavaFX shapes to form a design which is cropped to appear like a business card.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/paneapp_about_view.png" alt="paneapp about view">
</div>
<div class="title">Figure 24. Screenshot of About View in PaneApp</div>
</div>
<div class="sect3">
<h4 id="_pane_size">4.3.1. Pane Size</h4>
<div class="paragraph">
<p>Unlike most containers, <code>Pane</code> resizes to fit its contents and not the other way around.  This picture is a screenshot from Scenic View taken prior to adding the lower-right Arc.  The <code>Pane</code> is the yellow highlighted area.  Notice that it does not take up the full <code>Stage</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/paneapp_pane_size_scenicview.png" alt="paneapp pane size scenicview">
</div>
<div class="title">Figure 25. Scenic View Highlighting Partially Built Screen</div>
</div>
<div class="paragraph">
<p>This is a screenshot taken after the lower-right <code>Arc</code> was added.  This <code>Arc</code> was placed closer to the bottom-right edge of the <code>Stage</code>.  This forces the Pane to stretch to accommodate the expanded contents.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/paneapp_scenicview_full_stage.png" alt="paneapp scenicview full stage">
</div>
<div class="title">Figure 26. Scenic View Highlighting Expanded Pane</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_pane">4.3.2. The Pane</h4>
<div class="paragraph">
<p>The outermost container of the About View is a <code>VBox</code> whose sole contents are the <code>Pane</code>.  The <code>VBox</code> is used to fit the entire <code>Stage</code> and provides a background.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox vbox = new VBox();
vbox.setPadding( new Insets( 10 ) );
vbox.setBackground(
    new Background(
        new BackgroundFill(Color.BLACK, new CornerRadii(0), new Insets(0))
        ));

Pane p = new Pane();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_shapes">4.3.3. The Shapes</h4>
<div class="paragraph">
<p>In the upper left of the screen, there is a group of 4 'Arcs' and 1 'Circle'.  This code positions largeArc at (0,0) through the centerX and centerY arguments in the <code>Arc</code> constructor.  Notice that backgroundArc is also positioned at (0,0) and appears underneath largeArc.  <code>Pane</code> does not attempt to deconflict overlapping shapes and in this case, overlapping is what is wanted.  smArc1 is placed at (0,160) which is down on the Y axis.  smArc2 is positioned at (160,0) which is right on the X axis.  smCircle is positioned at the same distance as smArc1 and smArc2, but at a 45 degree angle.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Arc largeArc = new Arc(0, 0, 100, 100, 270, 90);
largeArc.setType(ArcType.ROUND);

Arc backgroundArc = new Arc(0, 0, 160, 160, 270, 90 );
backgroundArc.setType( ArcType.ROUND );

Arc smArc1 = new Arc( 0, 160, 30, 30, 270, 180);
smArc1.setType(ArcType.ROUND);

Circle smCircle = new Circle(160/Math.sqrt(2.0), 160/Math.sqrt(2.0), 30,Color.web("0xF2A444"));

Arc smArc2 = new Arc( 160, 0, 30, 30, 180, 180);
smArc2.setType(ArcType.ROUND);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The lower-right <code>Arc</code> is positioned based on the overall height of the <code>Stage</code>.  The 20 subtracted from the height is the 10 pixel <code>Insets</code> from the <code>VBox</code> (10 for left + 10 for right).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Arc medArc = new Arc(568-20, 320-20, 60, 60, 90, 90);
medArc.setType(ArcType.ROUND);

primaryStage.setWidth( 568 );
primaryStage.setHeight( 320 );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_hyperlink">4.3.4. The Hyperlink</h4>
<div class="paragraph">
<p>The <code>Hyperlink</code> is positioned offset the center (284,160) which is the width and height of the <code>Stage</code> both divided by two.  This positions the text of the <code>Hyperlink</code> in the lower-right quadrant of the screen, so an offset is needed based on the <code>Hyperlink</code> width and height.  The dimensions are not available for the <code>Hyperlink</code> until the screen is shown, so I make a post-shown adjustment to the position.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Hyperlink hyperlink = new Hyperlink("About this App");

primaryStage.setOnShown( (evt) -&gt; {
     hyperlink.setLayoutX( 284 - (hyperlink.getWidth()/3) );
     hyperlink.setLayoutY( 160 - hyperlink.getHeight() );
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Hyperlink</code> is not placed in the true center of the screen.  The layoutX value is based on a divide-by-three operation that moves it away from the upper-left design.</p>
</div>
</div>
<div class="sect3">
<h4 id="_z_order">4.3.5. Z-Order</h4>
<div class="paragraph">
<p>As mentioned earlier, <code>Pane</code> supports overlapping children.  This picture shows the About View with depth added to the upper-left design.  The smaller <code>Arcs</code> and <code>Circle</code> hover over backgroundArc as does largeArc.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/paneapp_zorder.png" alt="paneapp zorder">
</div>
<div class="title">Figure 27. About View Showing Depth</div>
</div>
<div class="paragraph">
<p>The z-order in this example is determined by the order in which the children are added to the <code>Pane</code>.  backgroundArc is obscured by items added later, most notably largeArc.  To rearrange the children, use the toFront() and toBack() methods after the items have been added to the <code>Pane</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">p.getChildren().addAll( backgroundArc, largeArc, smArc1, smCircle, smArc2, hyperlink, medArc );

vbox.getChildren().add( p );</code></pre>
</div>
</div>
<div class="paragraph">
<p>When starting JavaFX, it is tempting to build an absolute layout.  Be aware that absolute layouts are brittle, often breaking when the screen is resized or when items are added during the software maintenance phase.  Yet, there are good reasons for using absolute positioning.  Gaming is one such usage.  In a game, you can adjust the (x,y) coordinate of a 'Shape' to move a game piece around the screen.  This article demonstrated the JavaFX class <code>Pane</code> which provides absolute positioning to any shape-driven UI.</p>
</div>
</div>
<div class="sect3">
<h4 id="_completed_code">4.3.6. Completed Code</h4>
<div class="paragraph">
<p>This is the completed JavaFX <code>Application</code> subclass and main.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class PaneApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        VBox vbox = new VBox();
        vbox.setPadding( new Insets( 10 ) );
        vbox.setBackground(
            new Background(
                new BackgroundFill(Color.BLACK, new CornerRadii(0), new Insets(0))
                ));

        Pane p = new Pane();

        Arc largeArc = new Arc(0, 0, 100, 100, 270, 90);
        largeArc.setFill(Color.web("0x59291E"));
        largeArc.setType(ArcType.ROUND);

        Arc backgroundArc = new Arc(0, 0, 160, 160, 270, 90 );
        backgroundArc.setFill( Color.web("0xD96F32") );
        backgroundArc.setType( ArcType.ROUND );

        Arc smArc1 = new Arc( 0, 160, 30, 30, 270, 180);
        smArc1.setFill(Color.web("0xF2A444"));
        smArc1.setType(ArcType.ROUND);

        Circle smCircle = new Circle(
            160/Math.sqrt(2.0), 160/Math.sqrt(2.0), 30,Color.web("0xF2A444")
            );

        Arc smArc2 = new Arc( 160, 0, 30, 30, 180, 180);
        smArc2.setFill(Color.web("0xF2A444"));
        smArc2.setType(ArcType.ROUND);

        Hyperlink hyperlink = new Hyperlink("About this App");
        hyperlink.setFont( Font.font(36) );
        hyperlink.setTextFill( Color.web("0x3E6C93") );
        hyperlink.setBorder( Border.EMPTY );

        Arc medArc = new Arc(568-20, 320-20, 60, 60, 90, 90);
        medArc.setFill(Color.web("0xD9583B"));
        medArc.setType(ArcType.ROUND);

        p.getChildren().addAll( backgroundArc, largeArc, smArc1, smCircle,
            smArc2, hyperlink, medArc );

        vbox.getChildren().add( p );

        Scene scene = new Scene(vbox);
        scene.setFill(Color.BLACK);

        primaryStage.setTitle("Pane App");
        primaryStage.setScene( scene );
        primaryStage.setWidth( 568 );
        primaryStage.setHeight( 320 );
        primaryStage.setOnShown( (evt) -&gt; {
             hyperlink.setLayoutX( 284 - (hyperlink.getWidth()/3) );
             hyperlink.setLayoutY( 160 - hyperlink.getHeight() );
        });
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clipping">4.4. Clipping</h3>
<div class="paragraph">
<p>Most JavaFX layout containers (base class <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/layout/Region.html">Region</a>) automatically position and size their children, so clipping any child contents that might protrude beyond the container’s layout bounds is never an issue. The big exception is <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/layout/Pane.html">Pane</a>, a direct subclass of <code>Region</code> and the base class for all layout containers with publicly accessible children. Unlike its subclasses Pane does not attempt to arrange its children but simply accepts explicit user positioning and sizing.</p>
</div>
<div class="paragraph">
<p>This makes <code>Pane</code> suitable as a drawing surface, similar to <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/canvas/Canvas.html">Canvas</a> but rendering user-defined <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/shape/Shape.html">Shape</a> children rather than direct drawing commands. The problem is that drawing surfaces are usually expected to automatically clip their contents at their bounds. <code>Canvas</code> does this by default but <code>Pane</code> does not. From the last paragraph of the Javadoc entry for <code>Pane</code>:</p>
</div>
<div class="quoteblock">
<blockquote>
Pane does not clip its content by default, so it is possible that children’s bounds may extend outside its own bounds, either if children are positioned at negative coordinates or the pane is resized smaller than its preferred size.
</blockquote>
</div>
<div class="paragraph">
<p>This quote is somewhat misleading. Children are rendered (wholly or partially) outside their parent <code>Pane</code> 'whenever' their combination of position and size extends beyond the parent’s bounds, regardless of whether the position is negative or the <code>Pane</code> is ever resized. Quite simply, <code>Pane</code> only provides a coordinate shift to its children, based on its upper-left corner – but its layout bounds are completely ignored while rendering children. Note that the Javadoc for all <code>Pane</code> subclasses (that I checked) includes a similar warning. They don’t clip their contents either, but as mentioned above this is not usually a problem for them because they automatically arrange their children.</p>
</div>
<div class="paragraph">
<p>So to properly use <code>Pane</code> as a drawing surface for <code>Shapes</code>, we need to manually clip its contents. This is somewhat complex, especially when a visible border is involved. I wrote a small demo application to illustrate the default behavior and various steps to fix it. You can download it as <a href="http://kynosarges.org/misc/PaneDemo.zip">PaneDemo.zip</a> which contains a project for NetBeans 8.2 and Java SE 8u112. The following sections explain each step with screenshots and pertinent code snippets.</p>
</div>
<div class="sect3">
<h4 id="_default_behavior">4.4.1. Default Behavior</h4>
<div class="paragraph">
<p>Starting up, PaneDemo shows what happens when you put an <code>Ellipse</code> shape into a <code>Pane</code> that’s too small to contain it entirely. The <code>Pane</code> has a nice thick rounded <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/layout/Border.html">Border</a> to visualize its area. The application window is resizable, with the <code>Pane</code> size following the window size. The three buttons on the left are used to switch to the other steps in the demo; click Default (Alt+D) to revert to the default output from a later step.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/clipping_extends.png" alt="clipping extends">
</div>
<div class="title">Figure 28. Child Extending Outside Pane Bounds</div>
</div>
<div class="paragraph">
<p>As you can see, the <code>Ellipse</code> overwrites its parent’s <code>Border</code> and protrudes well beyond it. The following code is used to generate the default view. It’s split into several smaller methods, and a constant for the <code>Border</code> corner radius, because they will be referenced in the next steps.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">static final double BORDER_RADIUS = 4;

static Border createBorder() {
    return new Border(
            new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID,
            new CornerRadii(BORDER_RADIUS), BorderStroke.THICK));
}

static Shape createShape() {
    final Ellipse shape = new Ellipse(50, 50);
    shape.setCenterX(80);
    shape.setCenterY(80);
    shape.setFill(Color.LIGHTCORAL);
    shape.setStroke(Color.LIGHTCORAL);
    return shape;
}

static Region createDefault() {
    final Pane pane = new Pane(createShape());
    pane.setBorder(createBorder());
    pane.setPrefSize(100, 100);
    return pane;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_simple_clipping">4.4.2. Simple Clipping</h4>
<div class="paragraph">
<p>Surprisingly, there is no predefined option to have a resizable <code>Region</code> automatically clip its children to its current size. Instead, you need to use the basic <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#clipProperty">clipProperty</a> defined on <code>Node</code> and keep it updated manually to reflect changing layout bounds. Method <code>clipChildren</code> below show how this works (with Javadoc because you may want to reuse it in your own code):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/**
 * Clips the children of the specified {@link Region} to its current size.
 * This requires attaching a change listener to the region’s layout bounds,
 * as JavaFX does not currently provide any built-in way to clip children.
 *
 * @param region the {@link Region} whose children to clip
 * @param arc the {@link Rectangle#arcWidth} and {@link Rectangle#arcHeight}
 *            of the clipping {@link Rectangle}
 * @throws NullPointerException if {@code region} is {@code null}
 */
static void clipChildren(Region region, double arc) {

    final Rectangle outputClip = new Rectangle();
    outputClip.setArcWidth(arc);
    outputClip.setArcHeight(arc);
    region.setClip(outputClip);

    region.layoutBoundsProperty().addListener((ov, oldValue, newValue) -&gt; {
        outputClip.setWidth(newValue.getWidth());
        outputClip.setHeight(newValue.getHeight());
    });
}

static Region createClipped() {
    final Pane pane = new Pane(createShape());
    pane.setBorder(createBorder());
    pane.setPrefSize(100, 100);

    // clipped children still overwrite Border!
    clipChildren(pane, 3 * BORDER_RADIUS);

    return pane;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Choose Clipped (Alt+C) in PaneDemo to render the corresponding output. Here’s how that looks:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/clipping_clipped.png" alt="clipping clipped">
</div>
<div class="title">Figure 29. Pane with Clip Applied</div>
</div>
<div class="paragraph">
<p>That’s better. The <code>Ellipse</code> no longer protrudes beyond the <code>Pane</code> – but still overwrites its Border. Also note that we had to manually specify an estimated corner rounding for the clipping <code>Rectangle</code> in order to reflect the rounded <code>Border</code> corners. This estimate is 3 * BORDER_RADIUS because the corner radius specified on <code>Border</code> actually defines its inner radius, and the outer radius (which we need here) will be greater depending on the <code>Border</code> thickness. (You could compute the outer radius exactly if you really wanted to, but I skipped that for the demo application.)</p>
</div>
</div>
<div class="sect3">
<h4 id="_nested_panes">4.4.3. Nested Panes</h4>
<div class="paragraph">
<p>Can we somehow specify a clipping region that excludes a visible` Border`? Not on the drawing <code>Pane</code> itself, as far as I can tell. The clipping region affects the <code>Border</code> as well as other contents, so if you were to shrink the clipping region to exclude it you would no longer see any <code>Border</code> at all. Instead, the solution is to create two nested panes: one inner drawing <code>Pane</code> without <code>Border</code> that clips exactly to its bounds, and one outer <code>StackPane</code> that defines the visible <code>Border</code> and also resizes the drawing <code>Pane</code>. Here is the final code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">static Region createNested() {
    // create drawing Pane without Border or size
    final Pane pane = new Pane(createShape());
    clipChildren(pane, BORDER_RADIUS);

    // create sized enclosing Region with Border
    final Region container = new StackPane(pane);
    container.setBorder(createBorder());
    container.setPrefSize(100, 100);
    return container;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Choose Nested (Alt+N) in PaneDemo to render the corresponding output. Now everything looks as it should:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/clipping_nested.png" alt="clipping nested">
</div>
<div class="title">Figure 30. Nesting Pane in StackPane</div>
</div>
<div class="paragraph">
<p>As an added bonus, we no longer need to guesstimate a correct corner radius for the clipping <code>Rectangle</code>. We now clip to the inner rather than outer circumference of our visible <code>Border</code>, so we can directly reuse its inner corner radius. Should you specify multiple different corner radii or an otherwise more complex <code>Border</code> you’d have to define a correspondingly more complex clipping <code>Shape</code>.</p>
</div>
<div class="paragraph">
<p>There is one small caveat. The top-left corner of the drawing <code>Pane</code> to which all child coordinates are relative now starts <em>within</em> the visible <code>Border</code>. If you retroactively change a single <code>Pane</code> with visible <code>Border</code> to nested panes as shown here, all children will exhibit a slight positioning shift corresponding to the <code>Border</code> thickness.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gridpane">4.5. GridPane</h3>
<div class="paragraph">
<p>Forms in business applications often use a layout that mimics a database record.  For each column in a table, a header is added on the left-hand side which is matched with a row value on the right-hand side. JavaFX has a special purpose control called <code>GridPane</code> for this type of layout that keeps contents aligned by row and column.  <code>GridPane</code> also supports spanning for more complex layouts.</p>
</div>
<div class="paragraph">
<p>This screenshot shows a basic <code>GridPane</code> layout.  On the left-hand side of the form, there is a column of field names: Email, Priority, Problem, Description.  On the right-hand side of the form, there is a column of controls which will display the value of the corresponding field.  The field names are of type <code>Label</code> and the value controls are a mixture including <code>TextField</code>, <code>TextArea</code>, and <code>ComboBox</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/gridpaneapp.png" alt="gridpaneapp">
</div>
<div class="title">Figure 31. Field Name / Value Pairs in a GridPane</div>
</div>
<div class="paragraph">
<p>The following code shows the objects created for the form. "vbox" is the root of the <code>Scene</code> and will also contain the <code>ButtonBar</code> at the base of the form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox vbox = new VBox();

GridPane gp = new GridPane();

Label lblTitle = new Label("Support Ticket");

Label lblEmail = new Label("Email");
TextField tfEmail = new TextField();

Label lblPriority = new Label("Priority");
ObservableList&lt;String&gt; priorities = FXCollections.observableArrayList("Medium", "High", "Low");
ComboBox&lt;String&gt; cbPriority = new ComboBox&lt;&gt;(priorities);

Label lblProblem = new Label("Problem");
TextField tfProblem = new TextField();

Label lblDescription = new Label("Description");
TextArea taDescription = new TextArea();</code></pre>
</div>
</div>
<div class="paragraph">
<p>GridPane has a handy method <code>setGridLinesVisible()</code> which shows the grid structure and gutters.  It is especially useful in more complex layouts where spanning is involved because gaps in the row/col assignments can cause shifts in the layout.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/gridpaneapp_lines.png" alt="gridpaneapp lines">
</div>
<div class="title">Figure 32. Grid Structure and Gutters</div>
</div>
<div class="sect3">
<h4 id="_spacing">4.5.1. Spacing</h4>
<div class="paragraph">
<p>As a container, <code>GridPane</code> has a padding property that can be set to surround the <code>GridPane</code> contents with whitespace.  "padding" will take an <code>Inset</code> object as a parameter.  In this example, 10 pixels of whitespace is applied to all sides so a short form constructor is used for <code>Inset</code>.</p>
</div>
<div class="paragraph">
<p>Within the <code>GridPane</code>, vgap and hgap control the gutters.  The hgap is set to 4 to keep the fields close to their values.  vgap is slightly larger to help with mouse navigation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">gp.setPadding( new Insets(10) );
gp.setHgap( 4 );
gp.setVgap( 8 );</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to keep the lower part of the form consistent, a <code>Priority</code> is set on the VBox.  This will <em>not resize</em> the individual rows however.  For individual resize specifications, use <code>ColumnConstraints</code> and <code>RowConstraints</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox.setVgrow(gp, Priority.ALWAYS );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_items">4.5.2. Adding Items</h4>
<div class="paragraph">
<p>Unlike containers like <code>BorderPane</code> or <code>HBox</code>, Nodes need to specify their position within the <code>GridPane</code>.  This is done with the <code>add()</code> method on the <code>GridPane</code> and not the add method on a container children property.  This form of the <code>GridPane</code> <code>add()</code> method takes a zero-based column position and a zero-based row position.  This code puts two statements on the same line for readability.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">gp.add( lblTitle,       1, 1);  // empty item at 0,0
gp.add( lblEmail,       0, 2); gp.add(tfEmail,        1, 2);
gp.add( lblPriority,    0, 3); gp.add( cbPriority,    1, 3);
gp.add( lblProblem,     0, 4); gp.add( tfProblem,     1, 4);
gp.add( lblDescription, 0, 5); gp.add( taDescription, 1, 5);</code></pre>
</div>
</div>
<div class="paragraph">
<p>lblTitle is put in the second column of the first row.  There is no entry in the first column of the first row.</p>
</div>
<div class="paragraph">
<p>Subsequent additions are presented in pairs.  Field name <code>Label</code> objects are put in the first column (column index=0) and value controls are put in the second column (column index=1).  The rows are added by the incremented second value.  For example, lblPriority is put in the fourth row along with its <code>ComboBox</code>.</p>
</div>
<div class="paragraph">
<p><code>GridPane</code> is an important container in JavaFX business application design.  When you have a requirement for name / value pairs, <code>GridPane</code> will be an easy way to support the strong column orientation of a traditional form.</p>
</div>
</div>
<div class="sect3">
<h4 id="_completed_code_2">4.5.3. Completed Code</h4>
<div class="paragraph">
<p>The following class is the complete code form the example.  This include the definition of the <code>ButtonBar</code> which was not presented in the preceding sections focused on <code>GridPane</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class GridPaneApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        VBox vbox = new VBox();

        GridPane gp = new GridPane();
        gp.setPadding( new Insets(10) );
        gp.setHgap( 4 );
        gp.setVgap( 8 );

        VBox.setVgrow(gp, Priority.ALWAYS );

        Label lblTitle = new Label("Support Ticket");

        Label lblEmail = new Label("Email");
        TextField tfEmail = new TextField();

        Label lblPriority = new Label("Priority");
        ObservableList&lt;String&gt; priorities =
            FXCollections.observableArrayList("Medium", "High", "Low");
        ComboBox&lt;String&gt; cbPriority = new ComboBox&lt;&gt;(priorities);

        Label lblProblem = new Label("Problem");
        TextField tfProblem = new TextField();

        Label lblDescription = new Label("Description");
        TextArea taDescription = new TextArea();

        gp.add( lblTitle,       1, 1);  // empty item at 0,0
        gp.add( lblEmail,       0, 2); gp.add(tfEmail,        1, 2);
        gp.add( lblPriority,    0, 3); gp.add( cbPriority,    1, 3);
        gp.add( lblProblem,     0, 4); gp.add( tfProblem,     1, 4);
        gp.add( lblDescription, 0, 5); gp.add( taDescription, 1, 5);

        Separator sep = new Separator(); // hr

        ButtonBar buttonBar = new ButtonBar();
        buttonBar.setPadding( new Insets(10) );

        Button saveButton = new Button("Save");
        Button cancelButton = new Button("Cancel");

        buttonBar.setButtonData(saveButton, ButtonBar.ButtonData.OK_DONE);
        buttonBar.setButtonData(cancelButton, ButtonBar.ButtonData.CANCEL_CLOSE);

        buttonBar.getButtons().addAll(saveButton, cancelButton);

        vbox.getChildren().addAll( gp, sep, buttonBar );

        Scene scene = new Scene(vbox);

        primaryStage.setTitle("Grid Pane App");
        primaryStage.setScene(scene);
        primaryStage.setWidth( 736 );
        primaryStage.setHeight( 414  );
        primaryStage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gridpane_spanning">4.6. GridPane Spanning</h3>
<div class="paragraph">
<p>For more complex forms implemented with <code>GridPane</code>, spanning is supported.  Spanning allows a control to claim the space of neighboring columns (colspan) and neighboring rows (rowspan).  This screenshot shows a form that extends the example in the previous section.  The two-column layout of the earlier version has been replaced with a multiple-column layout.  Fields like Problem and Description retain the original structure.  But controls were added to the rows that formerly held only Email and Priority.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/complexgridpaneapp.png" alt="complexgridpaneapp">
</div>
<div class="title">Figure 33. Spanning Columns</div>
</div>
<div class="paragraph">
<p>Turing the grid lines on, notice that the former two column grid is replaced with a six column grid.  The third row containing six items&#8201;&#8212;&#8201;3 field name / value pairs&#8201;&#8212;&#8201;dictates the structure.  The rest of the form will use spanning in order to fill in the whitespace.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/complexgridpaneapp_lines.png" alt="complexgridpaneapp lines">
</div>
<div class="title">Figure 34. Lines Highlighting Spanning</div>
</div>
<div class="paragraph">
<p>The <code>VBox</code> and <code>GridPane</code> container objects used in this update follow.  There is a little more Vgap to help the user select the <code>ComboBox</code> controls.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">GridPane gp = new GridPane();
gp.setPadding( new Insets(10) );
gp.setHgap( 4 );
gp.setVgap( 10 );

VBox.setVgrow(gp, Priority.ALWAYS );</code></pre>
</div>
</div>
<div class="paragraph">
<p>These are control creation statements from the updated example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Label lblTitle = new Label("Support Ticket");

Label lblEmail = new Label("Email");
TextField tfEmail = new TextField();

Label lblContract = new Label("Contract");
TextField tfContract = new TextField();

Label lblPriority = new Label("Priority");
ObservableList&lt;String&gt; priorities =
    FXCollections.observableArrayList("Medium", "High", "Low");
ComboBox&lt;String&gt; cbPriority = new ComboBox&lt;&gt;(priorities);

Label lblSeverity = new Label("Severity");
ObservableList&lt;String&gt; severities =
    FXCollections.observableArrayList("Blocker", "Workaround", "N/A");
ComboBox&lt;String&gt; cbSeverity = new ComboBox&lt;&gt;(severities);

Label lblCategory = new Label("Category");
ObservableList&lt;String&gt; categories =
    FXCollections.observableArrayList("Bug", "Feature");
ComboBox&lt;String&gt; cbCategory = new ComboBox&lt;&gt;(categories);

Label lblProblem = new Label("Problem");
TextField tfProblem = new TextField();

Label lblDescription = new Label("Description");
TextArea taDescription = new TextArea();</code></pre>
</div>
</div>
<div class="paragraph">
<p>As in the earlier version, the controls are added to the <code>GridPane</code> using the <code>add()</code> method.  A column and row are specified.  In this snippet, the indexing it not straightforward as there are gaps expected to be filled in by spanning content.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">gp.add( lblTitle,       1, 0);  // empty item at 0,0

gp.add( lblEmail,       0, 1);
gp.add(tfEmail,         1, 1);
gp.add( lblContract,    4, 1 );
gp.add( tfContract,     5, 1 );

gp.add( lblPriority,    0, 2);
gp.add( cbPriority,     1, 2);
gp.add( lblSeverity,    2, 2);
gp.add( cbSeverity,     3, 2);
gp.add( lblCategory,    4, 2);
gp.add( cbCategory,     5, 2);

gp.add( lblProblem,     0, 3); gp.add( tfProblem,     1, 3);
gp.add( lblDescription, 0, 4); gp.add( taDescription, 1, 4);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the spanning definitions are set using a static method on <code>GridPane</code>.  There is a similar method to do row spanning.  Title will take up 5 columns as will Problem and Description.  Email shares a row with Contract, but will take up more columns.  The third row of ComboBoxes is a set of three field/value pairs each taking up one column.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">GridPane.setColumnSpan( lblTitle, 5 );
GridPane.setColumnSpan( tfEmail, 3 );
GridPane.setColumnSpan( tfProblem, 5 );
GridPane.setColumnSpan( taDescription, 5 );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, a variation of the add() method will columnSpan and rowSpan arguments to avoid the subsequent static method call.</p>
</div>
<div class="paragraph">
<p>This expanded <code>GridPane</code> example demonstrated column spanning.  The same capability is available for row spanning which would allow a control to claim additional vertical space.  Spanning keeps controls aligned even in cases where the number of items in a given row (or column) varies.  To keep the focus on the spanning topic, this grid allowed the column widths to vary.  The article on <code>ColumnConstraints</code> and <code>RowConstraints</code> will focus on building true modular and column typographical grids by better controlling the columns (and rows).</p>
</div>
<div class="sect3">
<h4 id="_completed_code_3">4.6.1. Completed Code</h4>
<div class="paragraph">
<p>The following is the completed code for the spanning GridPane example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ComplexGridPaneApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        VBox vbox = new VBox();

        GridPane gp = new GridPane();
        gp.setPadding( new Insets(10) );
        gp.setHgap( 4 );
        gp.setVgap( 10 );

        VBox.setVgrow(gp, Priority.ALWAYS );

        Label lblTitle = new Label("Support Ticket");

        Label lblEmail = new Label("Email");
        TextField tfEmail = new TextField();

        Label lblContract = new Label("Contract");
        TextField tfContract = new TextField();

        Label lblPriority = new Label("Priority");
        ObservableList&lt;String&gt; priorities =
            FXCollections.observableArrayList("Medium", "High", "Low");
        ComboBox&lt;String&gt; cbPriority = new ComboBox&lt;&gt;(priorities);

        Label lblSeverity = new Label("Severity");
        ObservableList&lt;String&gt; severities = FXCollections.observableArrayList("Blocker", "Workaround", "N/A");
        ComboBox&lt;String&gt; cbSeverity = new ComboBox&lt;&gt;(severities);

        Label lblCategory = new Label("Category");
        ObservableList&lt;String&gt; categories = FXCollections.observableArrayList("Bug", "Feature");
        ComboBox&lt;String&gt; cbCategory = new ComboBox&lt;&gt;(categories);

        Label lblProblem = new Label("Problem");
        TextField tfProblem = new TextField();

        Label lblDescription = new Label("Description");
        TextArea taDescription = new TextArea();

        gp.add( lblTitle,       1, 0);  // empty item at 0,0

        gp.add( lblEmail,       0, 1);
        gp.add(tfEmail,         1, 1);
        gp.add( lblContract,    4, 1 );
        gp.add( tfContract,     5, 1 );

        gp.add( lblPriority,    0, 2);
        gp.add( cbPriority,     1, 2);
        gp.add( lblSeverity,    2, 2);
        gp.add( cbSeverity,     3, 2);
        gp.add( lblCategory,    4, 2);
        gp.add( cbCategory,     5, 2);

        gp.add( lblProblem,     0, 3); gp.add( tfProblem,     1, 3);
        gp.add( lblDescription, 0, 4); gp.add( taDescription, 1, 4);

        GridPane.setColumnSpan( lblTitle, 5 );
        GridPane.setColumnSpan( tfEmail, 3 );
        GridPane.setColumnSpan( tfProblem, 5 );
        GridPane.setColumnSpan( taDescription, 5 );

        Separator sep = new Separator(); // hr

        ButtonBar buttonBar = new ButtonBar();
        buttonBar.setPadding( new Insets(10) );

        Button saveButton = new Button("Save");
        Button cancelButton = new Button("Cancel");

        buttonBar.setButtonData(saveButton, ButtonBar.ButtonData.OK_DONE);
        buttonBar.setButtonData(cancelButton, ButtonBar.ButtonData.CANCEL_CLOSE);

        buttonBar.getButtons().addAll(saveButton, cancelButton);

        vbox.getChildren().addAll( gp, sep, buttonBar );

        Scene scene = new Scene(vbox);

        primaryStage.setTitle("Grid Pane App");
        primaryStage.setScene(scene);
        primaryStage.setWidth( 736 );
        primaryStage.setHeight( 414  );
        primaryStage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gridpane_columnconstraints_and_rowconstraints">4.7. GridPane ColumnConstraints and RowConstraints</h3>
<div class="paragraph">
<p>Previous articles on <code>GridPane</code> showed how to create a two-column layout with field names on the left-hand side and field values on the right-hand side.  That example was expanded to add more controls to a given row and to use spanning handle gaps in content.  This article introduces a pair of JavaFX classes <code>ColumnConstraints</code> and <code>RowConstraints</code>.  These classes give additional specification to a row or column.  In this example, a row containing a <code>TextArea</code> will be given all extra space when the window is resized.  The two columns will be set to equals widths.</p>
</div>
<div class="paragraph">
<p>This screenshot shows an example modified from previous articles.  The demo program for this article has a rotated feel whereby the field names are paired with the field values vertically (on top of the values) rather than horizontally.  Row spanning and column spanning is used to align items that are larger than a single cell.</p>
</div>
<div id="initial_image" class="imageblock">
<div class="content">
<img src="images/layout/constraintsgridpaneapp_1_annotated.png" alt="constraintsgridpaneapp 1 annotated">
</div>
<div class="title">Figure 35. Example App Using Row and Column Spanning</div>
</div>
<div class="paragraph">
<p>The red rectangles and text are not part of the UI.  They are identifying sections of the screen that will be addressed later with ColumnConstraints and RowConstaints.</p>
</div>
<div class="paragraph">
<p>This code is the creation of the <code>Scene</code> root and <code>GridPane</code> objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">VBox vbox = new VBox();

GridPane gp = new GridPane();
gp.setPadding( new Insets(10) );
gp.setHgap( 4 );
gp.setVgap( 10 );

VBox.setVgrow(gp, Priority.ALWAYS );</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates the UI controls objects used in the article.  Notice that Priority is now implemented as a <code>VBox</code> containing RadioButtons.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Label lblTitle = new Label("Support Ticket");

Label lblEmail = new Label("Email");
TextField tfEmail = new TextField();

Label lblContract = new Label("Contract");
TextField tfContract = new TextField();

Label lblPriority = new Label("Priority");
RadioButton rbMedium = new RadioButton("Medium");
RadioButton rbHigh = new RadioButton("High");
RadioButton rbLow = new RadioButton("Low");
VBox priorityVBox = new VBox();
priorityVBox.setSpacing( 2 );
GridPane.setVgrow(priorityVBox, Priority.SOMETIMES);
priorityVBox.getChildren().addAll( lblPriority, rbMedium, rbHigh, rbLow );

Label lblSeverity = new Label("Severity");
ObservableList&lt;String&gt; severities =
    FXCollections.observableArrayList("Blocker", "Workaround", "N/A");
ComboBox&lt;String&gt; cbSeverity = new ComboBox&lt;&gt;(severities);

Label lblCategory = new Label("Category");
ObservableList&lt;String&gt; categories =
    FXCollections.observableArrayList("Bug", "Feature");
ComboBox&lt;String&gt; cbCategory = new ComboBox&lt;&gt;(categories);

Label lblProblem = new Label("Problem");
TextField tfProblem = new TextField();

Label lblDescription = new Label("Description");
TextArea taDescription = new TextArea();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Label and value control pairings of Email, Contract, Problem, and Description are put in a single column.  They should take the full width of the <code>GridPane</code> so each has its columnSpan set to 2.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">GridPane.setColumnSpan( tfEmail, 2 );
GridPane.setColumnSpan( tfContract, 2 );
GridPane.setColumnSpan( tfProblem, 2 );
GridPane.setColumnSpan( taDescription, 2 );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new Priority RadioButtons are matched horizontally with four controls for Severity and Category.  This rowSpan setting instructs JavaFX to put the VBox containing the RadioButton in a merged cell that is four rows in height.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">GridPane.setRowSpan( priorityVBox, 4 );</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_row_constraints">4.7.1. Row Constraints</h4>
<div class="paragraph">
<p>At this point, the code reflects the UI screenshot presented in <a href="#initial_image">Example App Using Row and Column Spanning</a>.  To reallocate the extra space at the base of the form, use a RowConstraints object to set a Priority.ALWAYS on the row of the <code>TextArea</code>.  This will result in the <code>TextArea</code> growing to fill the available space with something usable.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/constraintsgridpaneapp_description.png" alt="constraintsgridpaneapp description">
</div>
<div class="title">Figure 36. TextArea Grows to Fill Extra Space</div>
</div>
<div class="paragraph">
<p>This code is a <code>RowConstraints</code> object to the <code>GridPane</code> for the <code>TextArea</code>.  Prior to the setter, <code>RowConstraints</code> objects are allocated for all of the other rows.  The set method of <code>getRowConstraints()</code> will throw an index exception when you specify row 12 without first allocating an object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">RowConstraints taDescriptionRowConstraints = new RowConstraints();
taDescriptionRowConstraints.setVgrow(Priority.ALWAYS);

for( int i=0; i&lt;13; i++ ) {
    gp.getRowConstraints().add( new RowConstraints() );
}

gp.getRowConstraints().set( 12, taDescriptionRowConstraints );</code></pre>
</div>
</div>
<div class="paragraph">
<p>As an alternative syntax, there is a setConstraints() method available from the <code>GridPane</code>.  This will pass in several values and obviates the need for the dedicated columnSpan set call for the <code>TextArea</code>.  The <code>RowConstraints</code> code from the previous listing will not appear in the finished program.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">gp.setConstraints(taDescription,
                  0, 12,
                  2, 1,
                  HPos.LEFT, VPos.TOP,
                  Priority.SOMETIMES, Priority.ALWAYS);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code identifies the <code>Node</code> at (0,12) which is the <code>TextArea</code>.  The <code>TextArea</code> will span 2 columns but only 1 row.  The HPos and Vpos are set to the TOP LEFT.  Finally, the <code>Priority</code> of the hgrow is SOMETIMES and the vgrow is ALWAYS.  Since the <code>TextArea</code> is the only row with "ALWAYS", it will get the additional space.  If there were other ALWAYS settings, the space would be shared among multiple rows.</p>
</div>
</div>
<div class="sect3">
<h4 id="_column_constraints">4.7.2. Column Constraints</h4>
<div class="paragraph">
<p>To properly allocate the space surrounding the Severity and Category controls, ColumnConstraints will be specified.  The default behavior allocates less space to the first column because of the smaller Priority RadioButtons.  The following wireframe shows the desired layout which has equal columns separated by a gutter of 4 pixels (Hgap).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/constraintsgridpaneapp_wireframe.png" alt="constraintsgridpaneapp wireframe">
</div>
<div class="title">Figure 37. Wireframe of the Demo App</div>
</div>
<div class="paragraph">
<p>To make the column widths equal, define two <code>ColumnConstraint</code> objects and use a percentage specifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">ColumnConstraints col1 = new ColumnConstraints();
col1.setPercentWidth( 50 );
ColumnConstraints col2 = new ColumnConstraints();
col2.setPercentWidth( 50 );
gp.getColumnConstraints().addAll( col1, col2 );</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a screenshot of the finished example.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/constraintsgridpaneapp_finished.png" alt="constraintsgridpaneapp finished">
</div>
<div class="title">Figure 38. App With Extra Space Properly Allocated</div>
</div>
<div class="paragraph">
<p><code>GridPane</code> is an important control in developing JavaFX business applications.  When working on a requirement involving name / value pairs and a single record view, use <code>GridPane</code>.  While <code>GridPane</code> is easier to use than the <code>GridBagLayout</code> from Swing, I still find that the API is a little inconvenient (assigning own indexes, disassociated constraints).  Fortunately, there is Scene Builder which simplifies the construction of this form greatly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_completed_code_4">4.7.3. Completed Code</h4>
<div class="paragraph">
<p>The following is the completed code for the constraints GridPane example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ConstraintsGridPaneApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        VBox vbox = new VBox();

        GridPane gp = new GridPane();
        gp.setPadding( new Insets(10) );
        gp.setHgap( 4 );
        gp.setVgap( 10 );

        VBox.setVgrow(gp, Priority.ALWAYS );

        Label lblTitle = new Label("Support Ticket");

        Label lblEmail = new Label("Email");
        TextField tfEmail = new TextField();

        Label lblContract = new Label("Contract");
        TextField tfContract = new TextField();

        Label lblPriority = new Label("Priority");
        RadioButton rbMedium = new RadioButton("Medium");
        RadioButton rbHigh = new RadioButton("High");
        RadioButton rbLow = new RadioButton("Low");
        VBox priorityVBox = new VBox();
        priorityVBox.setSpacing( 2 );
        GridPane.setVgrow(priorityVBox, Priority.SOMETIMES);
        priorityVBox.getChildren().addAll( lblPriority, rbMedium, rbHigh, rbLow );

        Label lblSeverity = new Label("Severity");
        ObservableList&lt;String&gt; severities = FXCollections.observableArrayList("Blocker", "Workaround", "N/A");
        ComboBox&lt;String&gt; cbSeverity = new ComboBox&lt;&gt;(severities);

        Label lblCategory = new Label("Category");
        ObservableList&lt;String&gt; categories = FXCollections.observableArrayList("Bug", "Feature");
        ComboBox&lt;String&gt; cbCategory = new ComboBox&lt;&gt;(categories);

        Label lblProblem = new Label("Problem");
        TextField tfProblem = new TextField();

        Label lblDescription = new Label("Description");
        TextArea taDescription = new TextArea();

        gp.add( lblTitle,       0, 0);

        gp.add( lblEmail,       0, 1);
        gp.add(tfEmail,         0, 2);

        gp.add( lblContract,    0, 3 );
        gp.add( tfContract,     0, 4 );

        gp.add( priorityVBox,   0, 5);

        gp.add( lblSeverity,    1, 5);
        gp.add( cbSeverity,     1, 6);
        gp.add( lblCategory,    1, 7);
        gp.add( cbCategory,     1, 8);

        gp.add( lblProblem,     0, 9);
        gp.add( tfProblem,      0, 10);

        gp.add( lblDescription, 0, 11);
        gp.add( taDescription,  0, 12);

        GridPane.setColumnSpan( tfEmail, 2 );
        GridPane.setColumnSpan( tfContract, 2 );
        GridPane.setColumnSpan( tfProblem, 2 );

        GridPane.setRowSpan( priorityVBox, 4 );

        gp.setConstraints(taDescription,
                          0, 12,
                          2, 1,
                          HPos.LEFT, VPos.TOP,
                          Priority.SOMETIMES, Priority.ALWAYS);

        ColumnConstraints col1 = new ColumnConstraints();
        col1.setPercentWidth( 50 );
        ColumnConstraints col2 = new ColumnConstraints();
        col2.setPercentWidth( 50 );
        gp.getColumnConstraints().addAll( col1, col2 );

        Separator sep = new Separator(); // hr

        ButtonBar buttonBar = new ButtonBar();
        buttonBar.setPadding( new Insets(10) );

        Button saveButton = new Button("Save");
        Button cancelButton = new Button("Cancel");

        buttonBar.setButtonData(saveButton, ButtonBar.ButtonData.OK_DONE);
        buttonBar.setButtonData(cancelButton, ButtonBar.ButtonData.CANCEL_CLOSE);

        buttonBar.getButtons().addAll(saveButton, cancelButton);

        vbox.getChildren().addAll( gp, sep, buttonBar );

        Scene scene = new Scene(vbox);

        primaryStage.setTitle("Grid Pane App");
        primaryStage.setScene(scene);
        primaryStage.setWidth( 414 );
        primaryStage.setHeight( 736  );
        primaryStage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_anchorpane">4.8. AnchorPane</h3>
<div class="paragraph">
<p><code>AnchorPane</code> is a container control that defines its layout in terms of edges.  When placed in a container, the <code>AnchorPane</code> stretches to fill the available space.  The children of <code>AnchorPane</code> express their positions and sizes as distances from the edges: Top, Left, Bottom, Right.  If one or two anchor settings are placed on an <code>AnchorPane</code> child, the child will be fixed to that corner of the window.  If more than two anchor settings are used, the child will be stretched to fill the available horizontal and vertical space.</p>
</div>
<div class="paragraph">
<p>This mockup shows a <code>TextArea</code> surrounded by a set of controls: a <code>Hyperlink</code> and two status indicators.  Since the <code>TextArea</code> will contain all of the content, it should take up most of the space initially and should acquire any additional space from a resize.  On the periphery, there is a <code>Hyperlink</code> in the upper-right, a connection <code>Label</code> and <code>Circle</code> in the lower-right, and a status <code>Label</code> in the lower-left.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/anchorpaneapp_mockup.png" alt="anchorpaneapp mockup">
</div>
<div class="title">Figure 39. AnchorPane With TextArea</div>
</div>
<div class="sect3">
<h4 id="_anchors">4.8.1. Anchors</h4>
<div class="paragraph">
<p>To begin the layout, create an <code>AnchorPane</code> object and add it to the <code>Scene</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">AnchorPane ap = new AnchorPane();
Scene scene = new Scene(ap);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Anchors are set using static methods of the AnchorPane class.  The methods&#8201;&#8212;&#8201;one per edge&#8201;&#8212;&#8201;accept the <code>Node</code> and an offset.  For the <code>Hyperlink</code>, an anchor to the top edge and an anchor to the right edge will be set.  An offset of 10.0 is set for each edge so that the link is not compressed against the side.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Hyperlink signoutLink = new Hyperlink("Sign Out");

ap.getChildren().add( signoutLink );

AnchorPane.setTopAnchor( signoutLink, 10.0d );
AnchorPane.setRightAnchor( signoutLink, 10.0d );</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the screen is resized, the AnchorPane will resize and signoutLink will maintain its top-right position.  Because neither the left nor bottom anchors are specified, signoutLink will not be stretched.</p>
</div>
<div class="paragraph">
<p>Next, the connection <code>Label</code> and <code>Circle</code> are added.  These controls are wrapped in an <code>HBox</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Circle circle = new Circle();
circle.setFill(Color.GREEN );
circle.setRadius(10);

Label connLabel = new Label("Connection");

HBox connHBox = new HBox();
connHBox.setSpacing( 4.0d );
connHBox.setAlignment(Pos.BOTTOM_RIGHT);
connHBox.getChildren().addAll( connLabel, circle );

AnchorPane.setBottomAnchor( connHBox, 10.0d );
AnchorPane.setRightAnchor( connHBox, 10.0d );

ap.getChildren().add( connHBox );</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with signoutLink, connHBox is fixed to a place on the screen.  connHBox is set to be 10 pixels from the bottom edge and 10 pixels from the right edge.</p>
</div>
<div class="paragraph">
<p>The lower-left status <code>Label</code> is added.  The left and the bottom anchors are set.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Label statusLabel = new Label("Program status");
ap.getChildren().add( statusLabel );

AnchorPane.setBottomAnchor( statusLabel, 10.0d );
AnchorPane.setLeftAnchor( statusLabel, 10.0d );</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a screenshot of the finished app.  The status and control labels are at the bottom of the screen, pinned to the left and right edges respectively.  The <code>Hyperlink</code> is pinned to the top-right.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/anchorpaneapp_default.png" alt="anchorpaneapp default">
</div>
<div class="title">Figure 40. "AnchorPane App</div>
</div>
</div>
<div class="sect3">
<h4 id="_resizing">4.8.2. Resizing</h4>
<div class="paragraph">
<p>The controls on the periphery may vary in size. For example, a status message or a connection message may be longer.  However, the extra length can be accommodated in this layout by extending the bottom-left status <code>Label</code> to the right and by extending the bottom-right connection status <code>Label</code> to the left.  Resizing with this layout will move these controls in absolute terms, but they will adhere to their respective edges plus the offset.</p>
</div>
<div class="paragraph">
<p>That is not the case with the <code>TextArea</code>.  Because the <code>TextArea</code> may contain a lot of content, it should receive any extra space that the user gives the window.  This control will be anchored to all four corners of the <code>AnchorPane</code>.  This will cause the <code>TextArea</code> to resize when the window resizes.  The <code>TextArea</code> is fixed on the top-left and as the user drags the window handles to the bottom-right, the bottom-right corner of the <code>TextArea</code> moves as well.</p>
</div>
<div class="paragraph">
<p>This picture shows the result of two resize operations.  The top screenshot is a vertical resize from dragging the bottom edge of the window down.  The bottom screenshot is a horizontal resize from dragging the right edge of the window right.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/anchorpaneapp_resize.png" alt="anchorpaneapp resize">
</div>
<div class="title">Figure 41. "AnchorPane App Resized</div>
</div>
<div class="paragraph">
<p>The highlighted boxes show that the controls bordering the <code>TextArea</code> retain their positions relative to the edges.  The <code>TextArea</code> itself is resized based on the Window resize.  The top and bottom offsets of the <code>TextArea</code> account for the other controls so that they are not hidden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">TextArea ta = new TextArea();

AnchorPane.setTopAnchor( ta, 40.0d );
AnchorPane.setBottomAnchor( ta, 40.0d );
AnchorPane.setRightAnchor( ta, 10.0d );
AnchorPane.setLeftAnchor( ta, 10.0d );

ap.getChildren().add( ta );</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>AnchorPane</code> is a good choice when you have a mixture of resizable and fixed-position children.  Other controls like <code>VBox</code> and <code>HBox</code> with a <code>Priority</code> setting are preferred if there is only one child needing resizing.  Use these controls instead of <code>AnchorPane</code> with a single child that has all four anchors set.  Remember that to set an anchor on a child, you use a static method of the container class such as AnchorPane.setTopAnchor().</p>
</div>
</div>
<div class="sect3">
<h4 id="_completed_code_5">4.8.3. Completed Code</h4>
<div class="paragraph">
<p>The following is the completed code for the <code>AnchorPane</code> example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class AnchorPaneApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        AnchorPane ap = new AnchorPane();

        // upper-right sign out control
        Hyperlink signoutLink = new Hyperlink("Sign Out");

        ap.getChildren().add( signoutLink );

        AnchorPane.setTopAnchor( signoutLink, 10.0d );
        AnchorPane.setRightAnchor( signoutLink, 10.0d );

        // lower-left status label
        Label statusLabel = new Label("Program status");
        ap.getChildren().add( statusLabel );

        AnchorPane.setBottomAnchor( statusLabel, 10.0d );
        AnchorPane.setLeftAnchor( statusLabel, 10.0d );

        // lower-right connection status control
        Circle circle = new Circle();
        circle.setFill(Color.GREEN );
        circle.setRadius(10);

        Label connLabel = new Label("Connection");

        HBox connHBox = new HBox();
        connHBox.setSpacing( 4.0d );
        connHBox.setAlignment(Pos.BOTTOM_RIGHT);
        connHBox.getChildren().addAll( connLabel, circle );

        AnchorPane.setBottomAnchor( connHBox, 10.0d );
        AnchorPane.setRightAnchor( connHBox, 10.0d );

        ap.getChildren().add( connHBox );

        // top-left content; takes up extra space
        TextArea ta = new TextArea();
        ap.getChildren().add( ta );

        AnchorPane.setTopAnchor( ta, 40.0d );
        AnchorPane.setBottomAnchor( ta, 40.0d );
        AnchorPane.setRightAnchor( ta, 10.0d );
        AnchorPane.setLeftAnchor( ta, 10.0d );

        Scene scene = new Scene(ap);

        primaryStage.setTitle("AnchorPaneApp");
        primaryStage.setScene( scene );
        primaryStage.setWidth(568);
        primaryStage.setHeight(320);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tilepane">4.9. TilePane</h3>
<div class="paragraph">
<p>A <code>TilePane</code> is used for grid layout of equally sized cells.  The prefColumns and the prefRows properties define the number of rows and columns in the grid.  To add Nodes to <code>TilePane</code>, access the children property and call the add() or addAll() method.  This is easier to use than <code>GridPane</code> which requires explicit setting of the row / column position of Nodes.</p>
</div>
<div class="paragraph">
<p>This screenshot shows a <code>TilePane</code> defined as a three-by-three grid.  The <code>TilePane</code> contains nine <code>Rectangle</code> objects.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/threebythreeapp_screenshot.png" alt="threebythreeapp screenshot">
</div>
<div class="title">Figure 42. A 3x3 TilePane</div>
</div>
<div class="paragraph">
<p>The complete code for the three-by-three grid follows.  The children property of the <code>TilePane</code> provides the addAll() method to which <code>Rectangle</code> objects are added.  The tileAlignment property positions each of the <code>Rectangle</code> objects in the center of its corresponding tile.</p>
</div>
<div class="listingblock">
<div class="title">ThreeByThreeApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ThreeByThreeApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        TilePane tilePane = new TilePane();
        tilePane.setPrefColumns(3);
        tilePane.setPrefRows(3);
        tilePane.setTileAlignment( Pos.CENTER );

        tilePane.getChildren().addAll(
                new Rectangle(50, 50, Color.RED),
                new Rectangle( 50, 50, Color.GREEN ),
                new Rectangle( 50, 50, Color.BLUE ),
                new Rectangle( 50, 50, Color.YELLOW ),
                new Rectangle( 50, 50, Color.CYAN ),
                new Rectangle( 50, 50, Color.PURPLE ),
                new Rectangle( 50, 50, Color.BROWN ),
                new Rectangle( 50, 50, Color.PINK ),
                new Rectangle( 50, 50, Color.ORANGE )
        );

        Scene scene = new Scene(tilePane);
        scene.setFill(Color.LIGHTGRAY);

        primaryStage.setTitle("3x3");
        primaryStage.setScene( scene );
        primaryStage.show();
    }

    public static void main(String[] args) {launch(args);}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since all of the <code>Node</code> contents of the <code>TilePane</code> were equally-sized Rectangles, the layout is packed together and the tileAlignment setting is not noticeable.  When the tilePrefHeight and tilePrefWidth properties are set to be larger than the contents&#8201;&#8212;&#8201;say 100x100 tiles containing 50x50 Rectangles&#8201;&#8212;&#8201;tileAlignment will determine how the extra space will be used.</p>
</div>
<div class="paragraph">
<p>See the following modified ThreeByThreeApp class that sets the tilePrefHeight and tilePrefWidth.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        tilePane.setPrefTileHeight(100);
        tilePane.setPrefTileWidth(100);</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/threebythreeapp_screenshot_space.png" alt="threebythreeapp screenshot space">
</div>
<div class="title">Figure 43. 3x3 TilePane (Modified)</div>
</div>
<div class="paragraph">
<p>In the prior screenshots, nine Rectangle objects were provided to the three-by-three grid.  If the contents do not match up with the <code>TilePane</code> definition, those cells will collapse.  This modification adds only five Rectangles rather than nine.  The first row contains has content for all three tiles.  The second row has content for only the first two files.  The third row is missing entirely.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/threebythreeapp_screenshot_sparse.png" alt="threebythreeapp screenshot sparse">
</div>
<div class="title">Figure 44. 3x3 App - Sparse</div>
</div>
<div class="paragraph">
<p>There is a property "orientation" that instructs <code>TilePane</code> to add items row-by-row (HORIZONTAL, the default) or column-by-column (VERTICAL).  If VERTICAL is used, then the first column will have three elements, the second column will have only the top two, and the third column will be missing.  This screenshot shows the five Rectangles being added to the three-by-three grid (nine tiles) using VERTICAL orientation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/threebythreeapp_screenshot_vert.png" alt="threebythreeapp screenshot vert">
</div>
<div class="title">Figure 45. 3x3 App - VERTICAL</div>
</div>
<div class="sect3">
<h4 id="_algorithms">4.9.1. Algorithms</h4>
<div class="paragraph">
<p>It is possible to create JavaFX grid layouts with other containers like <code>GridPane</code>, <code>VBox</code>, and <code>HBox</code>.  TilePane is a convenience that defines the grid layout in advance and makes adding items to the grid a simple add() or addAll() call.  Unlike a grid layout built with a combination of nested <code>VBox</code> and <code>HBox</code> containers, the <code>TilePane</code> contents are direct children.  This makes it easy to loop over the children during event processing which helps implement certain algorithms.</p>
</div>
<div class="paragraph">
<p>This example app places four Circles in a <code>TilePane</code>.  An event handler is attached to the <code>TilePane</code> which looks for a selection of one of the Circles.  If a Circle is selected, it is dimmed through the opacity setting.  If the Circle is re-selected, its original color is restored.  This screenshot shows the app with the blue <code>Circle</code> appearing purple-ish because it has been selected.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/tileapp.png" alt="tileapp">
</div>
<div class="title">Figure 46. TileApp with Blue Circle Selected</div>
</div>
<div class="paragraph">
<p>The program begins by adding the items and setting a custom property "selected" using the Java 8 Stream API.</p>
</div>
<div class="listingblock">
<div class="title">TileApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        TilePane tilePane = new TilePane();
        tilePane.setPrefColumns(2);
        tilePane.setPrefRows(2);
        tilePane.setTileAlignment( Pos.CENTER );

        Circle redCircle = new Circle(50, Color.RED);
        Circle greenCircle = new Circle( 50, Color.GREEN );
        Circle blueCircle = new Circle( 50, Color.BLUE );
        Circle yellowCircle = new Circle( 50, Color.YELLOW );

        List&lt;Circle&gt; circles = new ArrayList&lt;&gt;();
        circles.add( redCircle );
        circles.add( greenCircle );
        circles.add( blueCircle );
        circles.add( yellowCircle );

        circles
                .stream()
                .forEach( (c) -&gt; c.getProperties().put( "selected", Boolean.FALSE ));

        tilePane.getChildren().addAll(
               circles
        );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, the event handler is attached to the mouse event.  This is also using Java 8 Streams.  The filter() method is determining whether or not a <code>Circle</code> is selected using the Node.contains() method on converted coordinates.  If that expression passes, findFirst() is used to retrieve the first (and in this case, only) match.  The block of code in ifPresent() sets the "selected" flag for keeping track of the <code>Circle</code> state and tweaks the opacity.</p>
</div>
<div class="listingblock">
<div class="title">TileApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    tilePane.setOnMouseClicked(

        (evt) -&gt; tilePane
                    .getChildren()
                    .stream()
                    .filter( c -&gt;
                        c.contains(
                          c.sceneToLocal(evt.getSceneX(), evt.getSceneY(), true)
                        )
                     )
                    .findFirst()
                    .ifPresent(
                            (c) -&gt; {
                                Boolean selected = (Boolean) c.getProperties().get("selected");
                                if( selected == null || selected == Boolean.FALSE ) {
                                    c.setOpacity(0.3d);
                                    c.getProperties().put("selected", Boolean.TRUE);
                                } else {
                                    c.setOpacity( 1.0d );
                                    c.getProperties().put("selected", Boolean.FALSE);
                                }
                            }
                    )
    );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_another_handler">4.9.2. Another Handler</h4>
<div class="paragraph">
<p>Since the program saves the Circles in a Java Collections <code>List</code>, the <code>TilePane</code> contents can be replaced with repeated allAll() calls.  This event handler is triggered by the user pressing an "S" in the <code>Scene</code>.  The contents of the backing <code>List</code> are shuffled and re-added to the <code>TilePane</code>.</p>
</div>
<div class="listingblock">
<div class="title">TileApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        scene.setOnKeyPressed(
                (evt) -&gt; {
                    if( evt.getCode().equals(KeyCode.S) ) {
                        Collections.shuffle( circles );
                        tilePane.getChildren().clear();
                        tilePane.getChildren().addAll( circles );
                    }
                }
        );</code></pre>
</div>
</div>
<div class="paragraph">
<p>While feasible, a grid built with VBoxes and HBoxes would be slightly more difficult because of the nested structures.  Also, <code>TilePane</code> will not stretch the contents to fill extra space, making it suitable for composite controls that need to be packed together for ergonomic reasons.</p>
</div>
<div class="paragraph">
<p><code>TilePane</code> creates a grid based layout of equally sized cells.  Contents are added to the <code>TilePane</code> based on the prefRows, prefColumns, and orientation settings.  If the grid contains more tiles than added Nodes, there will be gaps in the layout and rows and columns may collapse if no content was provided whatsoever.  This post showed a pair of algorithms that were implemented easily because of TilePane&#8217;s simply interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="_complete_code_6">4.9.3. Complete Code</h4>
<div class="paragraph">
<p>The complete code for TileApp follows.</p>
</div>
<div class="listingblock">
<div class="title">TileApp.java (Complete)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class TileApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        TilePane tilePane = new TilePane();
        tilePane.setPrefColumns(2);
        tilePane.setPrefRows(2);
        tilePane.setTileAlignment( Pos.CENTER );

        Circle redCircle = new Circle(50, Color.RED);
        Circle greenCircle = new Circle( 50, Color.GREEN );
        Circle blueCircle = new Circle( 50, Color.BLUE );
        Circle yellowCircle = new Circle( 50, Color.YELLOW );

        List&lt;Circle&gt; circles = new ArrayList&lt;&gt;();
        circles.add( redCircle );
        circles.add( greenCircle );
        circles.add( blueCircle );
        circles.add( yellowCircle );

        circles
                .stream()
                .forEach( (c) -&gt; c.getProperties().put( "selected", Boolean.FALSE ));

        tilePane.getChildren().addAll(
               circles
        );

        tilePane.setOnMouseClicked(

            (evt) -&gt; tilePane
                        .getChildren()
                        .stream()
                        .filter( c -&gt;
                            c.contains(
                              c.sceneToLocal(evt.getSceneX(), evt.getSceneY(), true)
                            )
                         )
                        .findFirst()
                        .ifPresent(
                                (c) -&gt; {
                                    Boolean selected = (Boolean) c.getProperties().get("selected");
                                    if( selected == null || selected == Boolean.FALSE ) {
                                        c.setOpacity(0.3d);
                                        c.getProperties().put("selected", Boolean.TRUE);
                                    } else {
                                        c.setOpacity( 1.0d );
                                        c.getProperties().put("selected", Boolean.FALSE);
                                    }
                                }
                        )
        );

        Scene scene = new Scene(tilePane);

        scene.setOnKeyPressed(
                (evt) -&gt; {
                    if( evt.getCode().equals(KeyCode.S) ) {
                        Collections.shuffle( circles );
                        tilePane.getChildren().clear();
                        tilePane.getChildren().addAll( circles );
                    }
                }
        );

        primaryStage.setTitle("TileApp");
        primaryStage.setScene( scene );
        primaryStage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_titledpane">4.10. TitledPane</h3>
<div class="paragraph">
<p>A <code>TitledPane</code> is a <code>Node</code> container matched with a <code>Label</code> and an optional control for showing and hiding the container contents.  Since <code>TitledPane</code> is limited to a single <code>Node</code>, it is often paired with a container supporting multiple children like a <code>VBox</code>.  Functionally, it can hide non-essential details of a form or group related controls.</p>
</div>
<div class="paragraph">
<p>This example is a web search app that accepts a set of keywords in a <code>TextField</code>.  The user presses the Search Button to run a search.  The Advanced <code>TitlePane</code> expands to provide additional search arguments.</p>
</div>
<div class="paragraph">
<p>This screenshot shows the un-expanded state which is the view for a user executing a simple keyword search.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/titledpaneapp_unexpanded.png" alt="titledpaneapp unexpanded">
</div>
<div class="title">Figure 47. Unexpanded TitledPane</div>
</div>
<div class="paragraph">
<p>This next screenshot shows the view for a user requiring advanced search parameters.  The Advanced TitledPane was expanded by pressing on the arrow in the <code>TitledPane</code> header.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/titledpaneapp_expanded.png" alt="titledpaneapp expanded">
</div>
<div class="title">Figure 48. Expanded TitledPane Shows More Controls</div>
</div>
<div class="paragraph">
<p>To create a <code>TitledPane</code>, use the constructor to pass in a String title and a single <code>Node</code> child.  The default constructor can also be used and the title and <code>Node</code> set using setters.  This code uses the parameterized constructor.  A <code>VBox</code> is the single child of the <code>TitledPane</code>.  However, the <code>VBox</code> itself contains several controls.</p>
</div>
<div class="listingblock">
<div class="title">TitledPaneApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        VBox advancedVBox = new VBox(
                new Label("All Keywords"),
                new CheckBox(),
                new Label("Domains"),
                new TextField(),
                new Label("Time"),
                new ComboBox&lt;&gt;(
                    FXCollections.observableArrayList( "Day", "Month", "Year" )
                )
        );

        TitledPane titledPane = new TitledPane(
                "Advanced",
                advancedVBox
        );
        titledPane.setExpanded( false );</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the <code>TitledPane</code> will be expanded.  This does not fit the use case of hiding non-essential information, so the expanded property is set after the object is created.</p>
</div>
<div class="sect3">
<h4 id="_collapsible">4.10.1. Collapsible</h4>
<div class="paragraph">
<p>Another property of <code>TitledPane</code> is collapsible.  By default, the <code>TitledPane</code> collapsible property is set to true.  However, a quick grouping can be provided to controls that are not collapsible.  The following screenshot demonstrates this use case.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout/titledpaneapp_noncollapsible.png" alt="titledpaneapp noncollapsible">
</div>
<div class="title">Figure 49. Collapsible Set to False</div>
</div>
<div class="paragraph">
<p>This code sets the collapsible flag after the constructor is called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">            VBox securityVBox = new VBox(
                    new Label("Owner"),
                    new TextField(),
                    new Label("Access Control"),
                    new TextField()
            );

            TitledPane tp = new TitledPane("Security", securityVBox);
            tp.setCollapsible( false );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_complete_code_7">4.10.2. Complete Code</h4>
<div class="paragraph">
<p>The following is the complete code for the first demonstration involving the hidden search parameters "TitledPaneApp".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class TitledPaneApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        VBox vbox = new VBox(
                new Label("Keywords" ),
                new TextField()
        );

        vbox.setPadding( new Insets(10) );
        vbox.setSpacing( 10 );

        VBox advancedVBox = new VBox(
                new Label("All Keywords"),
                new CheckBox(),
                new Label("Domains"),
                new TextField(),
                new Label("Time"),
                new ComboBox&lt;&gt;(
                    FXCollections.observableArrayList( "Day", "Month", "Year" )
                )
        );

        TitledPane titledPane = new TitledPane(
                "Advanced",
                advancedVBox
        );
        titledPane.setExpanded( false );

        vbox.getChildren().addAll(
                titledPane,
                new Button("Search")
        );

        Scene scene = new Scene( vbox );

        primaryStage.setTitle( "TitledPaneApp" );
        primaryStage.setScene( scene );
        primaryStage.setWidth( 568 );
        primaryStage.setHeight( 320 );
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_css">5. CSS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Placeholder whilst things get built&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">6. Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Placeholder whilst things get built&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_structure">7. Application Structure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_mvvm_pattern">7.1. The MVVM Pattern</h3>
<div class="paragraph">
<p>Model-View-ViewModel (MVVM) is a software architecture that separates UI controls (the View) from data access and business logic (the Model).  The separation helps larger applications during the maintenance phase.  With MVVM, View changes&#8201;&#8212;&#8201;especially those that are purely cosmetic&#8201;&#8212;&#8201;can be made without fear of introducing side effects.   Changes to the Model (usually less volatile than the View) can be applied more easily throughout the application because MVVM promotes reuse.</p>
</div>
<div class="paragraph">
<p>In between the View and the Model is the ViewModel.  The ViewModel mediates between the View and the Model, yet contains no references to the View.  This enables ViewModel sharing which is useful when two Views show similar data.</p>
</div>
<div class="paragraph">
<p>This article presents a simplified MVVM example.  An Employment Request Form submits several data elements to a back-end service.  This screenshot shows the application with the name, position, and annual salary data elements set.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/mvvmapp_screenshot.png" alt="mvvmapp screenshot">
</div>
<div class="title">Figure 50. Employment Request Form</div>
</div>
<div class="paragraph">
<p>After entering the data and pressing Save, the Model object responds with a println().</p>
</div>
<div class="listingblock">
<div class="title">Program Output</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">saving EmploymentRequest{name='Carl', position='Pizza Dough Thrower', annualSalary=30000.0}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the Reset button is pressed after filling in the TextFields, the form is restored to its original values: empty name and position and an annualSalary of 0.</p>
</div>
<div class="paragraph">
<p>The Cancel button ends the application.</p>
</div>
<div class="sect3">
<h4 id="_structure_2">7.1.1. Structure</h4>
<div class="paragraph">
<p>A simplified MVVM application is composed of the following types of classes</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">App</dt>
<dd>
<p>Main entry point</p>
</dd>
<dt class="hdlist1">View</dt>
<dd>
<p>UI controls</p>
</dd>
<dt class="hdlist1">Model</dt>
<dd>
<p>Function call to business logic and data access</p>
</dd>
<dt class="hdlist1">ViewModel</dt>
<dd>
<p>Contains screen state and UI logic</p>
</dd>
<dt class="hdlist1">Domain object</dt>
<dd>
<p>UI-neutral transfer object</p>
</dd>
<dt class="hdlist1">Converter</dt>
<dd>
<p>Helper class for ViewModel to Model communication</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This UML shows the structure of the Employment Request Form.  The View class is EmploymentRequestView which contains the UI control objects like the Name <code>TextField</code>.  The ViewModel class is EmploymentRequestViewModel and contains JavaFX properties.  The Model class is EmploymentRequestModel with a single method for persisting the form.  EmploymentRequestConverter is a helper class.  EmploymentRequest is a POJO containing data fields.  MVVMApp is the main entry point, a JavaFX Application subclass.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/mvvmapp_uml.png" alt="mvvmapp uml">
</div>
<div class="title">Figure 51. UML Class Model of Application</div>
</div>
</div>
<div class="sect3">
<h4 id="_view">7.1.2. View</h4>
<div class="paragraph">
<p>In MVVM, the View class is responsible for the UI controls and nothing else.  Event handlers attached to UI controls delegate immediately to the ViewModel.  JavaFX data binding updates the UI with Model changes.  In the Employment Request Form, three TextFields gather input from the user: tfName, tfPosition, tfAnnualSalary.  Three Buttons initiate operations on the application: btnSave, btnCancel, btnReset.  This is the beginning of the EmploymentRequestView class.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestView.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class EmploymentRequestView extends VBox {

    private GridPane gp = new GridPane();

    private TextField tfName = new TextField();
    private TextField tfPosition = new TextField();
    private TextField tfAnnualSalary = new TextField();

    private Button btnSave = new Button("Save");
    private Button btnCancel = new Button("Cancel");
    private Button btnReset = new Button("Reset");

    public EmploymentRequestView() {
        createView();
        bindViewModel();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The View knows about the ViewModel and uses JavaFX binding to synchronize the UI with the ViewModel.  This demo treats the ViewModel as a prototype object, created when the View object is created.  Alternatively, the ViewModel can be a singleton or provided by CDI.  Each UI field is bound bi-directionally to the ViewModel.  As the UI changes&#8201;&#8212;&#8201;say through entering a value in tfName&#8201;&#8212;&#8201;the corresponding field in the ViewModel is updated.  The more complicated expression for the tfAnnualSalary field is needed to convert the String-based <code>TextField</code> into a DoubleProperty.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestView.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private final EmploymentRequestViewModel viewModel =
            new EmploymentRequestViewModel();

    private void bindViewModel() {

        tfName.textProperty().bindBidirectional(viewModel.nameProperty());

        tfPosition.textProperty().bindBidirectional(viewModel.positionProperty());

        Bindings.bindBidirectional(
                tfAnnualSalary.textProperty(),
                viewModel.annualSalaryProperty(),
                new NumberStringConverter()
        );
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The UI in this demo is built in code.  The following createView() method handles the layout of the form and puts the core controls (such as tfName and btnSave) in containers.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestView.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void createView() {
        VBox gpwrap = new VBox();
        gpwrap.setAlignment( Pos.CENTER );

        gp.setPadding( new Insets(40) );
        gp.setVgap( 4 );
        gp.add(new Label("Name"), 0, 0);                  gp.add(tfName, 1, 0);
        gp.add(new Label("Desired Position"), 0, 1);      gp.add(tfPosition, 1, 1);
        gp.add(new Label("Current Annual Salary"), 0, 2); gp.add(tfAnnualSalary, 1, 2);

        final ColumnConstraints col = new ColumnConstraints();
        col.setPercentWidth( 50 );

        gp.getColumnConstraints().addAll( col, col );

        gpwrap.getChildren().add( gp );

        VBox.setVgrow( gpwrap, Priority.ALWAYS );

        btnSave.setOnAction( this::save );
        btnCancel.setOnAction( this::cancel );
        btnReset.setOnAction( this::reset );

        btnSave.setDefaultButton(true);

        ButtonBar buttonBar = new ButtonBar();
        buttonBar.setPadding( new Insets(20.0d) );
        ButtonBar.setButtonData(btnSave, ButtonBar.ButtonData.OK_DONE);
        ButtonBar.setButtonData(btnCancel, ButtonBar.ButtonData.CANCEL_CLOSE);
        ButtonBar.setButtonData(btnReset, ButtonBar.ButtonData.OTHER);

        buttonBar.getButtons().addAll( btnSave, btnCancel, btnReset );

        this.getChildren().addAll(
                gpwrap,
                new Separator(),
                buttonBar);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class ends with handlers for the Buttons.  These handlers delegate their actions to the ViewModel.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestView.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void save(ActionEvent evt) { viewModel.save(); }

    private void cancel(ActionEvent evt) {
        Platform.exit();
    }

    private void reset(ActionEvent evt) { viewModel.reset(); }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_fxml_and_scene_builder">FXML and Scene Builder</h5>
<div class="paragraph">
<p>In this example, the UI is built in code.  Scene Builder is a design-oriented alternative that can be more productive.  To convert this example to FXML, the product of Scene Builder, you would build the UI in the tool and annotate the fields and methods of the EmploymentRequestView class with @FXML.  See the following screenshot for how the demo looks in Scene Builder.  This is informational only and not part of the working demo.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/mvvmapp_sb.png" alt="mvvmapp sb">
</div>
<div class="title">Figure 52. Scene Builder Could Also Implement the View</div>
</div>
<div class="paragraph">
<p>Notice that the right "half" of the UML diagram would not be changed by switching the View implementation from code to Scene Builder.  A sign of a good design is when alternative presentations can be supported easily.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_viewmodel">7.1.3. ViewModel</h4>
<div class="paragraph">
<p>The ViewModel is a layer that interacts with both the View and the Model.  In this simple presentation, the value of such a layer is limited; one could just unpack the TextFields into the Model in the <code>Button</code> handler.  As the UI becomes more complex, it is useful to have a plainer, more business-oriented object to work with.  While there is a one-to-one correspondence between View, Model, and ViewModel, that may not always be the case.</p>
</div>
<div class="paragraph">
<p>Handling a many-to-many relationship is key for the ViewModel.  There may be many Views that working with the same Model element.  Multiple models may contribute to a single View.</p>
</div>
<div class="paragraph">
<p>This ViewModel looks like the domain object that will be presented later with one key difference: JavaFX Binding.  EmploymentRequestViewModel was bound to the EmploymentRequestView UI controls and the methods of EmploymentRequestViewModel will have access to all of the information within the save() method.  No extra marshaling of arguments is needed.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestViewModel.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class EmploymentRequestViewModel {

    private final StringProperty name = new SimpleStringProperty("");
    private final StringProperty position = new SimpleStringProperty("");
    private final DoubleProperty annualSalary = new SimpleDoubleProperty();

    private final EmploymentRequestConverter converter =
            new EmploymentRequestConverter();

    private final EmploymentRequestModel model = new EmploymentRequestModel();

    public String getName() {
        return name.get();
    }

    public StringProperty nameProperty() {
        return name;
    }

    public void setName(String name) {
        this.name.set(name);
    }

    public String getPosition() {
        return position.get();
    }

    public StringProperty positionProperty() {
        return position;
    }

    public void setPosition(String position) {
        this.position.set(position);
    }

    public double getAnnualSalary() {
        return annualSalary.get();
    }

    public DoubleProperty annualSalaryProperty() {
        return annualSalary;
    }

    public void setAnnualSalary(double annualSalary) {
        this.annualSalary.set(annualSalary);
    }

    public void save() {
        EmploymentRequest data = converter.toEmploymentRequest( this );
        model.save( data );
    }

    public void reset() {
        this.name.set("");
        this.position.set("");
        this.annualSalary.set(0.0d);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both the Converter and the Model have been added to this ViewModel as prototypes, meaning that they were created when the ViewModel was created.</p>
</div>
<div class="sect4">
<h5 id="_converter">Converter</h5>
<div class="paragraph">
<p>The Converter is a class the translates between ViewModel and domain object.  In this app, there is a single toEmploymentRequest() method that creates an object from the ViewModel fields.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestConverter.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class EmploymentRequestConverter {

    public EmploymentRequest toEmploymentRequest(EmploymentRequestViewModel viewModel) {
        return new EmploymentRequest(
                viewModel.getName(),
                viewModel.getPosition(),
                viewModel.getAnnualSalary()
        );
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_model_2">7.1.4. Model</h4>
<div class="paragraph">
<p>Finally, the Model persists the information.  This Model example has a single mocked method which will verify that it receives the correct data for the save() operation.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequestModel.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class EmploymentRequestModel {

    public void save(EmploymentRequest req) {
        System.out.println("saving " + req);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the plain Java object used to transport data from the Model to the UI.</p>
</div>
<div class="listingblock">
<div class="title">EmploymentRequest.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class EmploymentRequest {

    private final String name;
    private final String position;
    private final Double annualSalary;

    public EmploymentRequest(String name,
                             String position,
                             Double annualSalary) {
        this.name = name;
        this.position = position;
        this.annualSalary = annualSalary;
    }

    public String getName() {
        return name;
    }

    public String getPosition() {
        return position;
    }

    public Double getAnnualSalary() {
        return annualSalary;
    }

    @Override
    public String toString() {
        return "EmploymentRequest{" +
                "name='" + name + '\'' +
                ", position='" + position + '\'' +
                ", annualSalary=" + annualSalary +
                '}';
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JavaFX provides developers with a powerful toolkit to build applications.  However, a design is still needed for an effective program.  MVVM is an architectural pattern that separates pure UI classes called Views from pure data classes called Models.  In the middle sits the ViewModel which relies heavily on the data binding in JavaFX.</p>
</div>
</div>
<div class="sect3">
<h4 id="_further_work">7.1.5. Further Work</h4>
<div class="paragraph">
<p>Sometimes, the View needs to know of a Model change.  Because MVVM dictates a one-way control flow&#8201;&#8212;&#8201;View to ViewModel to Model and not the reverse&#8201;&#8212;&#8201;a different mechanism than data binding is needed to make the ViewModel aware of Model changes.  A publishing / subscribing library can be used for this requirement which would broker the Model/ViewModel interaction.  ViewModel would receive a notification from the Model and the Model would not require a reference to the ViewModel object.</p>
</div>
<div class="paragraph">
<p>To read more about MVVM and JavaFX, check out the mvvmFX project.  The examples in that project provided the basis for this demonstration.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/sialcasa/mvvmFX">mvvmFX</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_completed_code_6">7.1.6. Completed Code</h4>
<div class="paragraph">
<p>The completed code in this example is available as a Gradle project here.  There are two examples in the JAR.  Run the class net.bekwam.bkcourse.mvvmapp.MVVMApp.</p>
</div>
<div class="paragraph">
<p><a href="https://courses.bekwam.net/public_tutorials/source/bkcourse_mvvmapp_sources.zip">bkcourse_mvvmapp_sources.zip</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_model_change_with_mvvm">7.2. Model Change with MVVM</h3>
<div class="paragraph">
<p>The previous article showed how to add a JavaFX binding-based ViewModel to an application architecture.  However, the Model presented was a simple service call.  This expands on the prior concepts and adds</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Asynchrony,</p>
</li>
<li>
<p>A <code>ProgressBar</code> and status <code>Label</code>, and</p>
</li>
<li>
<p>Event broadcasting.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All operations taking more than a few milliseconds should be run on a separate <code>Thread</code>.  Something that runs quickly but involves IO or the network often turns into a performance problem as code moves to new computers and new network configurations.  A JavaFX <code>Task</code> is used to invoke the Model operation.  While this potentially long process is running, feedback is given to the user via a <code>ProgressBar</code> and <code>Label</code>.  The status <code>Label</code> conveys messages to the user from the JavaFX <code>Task</code>.</p>
</div>
<div class="paragraph">
<p>It is important that the Model not hold a reference to the ViewModel, so an event notification scheme is introduced.  The ViewModel listens for an EVENT_MODEL_UPDATE message from the Model.  Although this example uses only one ViewModel, this scheme makes it possible for more than one ViewModel to be aware of data changes from a single Model component.</p>
</div>
<div class="sect3">
<h4 id="_demo_program">7.2.1. Demo Program</h4>
<div class="paragraph">
<p>The demo program in this section is a URL tester.  The user enters a URL in the <code>TextField</code> and presses the Submit <code>Button</code>.  If the HTTP request to the specified URL returns successfully, the HTTP response status code is displayed alongside the number of milliseconds the request took.  This screenshot shows a successful usage.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/modelchangeapp_screenshot_done.png" alt="modelchangeapp screenshot done">
</div>
<div class="title">Figure 53. A Successful Run</div>
</div>
<div class="paragraph">
<p>The UI remains responsive throughout the request.  The responsiveness comes from the use of a JavaFX <code>Task</code> to run the URL retrieval on a background thread.  To make the user aware that processing is occurring, UI controls are tied to the properties of the <code>Task</code> through JavaFX binding.  This screenshot shows the feedback the user receives while the <code>Task</code> runs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/modelchangeapp_screenshot_inprogress.png" alt="modelchangeapp screenshot inprogress">
</div>
<div class="title">Figure 54. In-Progress View of a Retrieval</div>
</div>
<div class="paragraph">
<p>When the Submit <code>Button</code> is pressed, a pair of controls are displayed: a <code>ProgressBar</code> and a <code>Label</code>.  Both controls are updated with information about the running background <code>Thread</code>.</p>
</div>
<div class="paragraph">
<p>Errors in the URL retrieval are handled by passing an alternate response object out of the Model.  In the successful case, the Model returned the HTTP status code and elapsed time.  In the error case, the Model sets a flag and returns an error message.  This screenshot shows an error dialog produced by the View in response to an error in the Model.  The errorMessage is from the message property of the thrown Exception.  If needed, additional fields like the Exception class name can be added.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/modelchangeapp_screenshot_err.png" alt="modelchangeapp screenshot err">
</div>
<div class="title">Figure 55. Error Produced by Model</div>
</div>
</div>
<div class="sect3">
<h4 id="_design">7.2.2. Design</h4>
<div class="paragraph">
<p>The demo program consists of a single View / ViewModel / Model triple.  The View communicates with the ViewModel through JavaFX binding.  UI controls in the View are bound to JavaFX properties in the ViewModel.  Event handlers in the View delegate to methods in the ViewModel.  The ViewModel forms an asynchronous command which interacts with the Model.  The Model communicates indirectly with the ViewModel through a notification subsystem rather than an object reference.</p>
</div>
<div class="paragraph">
<p>This is a UML class model of the program.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/modelchangeapp_uml.png" alt="modelchangeapp uml">
</div>
<div class="title">Figure 56. Class Model of MVVM App</div>
</div>
<div class="paragraph">
<p>URLTestView is the View component and contains the UI controls.  The ViewModel contains properties for the domain&#8201;&#8212;&#8201;url, last status code, last elapsed time&#8201;&#8212;&#8201;and for the screen state such as urlTestTaskRunning.  Model contains a service call and works with a UI-neutral POJO URLTestObject.  Communication between the Model and the ViewModel is brokered through a Notifications singleton which has methods for publishing (for the Model) and subscribing (for the ViewModel).</p>
</div>
<div class="paragraph">
<p>This sequence diagram shows how the app wires itself up and the interactions that follow from a test operation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/modelchangeapp_uml_sd.png" alt="modelchangeapp uml sd">
</div>
<div class="title">Figure 57. Sequence Diagram of Successful Retrieval</div>
</div>
<div class="paragraph">
<p>After all the objects are created, the user initiates a test operation.  This results in a TestURLCommand object being created which is a JavaFX <code>Service</code>.  The service invokes a Model method testURL().  When testURL() finishes, it publishes a notification.  This notification triggers a call to the ViewModel to refresh itself which uses a second call to the Model.  The ViewModel refresh sets ViewModel JavaFX properties which automatically update the View.</p>
</div>
</div>
<div class="sect3">
<h4 id="_view_2">7.2.3. View</h4>
<div class="paragraph">
<p>The View is a StackPane containing the <code>TextField</code> that will gather the URL input and a Submit <code>Button</code>.  A <code>StackPane</code> was used so that the temporary status display could be added without breaking the centering of the main UI controls.  The <code>HBox</code> containing the status <code>Label</code> and <code>ProgressBar</code> is always present in the lower-left, but hidden unless a <code>Task</code> is running.</p>
</div>
<div class="listingblock">
<div class="title">URLTestView.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class URLTestView extends StackPane {

    private final URLTestViewModel testViewModel =
            new URLTestViewModel();

    public URLTestView() {

        Label lblURL = new Label("URL to Test");
        TextField tfURL = new TextField();
        Button btnTest = new Button("Test");
        Label lblStatus = new Label("");
        Label lblLoadTime = new Label("");
        HBox resultHBox = new HBox(lblStatus, lblLoadTime);
        resultHBox.setSpacing(10);

        VBox vbox = new VBox( lblURL, tfURL, btnTest, resultHBox );
        vbox.setPadding( new Insets(40) );
        vbox.setSpacing( 10 );
        vbox.setAlignment(Pos.CENTER_LEFT);

        Label lblTaskStatus = new Label("");
        ProgressBar pb = new ProgressBar();
        HBox statusHBox = new HBox(pb, lblTaskStatus);
        statusHBox.setSpacing(4);
        statusHBox.setPadding(new Insets(4));
        statusHBox.setMaxHeight( 20 );

        StackPane.setAlignment(statusHBox, Pos.BOTTOM_LEFT );

        this.getChildren().addAll( vbox, statusHBox );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The URLTestViewModel object is created in this class.  Alternatively, dependency injection can be used to distribute the same ViewModel object among other Views.</p>
</div>
<div class="paragraph">
<p>The URLTestView constructor continues with several binding expressions.  These link the UI controls to the ViewModel properties.</p>
</div>
<div class="listingblock">
<div class="title">URLTestView.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        lblStatus.textProperty().bind( testViewModel.statusCodeProperty() );
        lblLoadTime.textProperty().bind( testViewModel.loadTimeProperty() );
        testViewModel.urlProperty().bind( tfURL.textProperty() );

        statusHBox.visibleProperty().bind(testViewModel.urlTestTaskRunningProperty() );
        pb.progressProperty().bind( testViewModel.urlTestTaskProgressProperty() );
        lblTaskStatus.textProperty().bind( testViewModel.urlTestTaskMessageProperty());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above statements register the UI controls for changes to the corresponding property in the ViewModel, except for tfURL.  tfURL uses a different binding direction since it is producing the value for the ViewModel.  In some cases, the binding may need to be bi-directional if a control can both be manipulated by the user and set from the ViewModel.</p>
</div>
<div class="paragraph">
<p>The action which initiates the testURL() operation is mapped to the Submit <code>Button</code>.</p>
</div>
<div class="listingblock">
<div class="title">URLTestView.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        btnTest.setOnAction( (evt) -&gt; testViewModel.test() );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The URLTestView constructor finishes with a special ChangeListener binding to a ViewModel property. This is a notification that an error has occurred.  When the errorMessage property of the ViewModel is notified, the View displays a popup dialog.</p>
</div>
<div class="listingblock">
<div class="title">URLTestView.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        testViewModel.errorMessageProperty().addListener(
                (obs,ov,nv) -&gt; {
                    if( nv != null &amp;&amp; !nv.isEmpty() ) {
                        Alert alert = new Alert(
                                Alert.AlertType.ERROR, nv
                        );
                        alert.showAndWait();
                    }
                }
        );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_viewmodel_2">7.2.4. ViewModel</h4>
<div class="paragraph">
<p>URLTestView binds its UI controls to properties in URLTestViewModel.  This section of the class URLTestViewModel shows the properties used by the View and their corresponding access methods.  The test() method&#8201;&#8212;&#8201;which was mapped to the Submit <code>Button</code> press event&#8201;&#8212;&#8201;is also listed.  The object urlTestCommand will be presented later.</p>
</div>
<div class="listingblock">
<div class="title">URLTestViewModel.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class URLTestViewModel {

    // Data elements
    private final StringProperty url = new SimpleStringProperty("");
    private final StringProperty statusCode = new SimpleStringProperty("");
    private final StringProperty loadTime = new SimpleStringProperty("");

    // Status elements
    private final BooleanProperty wasError = new SimpleBooleanProperty(false);
    private final StringProperty errorMessage = new SimpleStringProperty("");

    public StringProperty urlProperty() { return url; }

    public StringProperty statusCodeProperty() { return statusCode; }

    public StringProperty loadTimeProperty() { return loadTime; }

    public StringProperty errorMessageProperty() { return errorMessage; }

    public ReadOnlyBooleanProperty urlTestTaskRunningProperty() {
        return urlTestCommand.runningProperty();  // presented later
    }

    public ReadOnlyStringProperty urlTestTaskMessageProperty() {
        return urlTestCommand.messageProperty();  // presented later
    }

    public ReadOnlyDoubleProperty urlTestTaskProgressProperty() {
        return urlTestCommand.progressProperty();  // presented later
    }

    public void test() {
       urlTestCommand.restart();  // presented later
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>URLTestViewModel collaborates with two objects: URLTestModel and Notifications.  URLTestViewModel subscribes to a Notification in its constructor.  A URLTestViewModel method "update" will be called when the Notifications object posts an EVENT_MODEL_UPDATE.</p>
</div>
<div class="listingblock">
<div class="title">URLTestViewModel.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private final URLTestModel urlTestModel = new URLTestModel();

    private final Notifications notifications = new Notifications();

    public URLTestViewModel() {
        notifications.subscribe(Notifications.EVENT_MODEL_UPDATE,
                                this,
                                this::update);  // presented later
    }</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_command">Command</h5>
<div class="paragraph">
<p>urlTestCommand is a JavaFX <code>Service</code> object.  As a part of the URLTestViewModel class, urlTestCommand has access to the url property which provides a parameter for the call to the Model object.  urlTestCommand also uses the URLTestModel member to initiate the call to test the URL.</p>
</div>
<div class="listingblock">
<div class="title">URLTestViewModel.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private final Service&lt;Void&gt; urlTestCommand = new Service&lt;Void&gt;() {
        @Override
        protected Task&lt;Void&gt; createTask() {
            return new Task&lt;Void&gt;() {
                @Override
                protected Void call() throws Exception {
                    updateProgress(0.1d, 1.0d);
                    updateMessage("Testing url " + url.get());
                    urlTestModel.testURL( url.get() );
                    return null;
                }
                protected void failed() {
                    getException().printStackTrace();  // just in case
                }
            };
        }
    };</code></pre>
</div>
</div>
<div class="paragraph">
<p>A JavaFX <code>Service</code> was used since the <code>Service</code> objects needs to always exist for binding purposes.  URLTestView binds its <code>ProgressBar</code>, status <code>Label</code>, and container controls to the URLTestViewModel object which will be available for the life of the app.  Shown earlier, the URLTestViewModel properties delegate to the <code>Service</code> object.  A <code>Task</code> is a one-shot invocation and using that would not work for multiple test() invocations.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Asynchrony</div>
<div class="paragraph">
<p>The design in this article puts the burden of asynchronous processing on the ViewModel.  This provides direct feedback to View controls using JavaFX binding.  An alternative approach is to use a general event emitting scheme to listen for task starting, task ending, progress, and message events.  This would support breaking out the urlTestCommand <code>Service</code> subclass into a separate code module.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The presentation of the URLTestViewModel class concludes with the update() method.  This method issues a call to the Model, unpacks the results, and updates the ViewModel properties.  Recall that the View has bound to these properties and will automatically be updated (there is no similar update() method in the View.</p>
</div>
<div class="listingblock">
<div class="title">URLTestViewModel.class (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void update(String event) {

        urlTestModel.getUrlTestObject().ifPresent(

            (testObject) -&gt; {

                wasError.set( testObject.getWasError() );

                if( !testObject.getWasError() ) {

                    statusCode.set(
                            "Status code: " +
                            String.valueOf(testObject.getStatusCode())
                    );

                    loadTime.set(
                            String.valueOf(testObject.getLoadTime()) +
                                    " ms"
                    );

                    errorMessage.set(testObject.getErrorMessage());
                } else {
                    statusCode.set("");  // use empty TextField, not 0
                    loadTime.set("");  // use empty TextField, not 0
                    errorMessage.set( testObject.getErrorMessage() );
                }
            });
    }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_model_3">7.2.5. Model</h4>
<div class="paragraph">
<p>URLTestModel is presented in its entirety below.  URLTestModel maintains a copy of a domain object.  Upon initialization, this object is empty so an <code>Optional</code> is used.  A getter is provided for ViewModels.  The testURL() method issues an HTTP GET call and records the results in the URLTestObject member.  If the HTTP GET call is successful, the URLTestObject will contain the status code (probably 200) and an elapsed time.  If unsuccessful, the URLTestObject will set a convenient wasError flag and an errorMessage.</p>
</div>
<div class="paragraph">
<p>When the Model has retrieved the contents at the URL or generated an error, the publish() method of the Notifications object is invoked.  This prompts URLTestViewModel to update itself, but in a decoupled fashion.  It is important to note that URLTestModel does not hold a reference to a URLTestViewModel object.</p>
</div>
<div class="listingblock">
<div class="title">URLTestModel.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class URLTestModel {

    private final Notifications notifications =
            new Notifications();

    private Optional&lt;URLTestObject&gt; urlTestObject =
            Optional.empty();

    public Optional&lt;URLTestObject&gt; getUrlTestObject() {
        return urlTestObject;
    }

    public Optional&lt;URLTestObject&gt; testURL(String url) {

        try {
            long startTimeMillis = System.currentTimeMillis();
            HttpURLConnection urlConnection =
                    (HttpURLConnection) new URL(url).openConnection();
            try (
                    InputStream is = urlConnection.getInputStream();
            ) {
                while (is.read() != -1) {
                }
            }
            long endTimeMillis = System.currentTimeMillis();

            URLTestObject uto = new URLTestObject(
                    urlConnection.getResponseCode(),
                    (int) (endTimeMillis - startTimeMillis)
            );

            urlTestObject = Optional.of(uto);

        } catch(Exception exc) {
            URLTestObject uto = new URLTestObject(exc.getMessage());
            urlTestObject = Optional.of(uto);
        }

        notifications.publish(Notifications.EVENT_MODEL_UPDATE);

        return urlTestObject;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>URLTestModel also does not attempt to bind to URLTestViewModel using JavaFX.  Since the asynchrony is handled at the ViewModel layer, the Model is free to operate off of the JavaFX Thread.  Attempting to double-bind (View&#8594;ViewModel&#8594;Model) would result in an application threading error if binding were used.  Wrapped in a Platform.runLater(), a double-bind does not violate the prescribed dependency order&#8201;&#8212;&#8201;ViewModel already holds a reference to Model&#8201;&#8212;&#8201;but might result in an inconsistent update.</p>
</div>
<div class="paragraph">
<p>This POJO is the domain object used by the Model.  As a POJO, this is can be maintained in a commons library and shared among non-UI components like a RESTful web services project.</p>
</div>
<div class="listingblock">
<div class="title">URLTestObject.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class URLTestObject {

    private final Integer statusCode;
    private final Integer loadTime;
    private final Boolean wasError;
    private final String errorMessage;

    public URLTestObject(Integer statusCode,
                         Integer loadTime) {
        this.statusCode = statusCode;
        this.loadTime = loadTime;
        wasError = false;
        errorMessage = "";
    }

    public URLTestObject(String errorMessage) {
        this.statusCode = null;
        this.loadTime = null;
        wasError = true;
        this.errorMessage = errorMessage;
    }

    public Integer getLoadTime() {
        return loadTime;
    }

    public Integer getStatusCode() {
        return statusCode;
    }

    public Boolean getWasError() {
        return wasError;
    }

    public String getErrorMessage() {
        return errorMessage;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_notifications">7.2.6. Notifications</h4>
<div class="paragraph">
<p>This class is a lightweight pub/sub implementation.  Event types are registered as String constants at the top of the file.  Subscribers are identified by their class hashCode.  All the published events will run on the JavaFX Thread.</p>
</div>
<div class="listingblock">
<div class="title">Notifications.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Notifications {

    public final static String EVENT_MODEL_UPDATE = "modelUpdate";

    private final Map&lt;String, List&lt;SubscriberObject&gt;&gt; subscribers = new LinkedHashMap&lt;&gt;();

    private static Notifications instance = new Notifications();

    public void publish(String event) {

        Platform.runLater( () -&gt; {
            List&lt;SubscriberObject&gt; subscriberList = instance.subscribers.get(event);

            if (subscriberList != null) {

                subscriberList.forEach(
                    subscriberObject -&gt; subscriberObject.getCb().accept(event)
                    );

                // event ends after last subscriber gets callback
            }
        } );
    }

    public void subscribe(String event, Object subscriber, Consumer&lt;String&gt; cb) {

        if( !instance.subscribers.containsKey(event) ) {
            List&lt;SubscriberObject&gt; slist = new ArrayList&lt;&gt;();
            instance.subscribers.put( event, slist );
        }

        List&lt;SubscriberObject&gt; subscriberList = instance.subscribers.get( event );

        subscriberList.add( new SubscriberObject(subscriber, cb) );
    }

    public void unsubscribe(String event, Object subscriber) {

        List&lt;SubscriberObject&gt; subscriberList = instance.subscribers.get( event );

        if (subscriberList == null) {
            subscriberList.remove( subscriber );
        }
    }

    static class SubscriberObject {

        private final Object subscriber;
        private final Consumer&lt;String&gt; cb;

        public SubscriberObject(Object subscriber,
                                Consumer&lt;String&gt; cb) {
            this.subscriber = subscriber;
            this.cb = cb;
        }

        public Object getSubscriber() {
            return subscriber;
        }

        public Consumer&lt;String&gt; getCb() {
            return cb;
        }

        @Override
        public int hashCode() {
            return subscriber.hashCode();
        }

        @Override
        public boolean equals(Object obj) {
            return subscriber.equals(obj);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notifications is a singleton so that any class&#8201;&#8212;&#8201;both URLTestViewModel and URLTestModel in this case&#8201;&#8212;&#8201;will subscribe to and publish to the right instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_app">7.2.7. App</h4>
<div class="paragraph">
<p>For completeness, the Application subclass is listed below.</p>
</div>
<div class="listingblock">
<div class="title">ModelChangeApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ModelChangeApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        Scene scene = new Scene(new URLTestView());

        primaryStage.setTitle("Model Change App");
        primaryStage.setScene( scene );
        primaryStage.setWidth(568);
        primaryStage.setHeight(320);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>MVVM is an architecture that separates the View from the Model.  Unlike other architectures, this separation includes a specific dependency graph: View depends on ViewModel depends on Model.  All three component types collaborate, but in cases where data moves in the opposite direction of the dependency graph, the communication is indirect.  In this example, the indirect communication was provided by JavaFX binding and a special Notifications class.  By keeping the Model and ViewModel free of View dependencies, the MVVM architecture fosters reuse.  URLTestModel can be used by other ViewModels and URLTestViewModel can be used by other Views.</p>
</div>
</div>
<div class="sect3">
<h4 id="_completed_code_7">7.2.8. Completed Code</h4>
<div class="paragraph">
<p>The completed code in this example is available as a Gradle project here.  There are two examples in the JAR.  Run the class net.bekwam.bkcourse.modelchangeapp.ModelChangeApp.</p>
</div>
<div class="paragraph">
<p><a href="https://courses.bekwam.net/public_tutorials/source/bkcourse_mvvmapp_sources.zip">bkcourse_mvvmapp_sources.zip</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_dialog_class">7.3. The Dialog Class</h3>
<div class="paragraph">
<p>The <code>Dialog</code> class was a surprising latecomer to the JavaFX library.  The Dialog class displays a customized supporting window to execute an operation or to retrieve additional information.  The subclass <code>Alert</code> is also available and is better suited for focused interactions like a confirmation, retrieving a text value (<code>TextInputDialog</code>), or a selected item (<code>ChoiceDialog</code>).</p>
</div>
<div class="paragraph">
<p>This section will demonstrate the Dialog class built on a domain object, ConnectionInfo.  A main screen is displayed with a <code>TextField</code> for a database URL.  Pressing the set <code>Button</code> displays the Dialog.  If the user fills in values and presses the Save Button, the Dialog is dismissed and the ConnectionInfo domain object is returned to the caller.  If the Cancel Button is pressed, an empty <code>Optional</code> is returned.</p>
</div>
<div class="paragraph">
<p>This screenshot shows the app when it starts up.  The DB URL field is empty.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/dialogapp_main_empty.png" alt="dialogapp main empty">
</div>
<div class="title">Figure 58. DialogApp At Startup</div>
</div>
<div class="paragraph">
<p>Pressing the Set Button displays the Dialog.  The user has filled in values for host, username, and password.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/dialogapp_dialog_filledin.png" alt="dialogapp dialog filledin">
</div>
<div class="title">Figure 59. Gathering Values</div>
</div>
<div class="paragraph">
<p>Closing the Dialog via the Save Button forms a ConnectionInfo object that is returned to the caller.  This value is formed into a <code>String</code> and put into the TextField.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-structure/dialogapp_main_filledin.png" alt="dialogapp main filledin">
</div>
<div class="title">Figure 60. Values Retrieved</div>
</div>
<div class="paragraph">
<p>The reverse interaction is also supported in this example.  If the user types in a well-formed URL, that URL will be parsed and displayed in the Dialog.  URL String validation has been left off.  An invalid URL String will result in an empty Dialog.</p>
</div>
<div class="sect3">
<h4 id="_app_2">7.3.1. App</h4>
<div class="paragraph">
<p>The JavaFX <code>Application</code> subclass adds UI controls for the DB URL TextField and Save Button.</p>
</div>
<div class="listingblock">
<div class="title">DialogApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class DialogApp extends Application {

    private final TextField dbURL = new TextField();

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label label = new Label("DB URL");
        dbURL.setPrefWidth(400.0d );
        Button btn = new Button("Set");
        btn.setOnAction( this::showSetDialog );

        VBox vbox = new VBox(label, dbURL, btn );
        vbox.setSpacing( 10.0d );
        vbox.setPadding( new Insets(40.0d) );

        Scene scene = new Scene( vbox );

        primaryStage.setTitle("Dialog App");
        primaryStage.setScene( scene );
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>showSetDialog() is a method reference that initializes a ConnectionInfo object, displays the Dialog, and retrieves a value if set by the user.</p>
</div>
<div class="listingblock">
<div class="title">DialogApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void showSetDialog(ActionEvent evt) {

        ConnectionInfo fromURL = ciConverter.fromString( dbURL.getText() );

        ConnectionDialog dialog = new ConnectionDialog(fromURL);

        Optional&lt;ConnectionInfo&gt; ci = dialog.showAndWait();

        ci.ifPresent( c -&gt; dbURL.setText(
                ciConverter.toString(c)
            )
        );
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The app is using a JavaFX <code>StringConverter</code> to encapsulate the code behind forming a String from the set of fields of the ConnectionInfo object.  The StringConverter is stored as a field in the Application subclass.</p>
</div>
<div class="listingblock">
<div class="title">DialogApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private final ConnectionInfoStringConverter ciConverter =
            new ConnectionInfoStringConverter();


   class ConnectionInfoStringConverter extends StringConverter&lt;ConnectionInfo&gt; {

        private final String format = "%s@%s:%s";

        @Override
        public String toString(ConnectionInfo c) {
            return String.format( format, c.getUsername(), c.getPassword(), c.getHost() );
        }

        @Override
        public ConnectionInfo fromString(String s) {

            if( s != null &amp;&amp; s.contains("@") &amp;&amp; s.contains(":") ) {
                String[] toks = s.split("@");
                String username = toks[0];
                String[] secondPart = toks[1].split(":");
                String password = secondPart[0];
                String host = secondPart[1];
                ConnectionInfo ci = new ConnectionInfo(
                        username, password, host
                );
                return ci;
            }

            return null;
        }
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dialog">7.3.2. Dialog</h4>
<div class="paragraph">
<p>The Dialog subclass adds UI controls to the DialogPane field in the constructor.  Notice the lack of explicit <code>ActionEvent</code> handlers.  When using Dialog or Alert, ButtonType and ButtonData are preferred over raw Button objects.  These higher-order objects make the app UI more consistent because the Button placement, labeling, and behavior is handed in the Dialog abstraction.</p>
</div>
<div class="paragraph">
<p>The subclass contains a type parameter to the ConnectionInfo domain object.</p>
</div>
<div class="listingblock">
<div class="title">ConnectionDialog.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ConnectionDialog extends Dialog&lt;ConnectionInfo&gt; {

    private final TextField tfHost = new TextField();
    private final TextField tfUser = new TextField();
    private final TextField tfPassword = new TextField();

    public ConnectionDialog(ConnectionInfo initialData) {

        Label hostLabel = new Label("Host");
        Label userLabel = new Label("User");
        Label passwordLabel = new Label("Password");

        VBox vbox = new VBox(
                hostLabel, tfHost,
                userLabel, tfUser,
                passwordLabel, tfPassword
        );

        vbox.setSpacing( 10.0d );
        vbox.setPadding( new Insets(40.0d) );

        DialogPane dp = getDialogPane();

        setTitle( "Connection Info" );
        setResultConverter( this::formResult );

        ButtonType bt = new ButtonType("Save", ButtonBar.ButtonData.OK_DONE);
        dp.getButtonTypes().addAll( bt, ButtonType.CANCEL );
        dp.setContent( vbox );

        init( initialData );
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The init() method sets the Dialog UI controls based on the ConnectionInfo fields.</p>
</div>
<div class="listingblock">
<div class="title">ConnectionDialog.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void init(ConnectionInfo ci) {
        if (ci != null) {
            tfHost.setText( ci.getHost() );
            tfUser.setText( ci.getUsername() );
            tfPassword.setText( ci.getPassword() );
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The setResultConverter() is the mechanism by which the Dialog will communicate its domain object back to the caller.  The converter is a callback that returns a ConnectionInfo object if one can be formed from the input.  In this case, the Dialog makes a decision to send back an object if the Save Button was pressed.  Validating the Dialog fields can be performed as part of the TextField themselves or as an EventFilter attached to the Save Button.</p>
</div>
<div class="listingblock">
<div class="title">ConnectionDialog.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private ConnectionInfo formResult(ButtonType bt) {
        ConnectionInfo retval = null;
        if( bt.getButtonData() == ButtonBar.ButtonData.OK_DONE ) {
            retval = new ConnectionInfo(
                    tfHost.getText(), tfUser.getText(), tfPassword.getText()
            );
        }
        return retval;
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_domain_object">7.3.3. Domain Object</h4>
<div class="paragraph">
<p>The domain object ConnectionInfo is an immutable POJO.</p>
</div>
<div class="listingblock">
<div class="title">ConnectionInfo.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ConnectionInfo {

    private final String host;
    private final String username;
    private final String password;

    public ConnectionInfo(String host,
                          String username,
                          String password) {
        this.host = host;
        this.username = username;
        this.password = password;
    }

    public String getHost() {
        return host;
    }

    public String getUsername() {
        return username;
    }

    public String getPassword() {
        return password;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JavaFX Dialog and Alert subclass are windows that provide a simpler interface and a more consistent style than a raw Stage.  Alert is the preferred class when a warning, confirmation, or single value needs to be retrieved from the user. Dialog is used for complex, but contained, interactions with the user.  This example showed how a main Stage can keep its view simple by delegating the retrieval of detailed information to a Dialog.  Dialog&#8201;&#8212;&#8201;when paired with a type parameter&#8201;&#8212;&#8201;improves information hiding in an app by turning a showAndWait() call into a function that returns a value.</p>
</div>
</div>
<div class="sect3">
<h4 id="_source_3">7.3.4. Source</h4>
<div class="paragraph">
<p>The complete source code and Gradle project can be found at the link below.</p>
</div>
<div class="paragraph">
<p><a href="https://courses.bekwam.net/public_tutorials/source/bkcourse_dialogapp_sources.zip">DialogApp Source Zip</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices">8. Best Practices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_styleable_properties">8.1. Styleable Properties</h3>
<div class="paragraph">
<p>A JavaFX property can be styled via css by using a StyleableProperty. This is useful when controls need properties that can be set via css.</p>
</div>
<div class="paragraph">
<p>In order to use a StyleableProperty on a Control, one needs to create a new CssMetaData using the StyleableProperty. CssMetaData created for a control
needs to be added to the List&lt;CssMetaData&gt; obtained from the control&#8217;s ancestor. This new list is then returned from the <code>getControlCssMetaData()</code>.</p>
</div>
<div class="paragraph">
<p>By convention, control classes that have CssMetaData will implement a static method getClassCssMetaData() and it is
customary to have getControlCssMetaData() simply return getClassCssMetaData(). The purpose of getClassCssMetaData() is
to allow sub-classes to easily include the CssMetaData of some ancestor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// StyleableProperty
private final StyleableProperty&lt;Color&gt; color =
    new SimpleStyleableObjectProperty&lt;&gt;(COLOR, this, "color");

// Typical JavaFX property implementation
public Color getColor() {
    return this.color.getValue();
}
public void setColor(final Color color) {
    this.color.setValue(color);
}
public ObjectProperty&lt;Color&gt; colorProperty() {
    return (ObjectProperty&lt;Color&gt;) this.color;
}

// CssMetaData
private static final CssMetaData&lt;MY_CTRL, Paint&gt; COLOR =
    new CssMetaData&lt;MY_CTRL, Paint&gt;("-color", PaintConverter.getInstance(), Color.RED) {

    @Override
    public boolean isSettable(MY_CTRL node) {
        return node.color == null || !node.color.isBound();
    }

    @Override
    public StyleableProperty&lt;Paint&gt; getStyleableProperty(MY_CTRL node) {
        return node.color;
    }
};

private static final List&lt;CssMetaData&lt;? extends Styleable, ?&gt;&gt; STYLEABLES;
static {
    // Fetch CssMetaData from its ancestors
    final List&lt;CssMetaData&lt;? extends Styleable, ?&gt;&gt; styleables =
        new ArrayList&lt;&gt;(Control.getClassCssMetaData());
    // Add new CssMetaData
    styleables.add(COLOR);
    STYLEABLES = Collections.unmodifiableList(styleables);
}

// Return all CssMetadata information
public static List&lt;CssMetaData&lt;? extends Styleable, ?&gt;&gt; getClassCssMetaData() {
    return STYLEABLES;
}

@Override
public List&lt;CssMetaData&lt;? extends Styleable, ?&gt;&gt; getControlCssMetaData() {
    return getClassCssMetaData();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Creation of StyleableProperty and CssMetaData needs a lot of boiler-plate code and this can be reduced by using <a href="https://docs.oracle.com/javase/8/javafx/api/javafx/css/StyleablePropertyFactory.html">StyleablePropertyFactory</a>.
StyleablePropertyFactory contains methods to create StyleableProperty with corresponding CssMetaData.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// StyleableProperty
private final StyleableProperty&lt;Color&gt; color =
    new SimpleStyleableObjectProperty&lt;&gt;(COLOR, this, "color");

// Typical JavaFX property implementation
public Color getColor() {
    return this.color.getValue();
}
public void setColor(final Color color) {
    this.color.setValue(color);
}
public ObjectProperty&lt;Color&gt; colorProperty() {
    return (ObjectProperty&lt;Color&gt;) this.color;
}

// StyleablePropertyFactory
private static final StyleablePropertyFactory&lt;MY_CTRL&gt; FACTORY =
    new StyleablePropertyFactory&lt;&gt;(Control.getClassCssMetaData());

// CssMetaData from StyleablePropertyFactory
private static final CssMetaData&lt;MY_CTRL, Color&gt; COLOR =
    FACTORY.createColorCssMetaData("-color", s -&gt; s.color, Color.RED, false); 

// Return all CssMetadata information from StyleablePropertyFactory
public static List&lt;CssMetaData&lt;? extends Styleable, ?&gt;&gt; getClassCssMetaData() {
    return FACTORY.getCssMetaData();
}

@Override public List&lt;CssMetaData&lt;? extends Styleable, ?&gt;&gt; getControlCssMetaData() {
    return getClassCssMetaData();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tasks">8.2. Tasks</h3>
<div class="paragraph">
<p>This article demonstrates how to use a JavaFX Task to keep the UI responsive.  It is imperative that any operation taking more than a few hundred milliseconds be executed on a separate Thread to avoid locking up the UI.  A Task wraps up the sequence of steps in a long-running operation and provides callbacks for the possible outcomes.</p>
</div>
<div class="paragraph">
<p>The <strong>Task</strong> class also keeps the user aware of the operation through properties which can be bound to UI controls like ProgressBars and Labels.  The binding dynamically updates the UI.  These properties include</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>runningProperty</strong> - Whether or not the Task is running</p>
</li>
<li>
<p><strong>progressProperty</strong> - The percent complete of an operation</p>
</li>
<li>
<p><strong>messageProperty</strong> - Text describing a step in the operation</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_demonstration">8.2.1. Demonstration</h4>
<div class="paragraph">
<p>The following screenshots show the operation of an HTML retrieval application.</p>
</div>
<div class="paragraph">
<p>Entering a URL and pressing "Go" will start a JavaFX Task.  When running, the Task will make an HBox visible that contains a ProgressBar and a Label.  The ProgressBar and Label are updated throughout the operation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/best-practices/tasks_pb.png" alt="tasks pb">
</div>
<div class="title">Figure 61. Screenshot of App Showing ProgressBar and Label</div>
</div>
<div class="paragraph">
<p>When the retrieval is finished, a succeeded() callback is invoked and the UI is updated.  Note that the succeeded() callback takes place on the FX Thread, so it is safe to manipuplate controls.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/best-practices/tasks_contents.png" alt="tasks contents">
</div>
<div class="title">Figure 62. Screenshot of App Showing Successful Retrieval</div>
</div>
<div class="paragraph">
<p>If there was an error retrieving the HTML, a failed() callback is invoked and an error Alert is shown.  failed() also takes place on the FX Thread.  This screenshot shows invalid input. An "h" is used in the URL instead of the correct "http".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/best-practices/tasks_error.png" alt="tasks error">
</div>
<div class="title">Figure 63. Screenshot of App Showing Failure</div>
</div>
</div>
<div class="sect3">
<h4 id="_code">8.2.2. Code</h4>
<div class="paragraph">
<p>An event handler is placed on the Get HTML Button which creates the Task.  The entry point of the Task is the call() method which starts by calling updateMessage() and updateProgress().  These methods are executed on the FX Thread and will result in updates to any bound properties.</p>
</div>
<div class="paragraph">
<p>The program proceeds by issuing an HTTP GET using standard java.net classes.  A String "retval" is built up from the retrieved characters.  The message and progress properties are updated with more calls to updateMessage() and updateProgress().  The call() method ends with a return of the String containing the HTML text.</p>
</div>
<div class="paragraph">
<p>On a successful operation, the succeeded() callback is invoked.  getValue() is a Task method that will return the value accrued in the Task (recall "retval").  The type of the value is what is provided in the generic argument, in this case "String".  This could be a complex type like a domain object or a Collection.  The succeeded() operation runs on the FX Thread, so the getValue() String is directly set on the TextArea.</p>
</div>
<div class="paragraph">
<p>If the operation failed, an Exception is thrown.  The Exception is caught by the Task and converted to a failed() call.  failed() is also FX Thread-safe and it displays an Alert.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">String url = tfURL.getText();

Task&lt;String&gt; task = new Task&lt;String&gt;() {

    @Override
    protected String call() throws Exception {

        updateMessage("Getting HTML from " + url );
        updateProgress( 0.5d, 1.0d );

        HttpURLConnection c = null;
        InputStream is = null;
        String retval = "";

        try {

            c = (HttpURLConnection) new URL(url).openConnection();

            updateProgress( 0.6d, 1.0d );
            is = c.getInputStream();
            int ch;
            while( (ch=is.read()) != -1 ) {
                retval += (char)ch;
            }

        } finally {
            if( is != null ) {
                is.close();
            }
            if( c != null ) {
                c.disconnect();
            }
        }

        updateMessage("HTML retrieved");
        updateProgress( 1.0d, 1.0d );

        return retval;
    }

    @Override
    protected void succeeded() {
        contents.setText( getValue() );
    }

    @Override
    protected void failed() {
        Alert alert = new Alert(Alert.AlertType.ERROR, getException().getMessage() );
        alert.showAndWait();
    }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the Task does not update the ProgressBar and status Label directly.  Instead, the Task makes safe calls to updateMessage() and updateProgress().  To update the UI, JavaFX binding is used in the following statements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">bottomControls.visibleProperty().bind( task.runningProperty() );
pb.progressProperty().bind( task.progressProperty() );
messageLabel.textProperty().bind( task.messageProperty() );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Task.runningProperty is a boolean that can be bound to the bottomControls HBox visibleProperty.  Task.progressProperty is a double that can be bound to the ProgressBar progressProperty.  Task.messageProperty is a String that can be bound to the status Label textProperty.</p>
</div>
<div class="paragraph">
<p>To run the Task, create a Thread providing the Task as a constructor argument and invoke start().</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">new Thread(task).start();</code></pre>
</div>
</div>
<div class="paragraph">
<p>For any long-running operation&#8201;&#8212;&#8201;File IO, the Network&#8201;&#8212;&#8201;use a JavaFX Task to keep your application responsive.  The JavaFX Task gives your application a consistent way of handling asynchronous operations and exposes several properties that can be used to eliminate boilerplate and programming logic.</p>
</div>
</div>
<div class="sect3">
<h4 id="_complete_code_8">8.2.3. Complete Code</h4>
<div class="paragraph">
<p>The code can be tested in a single .java file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class ProgressBarApp extends Application {

    private HBox bottomControls;
    private ProgressBar pb;
    private Label messageLabel;

    private TextField tfURL;

    private TextArea contents;

    @Override
    public void start(Stage primaryStage) throws Exception {

        Parent p = createMainView();

        Scene scene = new Scene(p);

        primaryStage.setTitle("ProgressBarApp");
        primaryStage.setWidth( 667 );
        primaryStage.setHeight( 376 );
        primaryStage.setScene( scene );
        primaryStage.show();
    }

    private Parent createMainView() {

        VBox vbox = new VBox();
        vbox.setPadding( new Insets(10) );
        vbox.setSpacing( 10 );

        HBox topControls = new HBox();
        topControls.setAlignment(Pos.CENTER_LEFT);
        topControls.setSpacing( 4 );

        Label label = new Label("URL");
        tfURL = new TextField();
        HBox.setHgrow( tfURL, Priority.ALWAYS );
        Button btnGetHTML = new Button("Get HTML");
        btnGetHTML.setOnAction( this::getHTML );
        topControls.getChildren().addAll(label, tfURL, btnGetHTML);

        contents = new TextArea();
        VBox.setVgrow( contents, Priority.ALWAYS );

        bottomControls = new HBox();
        bottomControls.setVisible(false);
        bottomControls.setSpacing( 4 );
        HBox.setMargin( bottomControls, new Insets(4));

        pb = new ProgressBar();
        messageLabel = new Label("");
        bottomControls.getChildren().addAll(pb, messageLabel);

        vbox.getChildren().addAll(topControls, contents, bottomControls);

        return vbox;
    }

    public void getHTML(ActionEvent evt) {

        String url = tfURL.getText();

        Task&lt;String&gt; task = new Task&lt;String&gt;() {

            @Override
            protected String call() throws Exception {

                updateMessage("Getting HTML from " + url );
                updateProgress( 0.5d, 1.0d );

                HttpURLConnection c = null;
                InputStream is = null;
                String retval = "";

                try {

                    c = (HttpURLConnection) new URL(url).openConnection();

                    updateProgress( 0.6d, 1.0d );
                    is = c.getInputStream();
                    int ch;
                    while( (ch=is.read()) != -1 ) {
                        retval += (char)ch;
                    }

                } finally {
                    if( is != null ) {
                        is.close();
                    }
                    if( c != null ) {
                        c.disconnect();
                    }
                }

                updateMessage("HTML retrieved");
                updateProgress( 1.0d, 1.0d );

                return retval;
            }

            @Override
            protected void succeeded() {
                contents.setText( getValue() );
            }

            @Override
            protected void failed() {
                Alert alert = new Alert(Alert.AlertType.ERROR, getException().getMessage() );
                alert.showAndWait();
            }
        };

        bottomControls.visibleProperty().bind( task.runningProperty() );
        pb.progressProperty().bind( task.progressProperty() );
        messageLabel.textProperty().bind( task.messageProperty() );

        new Thread(task).start();
    }

    public static void main(String[] args) {
        launch(args);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_avoid_nulls_in_comboboxes">8.3. Avoid Nulls in ComboBoxes</h3>
<div class="paragraph">
<p>To use a <code>ComboBox</code> in JavaFX, declare a List of items and set an initial value using setValue().  The <code>ComboBox</code> method getValue() retrieves the currently selected value.  If an initial value is not provided, the control defaults to a null value.</p>
</div>
<div class="paragraph">
<p>The null value is a problem when the <code>ComboBox</code> drives other logic like an upper-case transformation or the lookup of a database record.  While a null check is usually used to prevent this type of error, an empty object is preferred in order to simplify the code.  ComboBoxes often appear in clusters and the empty object technique reduces null checks in the interaction of related ComboBoxes and on save and load operations.</p>
</div>
<div class="paragraph">
<p>This article presents a pair of related ComboBoxes.  A country selection in one <code>ComboBox</code> modifies the list of available city items in a second <code>ComboBox</code>.  Neither selection is required.  The user can press the Save <code>Button</code> at any time and if no selection is made for either <code>ComboBox</code>, an empty object&#8201;&#8212;&#8201;in this case an empty String&#8201;&#8212;&#8201;will be returned.</p>
</div>
<div class="paragraph">
<p>This is a screenshot of the app.  Selecting "Switzerland" from an empty initial value will fill the city <code>ComboBox</code> with Swiss cities.  Selecting the city "Zurich" and pressing Save will retrieve those values.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/best-practices/nonullcombo_screenshot.png" alt="nonullcombo screenshot">
</div>
<div class="title">Figure 64. Related ComboBoxes</div>
</div>
<div class="sect3">
<h4 id="_data_structure">8.3.1. Data Structure</h4>
<div class="paragraph">
<p>The data structures supporting the app are a List of countries and a Map of cities.  The Map of cities uses country as a key.</p>
</div>
<div class="listingblock">
<div class="title">NoNullComboApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class NoNullComboApp extends Application {

    private List&lt;String&gt; countries = new ArrayList&lt;&gt;();

    private Map&lt;String, List&lt;String&gt;&gt; citiesMap = new LinkedHashMap&lt;&gt;();

    private void initData() {

        String COUNTRY_FR = "France";
        String COUNTRY_DE = "Germany";
        String COUNTRY_CH = "Switzerland";

        countries.add(COUNTRY_FR); countries.add(COUNTRY_DE); countries.add(COUNTRY_CH);

        List&lt;String&gt; frenchCities = new ArrayList&lt;&gt;();
        frenchCities.add("Paris");
        frenchCities.add("Strasbourg");

        List&lt;String&gt; germanCities = new ArrayList&lt;&gt;();
        germanCities.add("Berlin");
        germanCities.add("Cologne");
        germanCities.add("Munich");

        List&lt;String&gt; swissCities = new ArrayList&lt;&gt;();
        swissCities.add("Zurich");

        citiesMap.put(COUNTRY_FR, frenchCities );
        citiesMap.put(COUNTRY_DE, germanCities );
        citiesMap.put(COUNTRY_CH, swissCities );
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>To retrieve the set of cities for a given country, use the get() method of the Map.  The containsKey() method can be used to determine whether or not the Map contains a value for the specified country.  In this example, containsKey() will be used to handle the empty object case.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ui">8.3.2. UI</h4>
<div class="paragraph">
<p>The UI is a pair of ComboBoxes with Labels and a Save Button.  The controls are put in a <code>VBox</code> and left-justified.  The <code>VBox</code> is wrapped in a <code>TilePane</code> and centered.  The <code>TilePane</code> was used since it does not stretch the <code>VBox</code> horizontally.</p>
</div>
<div class="listingblock">
<div class="title">NoNullComboApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    @Override
    public void start(Stage primaryStage) throws Exception {

        Label countryLabel = new Label("Country:");
        country.setPrefWidth(200.0d);
        Label cityLabel = new Label("City:");
        city.setPrefWidth(200.0d);
        Button saveButton = new Button("Save");

        VBox vbox = new VBox(
                countryLabel,
                country,
                cityLabel,
                city,
                saveButton
        );
        vbox.setAlignment(Pos.CENTER_LEFT );
        vbox.setSpacing( 10.0d );

        TilePane outerBox = new TilePane(vbox);
        outerBox.setAlignment(Pos.CENTER);

        Scene scene = new Scene(outerBox);

        initData();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_initial_values">8.3.3. Initial Values</h4>
<div class="paragraph">
<p>As mentioned earlier, if a value is not specified for a <code>ComboBox</code>, then null will be returned in a getValue() call.  Although there are several defensive techniques&#8201;&#8212;&#8201;if checks, Commons StringUtils methods&#8201;&#8212;&#8201;for fending off NullPointerExceptions, it is better to avoid them completely.  This is especially true as the interactions become complex or there are several ComboBoxes that allow empty selections.</p>
</div>
<div class="listingblock">
<div class="title">NoNullComboApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        country.getItems().add("");
        country.getItems().addAll( countries );
        country.setValue( "" );  // empty selection is object and not null

        city.getItems().add("");
        city.setValue( "" );</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this app, the Country <code>ComboBox</code> will not  be changed, so its items are added in the start() method.  Country starts with an initial empty selection as does city.  City&#8201;&#8212;&#8201;at this point&#8201;&#8212;&#8201;contains a single empty item.</p>
</div>
</div>
<div class="sect3">
<h4 id="_interaction">8.3.4. Interaction</h4>
<div class="paragraph">
<p>When the country value is changed, the contents of the city <code>ComboBox</code> should be replaced.  It is common to use clear() on the backing list; however, this will produce a null value in the <code>ComboBox</code> (no items, no value).  Instead, use removeIf() with a clause to keep a single empty item.  With the list cleared of all data (except the empty item), the newly-selected contents can be added with addAll().</p>
</div>
<div class="listingblock">
<div class="title">NoNullComboApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        country.setOnAction( (evt) -&gt; {

            String cty = country.getValue();

            city.getItems().removeIf( (c) -&gt; !c.isEmpty() );

            if( citiesMap.containsKey(cty) ) {  // not an empty key
                city.getItems().addAll( citiesMap.get(cty) );
            }
        });

        saveButton.setOnAction( (evt) -&gt; {
           System.out.println("saving country='" + country.getValue() +
                                      "', city='" + city.getValue() + "'");
        });</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Save Button action will print out the values.  In no case will a null value be returned from getValue().</p>
</div>
<div class="paragraph">
<p>If you&#8217;re a Java developer, you&#8217;ve written "if not null" thousands of times.  Yet, project after project, I see NullPointerExceptions highlighting cases that were missed or new conditions that have arisen.  This article presented a technique for keeping empty objects in ComboBoxes by setting an initial value and using removeIf() rather than clear() when changing lists.  Although, this example used String objects, this can be expanded to work with domain objects that have an hashCode/equals implementation, an empty object representation, and a cellFactory or toString() to produce an empty view.</p>
</div>
</div>
<div class="sect3">
<h4 id="_complete_code_9">8.3.5. Complete Code</h4>
<div class="paragraph">
<p>The code can be tested in a single .java file.</p>
</div>
<div class="listingblock">
<div class="title">NoNullComboApp.class</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class NoNullComboApp extends Application {

    private final ComboBox&lt;String&gt; country = new ComboBox&lt;&gt;();
    private final ComboBox&lt;String&gt; city = new ComboBox&lt;&gt;();

    private List&lt;String&gt; countries = new ArrayList&lt;&gt;();

    private Map&lt;String, List&lt;String&gt;&gt; citiesMap = new LinkedHashMap&lt;&gt;();

    @Override
    public void start(Stage primaryStage) throws Exception {

        Label countryLabel = new Label("Country:");
        country.setPrefWidth(200.0d);
        Label cityLabel = new Label("City:");
        city.setPrefWidth(200.0d);
        Button saveButton = new Button("Save");

        VBox vbox = new VBox(
                countryLabel,
                country,
                cityLabel,
                city,
                saveButton
        );
        vbox.setAlignment(Pos.CENTER_LEFT );
        vbox.setSpacing( 10.0d );

        TilePane outerBox = new TilePane(vbox);
        outerBox.setAlignment(Pos.CENTER);

        Scene scene = new Scene(outerBox);

        initData();

        country.getItems().add("");
        country.getItems().addAll( countries );
        country.setValue( "" );  // empty selection is object and not null

        city.getItems().add("");
        city.setValue( "" );

        country.setOnAction( (evt) -&gt; {

            String cty = country.getValue();

            city.getItems().removeIf( (c) -&gt; !c.isEmpty() );

            if( citiesMap.containsKey(cty) ) {  // not an empty key
                city.getItems().addAll( citiesMap.get(cty) );
            }
        });

        saveButton.setOnAction( (evt) -&gt; {
           System.out.println("saving country='" + country.getValue() +
                                      "', city='" + city.getValue() + "'");
        });

        primaryStage.setTitle("NoNullComboApp");
        primaryStage.setScene( scene );
        primaryStage.setWidth( 320 );
        primaryStage.setHeight( 480 );
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    private void initData() {

        String COUNTRY_FR = "France";
        String COUNTRY_DE = "Germany";
        String COUNTRY_CH = "Switzerland";

        countries.add(COUNTRY_FR); countries.add(COUNTRY_DE); countries.add(COUNTRY_CH);

        List&lt;String&gt; frenchCities = new ArrayList&lt;&gt;();
        frenchCities.add("Paris");
        frenchCities.add("Strasbourg");

        List&lt;String&gt; germanCities = new ArrayList&lt;&gt;();
        germanCities.add("Berlin");
        germanCities.add("Cologne");
        germanCities.add("Munich");

        List&lt;String&gt; swissCities = new ArrayList&lt;&gt;();
        swissCities.add("Zurich");

        citiesMap.put(COUNTRY_FR, frenchCities );
        citiesMap.put(COUNTRY_DE, germanCities );
        citiesMap.put(COUNTRY_CH, swissCities );
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_javadoc_for_javafx_properties">8.4. Writing Javadoc for JavaFX Properties</h3>
<div class="sect3">
<h4 id="_background">8.4.1. Background</h4>
<div class="paragraph">
<p>Documenting JavaFX APIs may not appear very different from documenting a Java API but most of us are unaware of the tools present to ease our work.</p>
</div>
<div class="paragraph">
<p>While writing a JavaFX application or designing a JavaFX control, a developer adds various JavaFX properties which <em>normally</em> consists of a field and three methods i.e. JavaFX property method, setter and getter. These methods are generally <em>public</em> and therefore, should be documented. Writing Javadoc for all the three methods doesn&#8217;t makes sense when most of it is implied. Nevertheless, there should be some documentation and a way to show a link between all these methods.</p>
</div>
<div class="paragraph">
<p>The JavaFX team has been very thoughtful and introduced a special option "<strong>-javafx</strong>" for the javadoc command. This option introduces the following flexibility:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Generates HTML documentation using the JavaFX extensions to the standard doclet. The generated documentation includes a "Property Summary" section in addition to the other summary sections generated by the standard Java doclet. The listed properties are linked to the sections for the getter and setter methods of each property.</p>
</li>
<li>
<p>If there are no documentation comments written explicitly for getter and setter methods, the documentation comments from the property method are automatically copied to the generated documentation for these methods.</p>
</li>
<li>
<p>Adds a new <strong>@defaultValue</strong> tag that allows documenting the default value for a property.</p>
</li>
<li>
<p>Adds a new <strong>@treatAsPrivate</strong> tag that adds the flexibility to not publish the doc for a public method which is a part of the implementation detail.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>javadoc -javafx MyClass.java -d testdir</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example">8.4.2. Example</h4>
<div class="paragraph">
<p>Generally, if you introduce a JavaFX property field, you will add its corresponding property method along with setter and getter. In this case, you are advised to bundle them together and document <em>only</em> the field. The "-javafx" option on the javadoc command will generate the appropriate documentation for the rest of the methods.</p>
</div>
<div class="paragraph">
<p><strong>N.B.</strong> - You can document an individual method in case you want to add explicit information for the method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/**
 * Specifies whether this {@code Node} and its child nodes should be rendered
 * as part of the scene graph. A node may be visible and yet not be shown
 * in the rendered scene if, for instance, it is off the screen or obscured
 * by another Node. Invisible nodes never receive mouse events or
 * keyboard focus and never maintain keyboard focus when they become
 * invisible.
 *
 * @defaultValue true
 */
private BooleanProperty visible = new SimpleBooleanProperty(this, "visible", true);

public final void setVisible(boolean value) {
    visibleProperty().set(value);
}

public final boolean isVisible() {
    return visible.get();
}

public final BooleanProperty visibleProperty() {
    return visible;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ignoring_warnings_for_null_select_binding_expressions">8.5. Ignoring Warnings for Null Select Binding Expressions</h3>
<div class="paragraph">
<p>When working with the JavaFX Bindings class, you may get evaluation warnings in the console log.  This scenario arises when using a binding expression on an object that may be null.  For example, a <code>TableView</code> selection may drive the enabled state of Buttons.  When the <code>TableView</code> is first displayed, there is no selection.  This will display an error in the log of level WARNING.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">Dec 31, 2016 9:11:14 AM com.sun.javafx.binding.SelectBinding$SelectBindingHelper getObservableValue
WARNING: Exception while evaluating select-binding [taxable]</code></pre>
</div>
</div>
<div class="paragraph">
<p>"taxable" is a Boolean property on a POJO.  The expression that caused this message is the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    btnCalcTax.disableProperty().bind(
        tblItems.getSelectionModel().selectedItemProperty().isNull().or(
                Bindings.select(
                    tblItems.getSelectionModel().selectedItemProperty(),
                    "taxable"
                ).isEqualTo(false)
        )
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding statement disables the Calc Tax Button when there is no table selection or if there is a table selection, the selected item has its taxable field set to false.  That is, the Calc Tax Button should only be enabled when a taxable item is selected.</p>
</div>
<div class="paragraph">
<p>JavaFX Bindings uses Java Logging, so raising the verbosity to SEVERE will ignore the WARNING level message.  Conversely, if you want to lower the verbosity to see the stack trace supporting the WARNING, lower the verbosity to FINE.  This statement is added to a logging.properties file.  The program can be instructed to use that file by specifying -Djava.util.logging.config.file in the command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">javafx.beans.level=SEVERE</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a quick check that does not require a separate file or command modification, you can add this to your program.  Because of the dependency on Sun classes, you should remove this prior to committing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Logging.getLogger().setLevel(PlatformLogger.Level.FINE )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JavaFX WARNING may be too strong for a common use case.  There is a ticket JDK-8162600 that may address this in a later JavaFX release.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pojo_binding">8.6. POJO Binding</h3>
<div class="paragraph">
<p>In larger apps involving non-JavaFX technologies, sharing POJOs is a great way to help with maintenance.  Doing an impact analysis is quicker when an IDE can search for common accesses and extensions.  Moreover, POJO-based validation, logic, and utilities can also be reused.</p>
</div>
<div class="paragraph">
<p>JavaFX has a collection of static methods in the <code>Bindings</code> class to work with both POJOs and JavaFX-enabled Properties.  This section demonstrates the use of the select() method which will link the core data types from a POJO to the JavaFX Property-based fields of a UI control.  Once the core data type is repackaged as a Property, additional functionality from JavaFX can be chained such as string concantenation.</p>
</div>
<div class="paragraph">
<p>Because the data in this demonstration app is based on a POJO, an update needs to be made manually.  Bi-directional binding works only when the source and the target are both Properties.  This app uses a Track class with core data type fields like String: "album".  If the Track class were written using JavaFX properties&#8201;&#8212;&#8201;say StringProperty : album&#8201;&#8212;&#8201;then a model change would automatically update the UI.  A hybrid approach is presented whereby the core data type on one of the POJO fields initializes a separate JavaFX Property field and the update operation must change both fields.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/best-practices/bindings_select_screenshot.png" alt="bindings select screenshot">
</div>
<div class="title">Figure 65. UI Controls Bound to a POJO</div>
</div>
<div class="sect3">
<h4 id="_the_pojos">8.6.1. The POJOs</h4>
<div class="paragraph">
<p>Two POJOs are used: Track and Rating.  Track contains information about a music clip being played: album, artist, track name.</p>
</div>
<div class="listingblock">
<div class="title">Track.java (abbreviated)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Track {

    private String artist;
    private String album;
    private String track;
    private Integer trackNo;
    private Rating rating;
    private Boolean downloaded;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rating is a pairing of a value (ex, 3) and a scale (ex, max value of 5).  There is a Rating member in a Track which will show the Bindings.select() nesting syntax.</p>
</div>
<div class="listingblock">
<div class="title">Rating.java (abbreviated)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Rating {

    private Float value;
    private Float scale;</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>The construtor, getters, and setters have been left off for brevity and are included in the source download.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>In the Application subclass, the model is a single field "currentTrack".</p>
</div>
<div class="listingblock">
<div class="title">BindingsSelectApp.java</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class BindingsSelectApp extends Application {

    private final Track currentTrack = new Track(
            "Jaco Pastorious",
            "Jaco Pastorious",
            "Come On, Come Over",
            2,
            new Rating(4.99f, 5.00f),
            false
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Referring to the previous screenshot, the currentTrack fields are displayed in the TextFields().  "rating" is supplemented with a formatted String.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ui_code">8.6.2. UI Code</h4>
<div class="paragraph">
<p>The <code>TextField</code> controls and the Download <code>Button</code> are also Application subclass fields so that they can be used in both the Application.start() method and a private initBindings() method.</p>
</div>
<div class="listingblock">
<div class="title">BindingsSelectApp.java (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private final TextField tfArtist = new TextField();
    private final TextField tfAlbum = new TextField();
    private final TextField tfTrack = new TextField();
    private final TextField tfTrackNo = new TextField();
    private final TextField tfRating = new TextField();
    private final TextField tfDownloaded = new TextField();

    private final Button downloadButton = new Button("Download");

    private final BooleanProperty downloaded = new SimpleBooleanProperty(currentTrack, "downloaded");</code></pre>
</div>
</div>
<div class="paragraph">
<p>"downloaded" is a special JavaFX Property maintained alongside the field of the same name in the currentTrack object.  As mentioned earlier, the POJO will need to be updated manually.  The BooleanProperty "downloaded" is a convenience that keeps the app from having to modify the tfDownload TextField directly.</p>
</div>
<div class="paragraph">
<p>The start() method begins by creating the top <code>GridPane</code> container and adding the TextField and <code>Label</code> controls.</p>
</div>
<div class="listingblock">
<div class="title">BindingsSelectApp.java (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    @Override
    public void start(Stage primaryStage) throws Exception {

        GridPane gp = new GridPane();

        gp.add(new Label("Artist"), 0, 0);
        gp.add(tfArtist, 1, 0);
        gp.add(new Label("Album"), 0, 1);
        gp.add(tfAlbum, 1, 1);
        gp.add(new Label("Track"), 0, 2);
        gp.add(tfTrack, 1, 2);
        gp.add(new Label("#"), 0, 3);
        gp.add(tfTrackNo, 1, 3);
        gp.add(new Label("Rating"), 0, 4);
        gp.add(tfRating, 1, 4);
        gp.add(new Label("Downloaded"), 0, 5);
        gp.add(tfDownloaded, 1, 5);

        gp.setHgap(4.0d);
        gp.setVgap(8.0d);

        VBox.setVgrow(gp, Priority.ALWAYS);
        VBox.setMargin( gp, new Insets(40.0d) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>ButtonBar</code> container is used to hold the Download Button.  The ButtonBar and GridPane are added to a <code>VBox</code> and separated via a <code>Separator</code>.</p>
</div>
<div class="listingblock">
<div class="title">BindingsSelectApp.java (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        ButtonBar buttons = new ButtonBar();

        ButtonBar.setButtonData(downloadButton, ButtonBar.ButtonData.OTHER);

        buttons.getButtons().add(downloadButton);
        buttons.setPadding(new Insets(10.0d) );

        VBox vbox = new VBox(
                gp,
                new Separator(),
                buttons
        );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bindings">8.6.3. Bindings</h4>
<div class="paragraph">
<p>The bindings statements are in a private method "initBindings" which is called from the Application.start() method.</p>
</div>
<div class="listingblock">
<div class="title">BindingsSelectApp.java (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">    private void initBindings() {

        tfArtist.textProperty().bind( Bindings.select(currentTrack, "artist"));
        tfAlbum.textProperty().bind( Bindings.select(currentTrack, "album"));
        tfTrack.textProperty().bind( Bindings.select(currentTrack, "track"));

        tfTrackNo.textProperty().bind(
                Bindings.select(currentTrack, "trackNo").asString()
        );

        tfRating.textProperty().bind(
                Bindings.concat(
                    Bindings.select(currentTrack, "rating", "value").asString(),
                    " out of ",
                    Bindings.select(currentTrack, "rating", "scale").asString()
                )
        );

        tfDownloaded.textProperty().bind(downloaded.asString());
        downloadButton.disableProperty().bind(downloaded);
    }</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_bindings_select">Bindings.select</h5>
<div class="paragraph">
<p>Bindings.select is a static method that creates a typed binding from a plain object or an ObservableValue.  In this example, a POJO is passed in along with either a field name or a set of field names that form an object path.  For the artist, album, and track fields, the value returned from select() is a StringBinding and is compatible with the textProperty() of the TextFields.  The trackNo select() call will return an IntegerBinding which is not compatible with textProperty() so a method asString() is added to convert the IntegerBinding into a StringBinding.  asString() is also used for the special "downloaded" member variable which returns a BooleanBinding that throws a ClassCastException.</p>
</div>
<div class="paragraph">
<p>tfRating is bound to a complex expression.  The components of tfRating are the value (ex "4.99") and the scale ("5.0").  A string constant " out of " is set in the middle of the expression.  The joining of expressions is performed by the contact() method which returns the formatted string displayed in the UI.  Notice that this select() call uses a path which is a varargs collection of field names.  Passing "rating" then "value" is used for the object path currentTrack.rating.value.  currentTrack.rating.scale is accessed similarly.</p>
</div>
<div class="paragraph">
<p>There is an additional binding disabling the Downloaded Button if the track has already been downloaded.  Like the binding to tfDownloaded, the Bindings.select() method is skipped for a direct bind() call since the member variable "downloaded" is a JavaFX Property.  This "downloaded" Property is initialized with the POJO value which is a field on the currentTrack object.</p>
</div>
</div>
<div class="sect4">
<h5 id="_model_update">Model Update</h5>
<div class="paragraph">
<p>Since the model is based on the POJO "currentTrack", the fields must be updated manually.  In some architectures, this is desired since the POJO represents record state (the state of the data from the app) and not the screen state (what the user is looking at).  This means that a deliberate setter must be made to update record state and that needs to trigger a screen state update.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/best-practices/bindings_select_downloaded_screenshot.png" alt="bindings select downloaded screenshot">
</div>
<div class="title">Figure 66. A Model Change Disables the Download Button</div>
</div>
<div class="paragraph">
<p>In this example, there is only one field that will be modified: downloaded.  Pressing the Download Button will call a setter on the special downloaded BooleanProperty of the Application.  When the value of the BooleanProperty changes, the UI is updated from the tfDownloaded binding.  A ChangeListener is attached to the downloaded BooleanProperty which triggers an update of the model state.</p>
</div>
<div class="listingblock">
<div class="title">BindingsSelectApp.java (cont.)</div>
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">        downloadButton.setOnAction( (evt) -&gt; {
            downloaded.set(true);
        });

        downloaded.addListener( (obs,ov,nv) -&gt; currentTrack.setDownloaded(true));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Download Button serves as a commit.  While the user is limited in this app, they could edit the TextFields and use a Save Button to transfer the values on the screen to the model.  Additionally, a Reset Button could discard TextField changes.</p>
</div>
<div class="paragraph">
<p>The declarative binding of JavaFX UI controls to Properties enforces a consistent style and behavior throughout the application.  Similar functionality can be accomplished by directly accessing the controls ("setText()") and retrieving updates from addListener().  However, listeners are often written inconsistently by different developers and do not take advantage of the extra binding functions like contact(), sum(), and when().  Bindings.select() provides a way to bring POJOs used elsewhere in the app into JavaFX.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_source_4">8.6.4. Source</h4>
<div class="paragraph">
<p>The complete source code and Gradle project can be found at the link below.</p>
</div>
<div class="paragraph">
<p><a href="https://courses.bekwam.net/public_tutorials/source/bkcourse_bindingsapp_sources.zip">BindingsApp Source Zip</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version unspecified<br>
Last updated 2021-02-05 10:38:41 UTC
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>